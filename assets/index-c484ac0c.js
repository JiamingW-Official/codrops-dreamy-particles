var ba=Object.defineProperty;var wa=(s,t,e)=>t in s?ba(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Fi=(s,t,e)=>(wa(s,typeof t!="symbol"?t+"":t,e),e);import{L as Ca,F as Ma,S as Da,E as Sa,a as Qi,G as ka,M as Ta,D as Ea,b as Ia,H as Pa,C as In,c as Fa}from"./GPGPU-dd6e254d.js";class Oa{constructor(){this.dataMap=null}async init(){try{const t=await fetch("./data/market_data.json?v="+new Date().getTime());if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.dataMap=await t.json(),console.log("Market Data Loaded:",Object.keys(this.dataMap).length,"days")}catch(t){console.error("Failed to load market data:",t)}}getDataForDate(t){if(!this.dataMap)return console.warn("Market data not loaded yet."),this.getMockFallback(t);const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=`${e}-${n}-${i}`;let a=this.dataMap[r];if(!a)for(let o=1;o<=5;o++){const l=new Date(t);l.setDate(t.getDate()-o);const u=l.getFullYear(),f=String(l.getMonth()+1).padStart(2,"0"),m=String(l.getDate()).padStart(2,"0"),g=`${u}-${f}-${m}`;if(this.dataMap[g]){a=this.dataMap[g];break}}return a||this.getMockFallback(t)}getMockFallback(t){return{date:t.toISOString().split("T")[0],fearGreedIndex:50,sentiment:0,marketChangePercent:0,headlines:["Data unavailable for this date","Please check fetch_data.py"],volatility:.2,vix:20,indexValue:0,sp500Value:0,volume:0,dayHigh:0,dayLow:0,yearHigh:0,yearLow:0,sectorStat:0,rsi:50,tenYearYield:4,moodState:"Neutral",regime:"Data Missing"}}}class Aa extends Ca{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Ma(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(o){const l=r.parse(JSON.parse(o));e&&e(l)},n,i)}parse(t){return new La(t)}}class La{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=Na(t,e,this.data);for(let r=0,a=i.length;r<a;r++)n.push(...i[r].toShapes());return n}}function Na(s,t,e){const n=Array.from(s),i=t/e.resolution,r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,a=[];let o=0,l=0;for(let u=0;u<n.length;u++){const f=n[u];if(f===`
`)o=0,l-=r;else{const m=Ra(f,i,o,l,e);o+=m.offsetX,a.push(m.path)}}return a}function Ra(s,t,e,n,i){const r=i.glyphs[s]||i.glyphs["?"];if(!r){console.error('THREE.Font: character "'+s+'" does not exists in font family '+i.familyName+".");return}const a=new Da;let o,l,u,f,m,g,p,v;if(r.o){const c=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let _=0,y=c.length;_<y;)switch(c[_++]){case"m":o=c[_++]*t+e,l=c[_++]*t+n,a.moveTo(o,l);break;case"l":o=c[_++]*t+e,l=c[_++]*t+n,a.lineTo(o,l);break;case"q":u=c[_++]*t+e,f=c[_++]*t+n,m=c[_++]*t+e,g=c[_++]*t+n,a.quadraticCurveTo(m,g,u,f);break;case"b":u=c[_++]*t+e,f=c[_++]*t+n,m=c[_++]*t+e,g=c[_++]*t+n,p=c[_++]*t+e,v=c[_++]*t+n,a.bezierCurveTo(m,g,p,v,u,f);break}}return{offsetX:r.ha*t,path:a}}class $a extends Sa{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const i=n.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}class Ba{constructor(){this.experience=new Qi,this.scene=this.experience.scene,this.camera=this.experience.camera,this.group=new ka,this.scene.add(this.group),this.words=[],this.font=null,this.loader=new Aa,this.loader.load("/fonts/helvetiker_regular.typeface.json",t=>{this.font=t}),this.stopWords=new Set(["stock","market","daily","news","update","today","price","shares","gains","losses","drop","rise","fall","plunge","record","highs","lows","watch","moves","action","closely"])}updateHeadlines(t){if(!this.font||!t)return;this.words.forEach(l=>{l.geometry.dispose(),l.material.dispose(),this.group.remove(l)}),this.words=[];const n=t.map(l=>l.title).join(" ").toLowerCase().match(/\b\w+\b/g)||[],i={};n.forEach(l=>{l.length>3&&!this.stopWords.has(l)&&(i[l]=(i[l]||0)+1)});const a=Object.keys(i).sort((l,u)=>i[u]-i[l]).slice(0,8);if(a.length===0)return;const o=new Ta({color:16777215,transparent:!0,opacity:.6,side:Ea});a.forEach((l,u)=>{const f=new $a(l.toUpperCase(),{font:this.font,size:.15,height:.02,curveSegments:4});f.center();const m=new Ia(f,o),g=Math.acos(-1+2*u/a.length),p=Math.sqrt(a.length*Math.PI)*g,v=3.5;m.position.setFromSphericalCoords(v,g,p),m.lookAt(0,0,0),m.userData={word:l,angle:Math.random()*Math.PI*2,speed:.2+Math.random()*.2,yOffset:(Math.random()-.5)*2},this.group.add(m),this.words.push(m)})}update(t){this.group.rotation.y=t*.1,this.group.rotation.z=Math.sin(t*.05)*.1,this.words.forEach(e=>{this.experience.camera&&this.experience.camera.instance&&e.lookAt(this.experience.camera.instance.position)})}checkIntersects(t){if(!this.group||this.words.length===0)return null;const e=t.intersectObjects(this.words,!1);if(e.length>0){this.words.forEach(i=>i.material.color.setHex(16777215));const n=e[0].object;return n.material.color.setHex(65450),n.userData.word}else this.words.forEach(n=>n.material.color.setHex(16777215));return null}}function Ge(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ji(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Pe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ft={duration:.5,overwrite:!1,delay:0},oi,pe,Z,Le=1e8,J=1/Le,Un=Math.PI*2,Ya=Un/4,za=0,Zi=Math.sqrt,Ha=Math.cos,Va=Math.sin,le=function(t){return typeof t=="string"},ie=function(t){return typeof t=="function"},Xe=function(t){return typeof t=="number"},li=function(t){return typeof t>"u"},je=function(t){return typeof t=="object"},xe=function(t){return t!==!1},fi=function(){return typeof window<"u"},on=function(t){return ie(t)||le(t)},er=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},me=Array.isArray,Gn=/(?:-?\.?\d|\.)+/gi,tr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Dt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Pn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,nr=/[+-]=-?[.\d]+/,ir=/[^,'"\[\]\s]+/gi,ja=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,te,Ye,Wn,ui,Fe={},hn={},rr,ar=function(t){return(hn=vt(t,Fe))&&Me},ci=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Xt=function(t,e){return!e&&console.warn(t)},sr=function(t,e){return t&&(Fe[t]=e)&&hn&&(hn[t]=e)||Fe},qt=function(){return 0},Ua={suppressEvents:!0,isStart:!0,kill:!1},un={suppressEvents:!0,kill:!1},Ga={suppressEvents:!0},di={},it=[],Xn={},or,Te={},Fn={},Oi=30,cn=[],hi="",pi=function(t){var e=t[0],n,i;if(je(e)||ie(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(i=cn.length;i--&&!cn[i].targetTest(e););n=cn[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Pr(t[i],n)))||t.splice(i,1);return t},pt=function(t){return t._gsap||pi(Ne(t))[0]._gsap},lr=function(t,e,n){return(n=t[e])&&ie(n)?t[e]():li(n)&&t.getAttribute&&t.getAttribute(e)||n},be=function(t,e){return(t=t.split(",")).forEach(e)||t},re=function(t){return Math.round(t*1e5)/1e5||0},oe=function(t){return Math.round(t*1e7)/1e7||0},kt=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+i:n==="-"?t-i:n==="*"?t*i:t/i},Wa=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},pn=function(){var t=it.length,e=it.slice(0),n,i;for(Xn={},it.length=0,n=0;n<t;n++)i=e[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},fr=function(t,e,n,i){it.length&&!pe&&pn(),t.render(e,n,i||pe&&e<0&&(t._initted||t._startAt)),it.length&&!pe&&pn()},ur=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ir).length<2?e:le(t)?t.trim():t},cr=function(t){return t},Re=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Xa=function(t){return function(e,n){for(var i in n)i in e||i==="duration"&&t||i==="ease"||(e[i]=n[i])}},vt=function(t,e){for(var n in e)t[n]=e[n];return t},Ai=function s(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=je(e[n])?s(t[n]||(t[n]={}),e[n]):e[n]);return t},mn=function(t,e){var n={},i;for(i in t)i in e||(n[i]=t[i]);return n},jt=function(t){var e=t.parent||te,n=t.keyframes?Xa(me(t.keyframes)):Re;if(xe(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},qa=function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0},dr=function(t,e,n,i,r){n===void 0&&(n="_first"),i===void 0&&(i="_last");var a=t[i],o;if(r)for(o=e[r];a&&a[r]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},wn=function(t,e,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},at=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},mt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Ka=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},qn=function(t,e,n,i){return t._startAt&&(pe?t._startAt.revert(un):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},Qa=function s(t){return!t||t._ts&&s(t.parent)},Li=function(t){return t._repeat?Ot(t._tTime,t=t.duration()+t._rDelay)*t:0},Ot=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},gn=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Cn=function(t){return t._end=oe(t._start+(t._tDur/Math.abs(t._ts||t._rts||J)||0))},Mn=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=oe(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Cn(t),n._dirty||mt(n,t)),t},hr=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=gn(t.rawTime(),e),(!e._dur||nn(0,e.totalDuration(),n)-e._tTime>J)&&e.render(n,!0)),mt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-J}},ze=function(t,e,n,i){return e.parent&&at(e),e._start=oe((Xe(n)?n:n||t!==te?Oe(t,n,e):t._time)+e._delay),e._end=oe(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),dr(t,e,"_first","_last",t._sort?"_start":0),Kn(e)||(t._recent=e),i||hr(t,e),t._ts<0&&Mn(t,t._tTime),t},pr=function(t,e){return(Fe.ScrollTrigger||ci("scrollTrigger",e))&&Fe.ScrollTrigger.create(e,t)},mr=function(t,e,n,i,r){if(gi(t,e,r),!t._initted)return 1;if(!n&&t._pt&&!pe&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&or!==Ee.frame)return it.push(t),t._lazy=[r,i],1},Ja=function s(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||s(e))},Kn=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Za=function(t,e,n,i){var r=t.ratio,a=e<0||!e&&(!t._start&&Ja(t)&&!(!t._initted&&Kn(t))||(t._ts<0||t._dp._ts<0)&&!Kn(t))?0:1,o=t._rDelay,l=0,u,f,m;if(o&&t._repeat&&(l=nn(0,t._tDur,e),f=Ot(l,o),t._yoyo&&f&1&&(a=1-a),f!==Ot(t._tTime,o)&&(r=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==r||pe||i||t._zTime===J||!e&&t._zTime){if(!t._initted&&mr(t,e,i,n,l))return;for(m=t._zTime,t._zTime=e||(n?J:0),n||(n=e&&!m),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=l,u=t._pt;u;)u.r(a,u.d),u=u._next;e<0&&qn(t,e,n,!0),t._onUpdate&&!n&&Ie(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&Ie(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&at(t,1),!n&&!pe&&(Ie(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},es=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<e)return i;i=i._prev}},At=function(t,e,n,i){var r=t._repeat,a=oe(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:oe(a*(r+1)+t._rDelay*r):a,o>0&&!i&&Mn(t,t._tTime=t._tDur*o),t.parent&&Cn(t),n||mt(t.parent,t),t},Ni=function(t){return t instanceof _e?mt(t):At(t,t._dur)},ts={_start:0,endTime:qt,totalDuration:qt},Oe=function s(t,e,n){var i=t.labels,r=t._recent||ts,a=t.duration()>=Le?r.endTime(!1):t._dur,o,l,u;return le(e)&&(isNaN(e)||e in i)?(l=e.charAt(0),u=e.substr(-1)==="%",o=e.indexOf("="),l==="<"||l===">"?(o>=0&&(e=e.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(u?(o<0?r:n).totalDuration()/100:1)):o<0?(e in i||(i[e]=a),i[e]):(l=parseFloat(e.charAt(o-1)+e.substr(o+1)),u&&n&&(l=l/100*(me(n)?n[0]:n).totalDuration()),o>1?s(t,e.substr(0,o-1),n)+l:a+l)):e==null?a:+e},Ut=function(t,e,n){var i=Xe(e[1]),r=(i?2:1)+(t<2?0:1),a=e[r],o,l;if(i&&(a.duration=e[1]),a.parent=n,t){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=xe(l.vars.inherit)&&l.parent;a.immediateRender=xe(o.immediateRender),t<2?a.runBackwards=1:a.startAt=e[r-1]}return new ae(e[0],a,e[r+1])},ot=function(t,e){return t||t===0?e(t):e},nn=function(t,e,n){return n<t?t:n>e?e:n},he=function(t,e){return!le(t)||!(e=ja.exec(t))?"":e[1]},ns=function(t,e,n){return ot(n,function(i){return nn(t,e,i)})},Qn=[].slice,gr=function(t,e){return t&&je(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&je(t[0]))&&!t.nodeType&&t!==Ye},is=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(i){var r;return le(i)&&!e||gr(i,1)?(r=n).push.apply(r,Ne(i)):n.push(i)})||n},Ne=function(t,e,n){return Z&&!e&&Z.selector?Z.selector(t):le(t)&&!n&&(Wn||!Lt())?Qn.call((e||ui).querySelectorAll(t),0):me(t)?is(t,n):gr(t)?Qn.call(t,0):t?[t]:[]},Jn=function(t){return t=Ne(t)[0]||Xt("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Ne(e,n.querySelectorAll?n:n===t?Xt("Invalid scope")||ui.createElement("div"):t)}},_r=function(t){return t.sort(function(){return .5-Math.random()})},vr=function(t){if(ie(t))return t;var e=je(t)?t:{each:t},n=gt(e.ease),i=e.from||0,r=parseFloat(e.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,u=e.axis,f=i,m=i;return le(i)?f=m={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(f=i[0],m=i[1]),function(g,p,v){var c=(v||e).length,_=a[c],y,w,b,C,S,D,E,I,T;if(!_){if(T=e.grid==="auto"?0:(e.grid||[1,Le])[1],!T){for(E=-Le;E<(E=v[T++].getBoundingClientRect().left)&&T<c;);T<c&&T--}for(_=a[c]=[],y=l?Math.min(T,c)*f-.5:i%T,w=T===Le?0:l?c*m/T-.5:i/T|0,E=0,I=Le,D=0;D<c;D++)b=D%T-y,C=w-(D/T|0),_[D]=S=u?Math.abs(u==="y"?C:b):Zi(b*b+C*C),S>E&&(E=S),S<I&&(I=S);i==="random"&&_r(_),_.max=E-I,_.min=I,_.v=c=(parseFloat(e.amount)||parseFloat(e.each)*(T>c?c-1:u?u==="y"?c/T:T:Math.max(T,c/T))||0)*(i==="edges"?-1:1),_.b=c<0?r-c:r,_.u=he(e.amount||e.each)||0,n=n&&c<0?Tr(n):n}return c=(_[g]-_.min)/_.max||0,oe(_.b+(n?n(c):c)*_.v)+_.u}},Zn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=oe(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(Xe(n)?0:he(n))}},yr=function(t,e){var n=me(t),i,r;return!n&&je(t)&&(i=n=t.radius||Le,t.values?(t=Ne(t.values),(r=!Xe(t[0]))&&(i*=i)):t=Zn(t.increment)),ot(e,n?ie(t)?function(a){return r=t(a),Math.abs(r-a)<=i?r:a}:function(a){for(var o=parseFloat(r?a.x:a),l=parseFloat(r?a.y:0),u=Le,f=0,m=t.length,g,p;m--;)r?(g=t[m].x-o,p=t[m].y-l,g=g*g+p*p):g=Math.abs(t[m]-o),g<u&&(u=g,f=m);return f=!i||u<=i?t[f]:a,r||f===a||Xe(a)?f:f+he(a)}:Zn(t))},xr=function(t,e,n,i){return ot(me(t)?!e:n===!0?!!(n=0):!i,function(){return me(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*i)/i})},rs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){return e.reduce(function(r,a){return a(r)},i)}},as=function(t,e){return function(n){return t(parseFloat(n))+(e||he(n))}},ss=function(t,e,n){return wr(t,e,0,1,n)},br=function(t,e,n){return ot(n,function(i){return t[~~e(i)]})},os=function s(t,e,n){var i=e-t;return me(t)?br(t,s(0,t.length),e):ot(n,function(r){return(i+(r-t)%i)%i+t})},ls=function s(t,e,n){var i=e-t,r=i*2;return me(t)?br(t,s(0,t.length-1),e):ot(n,function(a){return a=(r+(a-t)%r)%r||0,t+(a>i?r-a:a)})},Kt=function(t){for(var e=0,n="",i,r,a,o;~(i=t.indexOf("random(",e));)a=t.indexOf(")",i),o=t.charAt(i+7)==="[",r=t.substr(i+7,a-i-7).match(o?ir:Gn),n+=t.substr(e,i-e)+xr(o?r:+r[0],o?0:+r[1],+r[2]||1e-5),e=a+1;return n+t.substr(e,t.length-e)},wr=function(t,e,n,i,r){var a=e-t,o=i-n;return ot(r,function(l){return n+((l-t)/a*o||0)})},fs=function s(t,e,n,i){var r=isNaN(t+e)?0:function(p){return(1-p)*t+p*e};if(!r){var a=le(t),o={},l,u,f,m,g;if(n===!0&&(i=1)&&(n=null),a)t={p:t},e={p:e};else if(me(t)&&!me(e)){for(f=[],m=t.length,g=m-2,u=1;u<m;u++)f.push(s(t[u-1],t[u]));m--,r=function(v){v*=m;var c=Math.min(g,~~v);return f[c](v-c)},n=e}else i||(t=vt(me(t)?[]:{},t));if(!f){for(l in e)mi.call(o,t,l,"get",e[l]);r=function(v){return yi(v,o)||(a?t.p:t)}}}return ot(n,r)},Ri=function(t,e,n){var i=t.labels,r=Le,a,o,l;for(a in i)o=i[a]-e,o<0==!!n&&o&&r>(o=Math.abs(o))&&(l=a,r=o);return l},Ie=function(t,e,n){var i=t.vars,r=i[e],a=Z,o=t._ctx,l,u,f;if(r)return l=i[e+"Params"],u=i.callbackScope||t,n&&it.length&&pn(),o&&(Z=o),f=l?r.apply(u,l):r.call(u),Z=a,f},Ht=function(t){return at(t),t.scrollTrigger&&t.scrollTrigger.kill(!!pe),t.progress()<1&&Ie(t,"onInterrupt"),t},St,Cr=[],Mr=function(t){if(t)if(t=!t.name&&t.default||t,fi()||t.headless){var e=t.name,n=ie(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:qt,render:yi,add:mi,kill:Ds,modifier:Ms,rawVars:0},a={targetTest:0,get:0,getSetter:vi,aliases:{},register:0};if(Lt(),t!==i){if(Te[e])return;Re(i,Re(mn(t,r),a)),vt(i.prototype,vt(r,mn(t,a))),Te[i.prop=e]=i,t.targetTest&&(cn.push(i),di[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}sr(e,i),t.register&&t.register(Me,i,we)}else Cr.push(t)},Q=255,Vt={aqua:[0,Q,Q],lime:[0,Q,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Q],navy:[0,0,128],white:[Q,Q,Q],olive:[128,128,0],yellow:[Q,Q,0],orange:[Q,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Q,0,0],pink:[Q,192,203],cyan:[0,Q,Q],transparent:[Q,Q,Q,0]},On=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*Q+.5|0},Dr=function(t,e,n){var i=t?Xe(t)?[t>>16,t>>8&Q,t&Q]:0:Vt.black,r,a,o,l,u,f,m,g,p,v;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Vt[t])i=Vt[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+r+r+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&Q,i&Q,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&Q,t&Q]}else if(t.substr(0,3)==="hsl"){if(i=v=t.match(Gn),!e)l=+i[0]%360/360,u=+i[1]/100,f=+i[2]/100,a=f<=.5?f*(u+1):f+u-f*u,r=f*2-a,i.length>3&&(i[3]*=1),i[0]=On(l+1/3,r,a),i[1]=On(l,r,a),i[2]=On(l-1/3,r,a);else if(~t.indexOf("="))return i=t.match(tr),n&&i.length<4&&(i[3]=1),i}else i=t.match(Gn)||Vt.transparent;i=i.map(Number)}return e&&!v&&(r=i[0]/Q,a=i[1]/Q,o=i[2]/Q,m=Math.max(r,a,o),g=Math.min(r,a,o),f=(m+g)/2,m===g?l=u=0:(p=m-g,u=f>.5?p/(2-m-g):p/(m+g),l=m===r?(a-o)/p+(a<o?6:0):m===a?(o-r)/p+2:(r-a)/p+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(f*100+.5)),n&&i.length<4&&(i[3]=1),i},Sr=function(t){var e=[],n=[],i=-1;return t.split(rt).forEach(function(r){var a=r.match(Dt)||[];e.push.apply(e,a),n.push(i+=a.length+1)}),e.c=n,e},$i=function(t,e,n){var i="",r=(t+i).match(rt),a=e?"hsla(":"rgba(",o=0,l,u,f,m;if(!r)return t;if(r=r.map(function(g){return(g=Dr(g,e,1))&&a+(e?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),n&&(f=Sr(t),l=n.c,l.join(i)!==f.c.join(i)))for(u=t.replace(rt,"1").split(Dt),m=u.length-1;o<m;o++)i+=u[o]+(~l.indexOf(o)?r.shift()||a+"0,0,0,0)":(f.length?f:r.length?r:n).shift());if(!u)for(u=t.split(rt),m=u.length-1;o<m;o++)i+=u[o]+r[o];return i+u[m]},rt=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Vt)s+="|"+t+"\\b";return new RegExp(s+")","gi")}(),us=/hsl[a]?\(/,kr=function(t){var e=t.join(" "),n;if(rt.lastIndex=0,rt.test(e))return n=us.test(e),t[1]=$i(t[1],n),t[0]=$i(t[0],n,Sr(t[1])),!0},Qt,Ee=function(){var s=Date.now,t=500,e=33,n=s(),i=n,r=1e3/240,a=r,o=[],l,u,f,m,g,p,v=function c(_){var y=s()-i,w=_===!0,b,C,S,D;if((y>t||y<0)&&(n+=y-e),i+=y,S=i-n,b=S-a,(b>0||w)&&(D=++m.frame,g=S-m.time*1e3,m.time=S=S/1e3,a+=b+(b>=r?4:r-b),C=1),w||(l=u(c)),C)for(p=0;p<o.length;p++)o[p](S,g,D,_)};return m={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(_){return g/(1e3/(_||60))},wake:function(){rr&&(!Wn&&fi()&&(Ye=Wn=window,ui=Ye.document||{},Fe.gsap=Me,(Ye.gsapVersions||(Ye.gsapVersions=[])).push(Me.version),ar(hn||Ye.GreenSockGlobals||!Ye.gsap&&Ye||{}),Cr.forEach(Mr)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&m.sleep(),u=f||function(_){return setTimeout(_,a-m.time*1e3+1|0)},Qt=1,v(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(l),Qt=0,u=qt},lagSmoothing:function(_,y){t=_||1/0,e=Math.min(y||33,t)},fps:function(_){r=1e3/(_||240),a=m.time*1e3+r},add:function(_,y,w){var b=y?function(C,S,D,E){_(C,S,D,E),m.remove(b)}:_;return m.remove(_),o[w?"unshift":"push"](b),Lt(),b},remove:function(_,y){~(y=o.indexOf(_))&&o.splice(y,1)&&p>=y&&p--},_listeners:o},m}(),Lt=function(){return!Qt&&Ee.wake()},X={},cs=/^[\d.\-M][\d.\-,\s]/,ds=/["']/g,hs=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),i=n[0],r=1,a=n.length,o,l,u;r<a;r++)l=n[r],o=r!==a-1?l.lastIndexOf(","):l.length,u=l.substr(0,o),e[i]=isNaN(u)?u.replace(ds,"").trim():+u,i=l.substr(o+1).trim();return e},ps=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)},ms=function(t){var e=(t+"").split("("),n=X[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[hs(e[1])]:ps(t).split(",").map(ur)):X._CE&&cs.test(t)?X._CE("",t):n},Tr=function(t){return function(e){return 1-t(1-e)}},Er=function s(t,e){for(var n=t._first,i;n;)n instanceof _e?s(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?s(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next},gt=function(t,e){return t&&(ie(t)?t:X[t]||ms(t))||e},xt=function(t,e,n,i){n===void 0&&(n=function(l){return 1-e(1-l)}),i===void 0&&(i=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var r={easeIn:e,easeOut:n,easeInOut:i},a;return be(t,function(o){X[o]=Fe[o]=r,X[a=o.toLowerCase()]=n;for(var l in r)X[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=X[o+"."+l]=r[l]}),r},Ir=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},An=function s(t,e,n){var i=e>=1?e:1,r=(n||(t?.3:.45))/(e<1?e:1),a=r/Un*(Math.asin(1/i)||0),o=function(f){return f===1?1:i*Math.pow(2,-10*f)*Va((f-a)*r)+1},l=t==="out"?o:t==="in"?function(u){return 1-o(1-u)}:Ir(o);return r=Un/r,l.config=function(u,f){return s(t,u,f)},l},Ln=function s(t,e){e===void 0&&(e=1.70158);var n=function(a){return a?--a*a*((e+1)*a+e)+1:0},i=t==="out"?n:t==="in"?function(r){return 1-n(1-r)}:Ir(n);return i.config=function(r){return s(t,r)},i};be("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,t){var e=t<5?t+1:t;xt(s+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});X.Linear.easeNone=X.none=X.Linear.easeIn;xt("Elastic",An("in"),An("out"),An());(function(s,t){var e=1/t,n=2*e,i=2.5*e,r=function(o){return o<e?s*o*o:o<n?s*Math.pow(o-1.5/t,2)+.75:o<i?s*(o-=2.25/t)*o+.9375:s*Math.pow(o-2.625/t,2)+.984375};xt("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);xt("Expo",function(s){return s?Math.pow(2,10*(s-1)):0});xt("Circ",function(s){return-(Zi(1-s*s)-1)});xt("Sine",function(s){return s===1?1:-Ha(s*Ya)+1});xt("Back",Ln("in"),Ln("out"),Ln());X.SteppedEase=X.steps=Fe.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,a=1-J;return function(o){return((i*nn(0,a,o)|0)+r)*n}}};Ft.ease=X["quad.out"];be("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return hi+=s+","+s+"Params,"});var Pr=function(t,e){this.id=za++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:lr,this.set=e?e.getSetter:vi},Jt=function(){function s(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,At(this,+e.duration,1,1),this.data=e.data,Z&&(this._ctx=Z,Z.data.push(this)),Qt||Ee.wake()}var t=s.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,At(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,i){if(Lt(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Mn(this,n),!r._dp||r.parent||hr(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ze(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===J||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),fr(this,n,i)),this},t.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Li(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},t.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Li(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,i):this._repeat?Ot(this._tTime,r)+1:1},t.timeScale=function(n,i){if(!arguments.length)return this._rts===-J?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?gn(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-J?0:this._rts,this.totalTime(nn(-Math.abs(this._delay),this._tDur,r),i!==!1),Cn(this),Ka(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Lt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==J&&(this._tTime-=J)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ze(i,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(xe(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?gn(i.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=Ga);var i=pe;return pe=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),pe=i,this},t.globalTime=function(n){for(var i=this,r=arguments.length?n:i.rawTime();i;)r=i._start+r/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Ni(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,Ni(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,i){return this.totalTime(Oe(this,n),xe(i))},t.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,xe(i))},t.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},t.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-J:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-J,this},t.isActive=function(){var n=this.parent||this._dp,i=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=i&&r<this.endTime(!0)-J)},t.eventCallback=function(n,i,r){var a=this.vars;return arguments.length>1?(i?(a[n]=i,r&&(a[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},t.then=function(n){var i=this;return new Promise(function(r){var a=ie(n)?n:cr,o=function(){var u=i.then;i.then=null,ie(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=u),r(a),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},t.kill=function(){Ht(this)},s}();Re(Jt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-J,_prom:0,_ps:!1,_rts:1});var _e=function(s){Ji(t,s);function t(n,i){var r;return n===void 0&&(n={}),r=s.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=xe(n.sortChildren),te&&ze(n.parent||te,Ge(r),i),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&pr(Ge(r),n.scrollTrigger),r}var e=t.prototype;return e.to=function(i,r,a){return Ut(0,arguments,this),this},e.from=function(i,r,a){return Ut(1,arguments,this),this},e.fromTo=function(i,r,a,o){return Ut(2,arguments,this),this},e.set=function(i,r,a){return r.duration=0,r.parent=this,jt(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new ae(i,r,Oe(this,a),1),this},e.call=function(i,r,a){return ze(this,ae.delayedCall(0,i,r),a)},e.staggerTo=function(i,r,a,o,l,u,f){return a.duration=r,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=f,a.parent=this,new ae(i,a,Oe(this,l)),this},e.staggerFrom=function(i,r,a,o,l,u,f){return a.runBackwards=1,jt(a).immediateRender=xe(a.immediateRender),this.staggerTo(i,r,a,o,l,u,f)},e.staggerFromTo=function(i,r,a,o,l,u,f,m){return o.startAt=a,jt(o).immediateRender=xe(o.immediateRender),this.staggerTo(i,r,o,l,u,f,m)},e.render=function(i,r,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,f=i<=0?0:oe(i),m=this._zTime<0!=i<0&&(this._initted||!u),g,p,v,c,_,y,w,b,C,S,D,E;if(this!==te&&f>l&&i>=0&&(f=l),f!==this._tTime||a||m){if(o!==this._time&&u&&(f+=this._time-o,i+=this._time-o),g=f,C=this._start,b=this._ts,y=!b,m&&(u||(o=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(D=this._yoyo,_=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(_*100+i,r,a);if(g=oe(f%_),f===l?(c=this._repeat,g=u):(c=~~(f/_),c&&c===f/_&&(g=u,c--),g>u&&(g=u)),S=Ot(this._tTime,_),!o&&this._tTime&&S!==c&&this._tTime-S*_-this._dur<=0&&(S=c),D&&c&1&&(g=u-g,E=1),c!==S&&!this._lock){var I=D&&S&1,T=I===(D&&c&1);if(c<S&&(I=!I),o=I?0:f%u?u:f,this._lock=1,this.render(o||(E?0:oe(c*_)),r,!u)._lock=0,this._tTime=f,!r&&this.parent&&Ie(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),o&&o!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,T&&(this._lock=2,o=I?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Er(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=es(this,oe(o),oe(g)),w&&(f-=g-(g=w._start))),this._tTime=f,this._time=g,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&g&&!r&&!c&&(Ie(this,"onStart"),this._tTime!==f))return this;if(g>=o&&i>=0)for(p=this._first;p;){if(v=p._next,(p._act||g>=p._start)&&p._ts&&w!==p){if(p.parent!==this)return this.render(i,r,a);if(p.render(p._ts>0?(g-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(g-p._start)*p._ts,r,a),g!==this._time||!this._ts&&!y){w=0,v&&(f+=this._zTime=-J);break}}p=v}else{p=this._last;for(var B=i<0?i:g;p;){if(v=p._prev,(p._act||B<=p._end)&&p._ts&&w!==p){if(p.parent!==this)return this.render(i,r,a);if(p.render(p._ts>0?(B-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(B-p._start)*p._ts,r,a||pe&&(p._initted||p._startAt)),g!==this._time||!this._ts&&!y){w=0,v&&(f+=this._zTime=B?-J:J);break}}p=v}}if(w&&!r&&(this.pause(),w.render(g>=o?0:-J)._zTime=g>=o?1:-1,this._ts))return this._start=C,Cn(this),this.render(i,r,a);this._onUpdate&&!r&&Ie(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&o)&&(C===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(f===l&&this._ts>0||!f&&this._ts<0)&&at(this,1),!r&&!(i<0&&!o)&&(f||o||!l)&&(Ie(this,f===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(i,r){var a=this;if(Xe(r)||(r=Oe(this,r,i)),!(i instanceof Jt)){if(me(i))return i.forEach(function(o){return a.add(o,r)}),this;if(le(i))return this.addLabel(i,r);if(ie(i))i=ae.delayedCall(0,i);else return this}return this!==i?ze(this,i,r):this},e.getChildren=function(i,r,a,o){i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),o===void 0&&(o=-Le);for(var l=[],u=this._first;u;)u._start>=o&&(u instanceof ae?r&&l.push(u):(a&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,r,a)))),u=u._next;return l},e.getById=function(i){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===i)return r[a]},e.remove=function(i){return le(i)?this.removeLabel(i):ie(i)?this.killTweensOf(i):(wn(this,i),i===this._recent&&(this._recent=this._last),mt(this))},e.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=oe(Ee.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),s.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},e.addLabel=function(i,r){return this.labels[i]=Oe(this,r),this},e.removeLabel=function(i){return delete this.labels[i],this},e.addPause=function(i,r,a){var o=ae.delayedCall(0,r||qt,a);return o.data="isPause",this._hasPause=1,ze(this,o,Oe(this,i))},e.removePause=function(i){var r=this._first;for(i=Oe(this,i);r;)r._start===i&&r.data==="isPause"&&at(r),r=r._next},e.killTweensOf=function(i,r,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)et!==o[l]&&o[l].kill(i,r);return this},e.getTweensOf=function(i,r){for(var a=[],o=Ne(i),l=this._first,u=Xe(r),f;l;)l instanceof ae?Wa(l._targets,o)&&(u?(!et||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&a.push(l):(f=l.getTweensOf(o,r)).length&&a.push.apply(a,f),l=l._next;return a},e.tweenTo=function(i,r){r=r||{};var a=this,o=Oe(a,i),l=r,u=l.startAt,f=l.onStart,m=l.onStartParams,g=l.immediateRender,p,v=ae.to(a,Re({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:r.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||J,onStart:function(){if(a.pause(),!p){var _=r.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());v._dur!==_&&At(v,_,0,1).render(v._time,!0,!0),p=1}f&&f.apply(v,m||[])}},r));return g?v.render(0):v},e.tweenFromTo=function(i,r,a){return this.tweenTo(r,Re({startAt:{time:Oe(this,i)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(i){return i===void 0&&(i=this._time),Ri(this,Oe(this,i))},e.previousLabel=function(i){return i===void 0&&(i=this._time),Ri(this,Oe(this,i),1)},e.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+J)},e.shiftChildren=function(i,r,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,u;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(r)for(u in l)l[u]>=a&&(l[u]+=i);return mt(this)},e.invalidate=function(i){var r=this._first;for(this._lock=0;r;)r.invalidate(i),r=r._next;return s.prototype.invalidate.call(this,i)},e.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),mt(this)},e.totalDuration=function(i){var r=0,a=this,o=a._last,l=Le,u,f,m;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(m=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),f=o._start,f>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,ze(a,o,f-o._delay,1)._lock=0):l=f,f<0&&o._ts&&(r-=f,(!m&&!a._dp||m&&m.smoothChildTiming)&&(a._start+=f/a._ts,a._time-=f,a._tTime-=f),a.shiftChildren(-f,!1,-1/0),l=0),o._end>r&&o._ts&&(r=o._end),o=u;At(a,a===te&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(i){if(te._ts&&(fr(te,gn(i,te)),or=Ee.frame),Ee.frame>=Oi){Oi+=Pe.autoSleep||120;var r=te._first;if((!r||!r._ts)&&Pe.autoSleep&&Ee._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Ee.sleep()}}},t}(Jt);Re(_e.prototype,{_lock:0,_hasPause:0,_forcing:0});var gs=function(t,e,n,i,r,a,o){var l=new we(this._pt,t,e,0,1,Rr,null,r),u=0,f=0,m,g,p,v,c,_,y,w;for(l.b=n,l.e=i,n+="",i+="",(y=~i.indexOf("random("))&&(i=Kt(i)),a&&(w=[n,i],a(w,t,e),n=w[0],i=w[1]),g=n.match(Pn)||[];m=Pn.exec(i);)v=m[0],c=i.substring(u,m.index),p?p=(p+1)%5:c.substr(-5)==="rgba("&&(p=1),v!==g[f++]&&(_=parseFloat(g[f-1])||0,l._pt={_next:l._pt,p:c||f===1?c:",",s:_,c:v.charAt(1)==="="?kt(_,v)-_:parseFloat(v)-_,m:p&&p<4?Math.round:0},u=Pn.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=o,(nr.test(i)||y)&&(l.e=0),this._pt=l,l},mi=function(t,e,n,i,r,a,o,l,u,f){ie(i)&&(i=i(r||0,t,a));var m=t[e],g=n!=="get"?n:ie(m)?u?t[e.indexOf("set")||!ie(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():m,p=ie(m)?u?bs:Lr:_i,v;if(le(i)&&(~i.indexOf("random(")&&(i=Kt(i)),i.charAt(1)==="="&&(v=kt(g,i)+(he(g)||0),(v||v===0)&&(i=v))),!f||g!==i||ei)return!isNaN(g*i)&&i!==""?(v=new we(this._pt,t,e,+g||0,i-(g||0),typeof m=="boolean"?Cs:Nr,0,p),u&&(v.fp=u),o&&v.modifier(o,this,t),this._pt=v):(!m&&!(e in t)&&ci(e,i),gs.call(this,t,e,g,i,p,l||Pe.stringFilter,u))},_s=function(t,e,n,i,r){if(ie(t)&&(t=Gt(t,r,e,n,i)),!je(t)||t.style&&t.nodeType||me(t)||er(t))return le(t)?Gt(t,r,e,n,i):t;var a={},o;for(o in t)a[o]=Gt(t[o],r,e,n,i);return a},Fr=function(t,e,n,i,r,a){var o,l,u,f;if(Te[t]&&(o=new Te[t]).init(r,o.rawVars?e[t]:_s(e[t],i,r,a,n),n,i,a)!==!1&&(n._pt=l=new we(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==St))for(u=n._ptLookup[n._targets.indexOf(r)],f=o._props.length;f--;)u[o._props[f]]=l;return o},et,ei,gi=function s(t,e,n){var i=t.vars,r=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,u=i.onUpdate,f=i.runBackwards,m=i.yoyoEase,g=i.keyframes,p=i.autoRevert,v=t._dur,c=t._startAt,_=t._targets,y=t.parent,w=y&&y.data==="nested"?y.vars.targets:_,b=t._overwrite==="auto"&&!oi,C=t.timeline,S,D,E,I,T,B,Y,P,A,z,W,k,O;if(C&&(!g||!r)&&(r="none"),t._ease=gt(r,Ft.ease),t._yEase=m?Tr(gt(m===!0?r:m,Ft.ease)):0,m&&t._yoyo&&!t._repeat&&(m=t._yEase,t._yEase=t._ease,t._ease=m),t._from=!C&&!!i.runBackwards,!C||g&&!i.stagger){if(P=_[0]?pt(_[0]).harness:0,k=P&&i[P.prop],S=mn(i,di),c&&(c._zTime<0&&c.progress(1),e<0&&f&&o&&!p?c.render(-1,!0):c.revert(f&&v?un:Ua),c._lazy=0),a){if(at(t._startAt=ae.set(_,Re({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!c&&xe(l),startAt:null,delay:0,onUpdate:u&&function(){return Ie(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(pe||!o&&!p)&&t._startAt.revert(un),o&&v&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(f&&v&&!c){if(e&&(o=!1),E=Re({overwrite:!1,data:"isFromStart",lazy:o&&!c&&xe(l),immediateRender:o,stagger:0,parent:y},S),k&&(E[P.prop]=k),at(t._startAt=ae.set(_,E)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(pe?t._startAt.revert(un):t._startAt.render(-1,!0)),t._zTime=e,!o)s(t._startAt,J,J);else if(!e)return}for(t._pt=t._ptCache=0,l=v&&xe(l)||l&&!v,D=0;D<_.length;D++){if(T=_[D],Y=T._gsap||pi(_)[D]._gsap,t._ptLookup[D]=z={},Xn[Y.id]&&it.length&&pn(),W=w===_?D:w.indexOf(T),P&&(A=new P).init(T,k||S,t,W,w)!==!1&&(t._pt=I=new we(t._pt,T,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function($){z[$]=I}),A.priority&&(B=1)),!P||k)for(E in S)Te[E]&&(A=Fr(E,S,t,W,T,w))?A.priority&&(B=1):z[E]=I=mi.call(t,T,E,"get",S[E],W,w,0,i.stringFilter);t._op&&t._op[D]&&t.kill(T,t._op[D]),b&&t._pt&&(et=t,te.killTweensOf(T,z,t.globalTime(e)),O=!t.parent,et=0),t._pt&&l&&(Xn[Y.id]=1)}B&&$r(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!O,g&&e<=0&&C.render(Le,!0,!0)},vs=function(t,e,n,i,r,a,o,l){var u=(t._pt&&t._ptCache||(t._ptCache={}))[e],f,m,g,p;if(!u)for(u=t._ptCache[e]=[],g=t._ptLookup,p=t._targets.length;p--;){if(f=g[p][e],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==e&&f.fp!==e;)f=f._next;if(!f)return ei=1,t.vars[e]="+=0",gi(t,o),ei=0,l?Xt(e+" not eligible for reset"):1;u.push(f)}for(p=u.length;p--;)m=u[p],f=m._pt||m,f.s=(i||i===0)&&!r?i:f.s+(i||0)+a*f.c,f.c=n-f.s,m.e&&(m.e=re(n)+he(m.e)),m.b&&(m.b=f.s+he(m.b))},ys=function(t,e){var n=t[0]?pt(t[0]).harness:0,i=n&&n.aliases,r,a,o,l;if(!i)return e;r=vt({},e);for(a in i)if(a in r)for(l=i[a].split(","),o=l.length;o--;)r[l[o]]=r[a];return r},xs=function(t,e,n,i){var r=e.ease||i||"power1.inOut",a,o;if(me(e))o=n[t]||(n[t]=[]),e.forEach(function(l,u){return o.push({t:u/(e.length-1)*100,v:l,e:r})});else for(a in e)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:e[a],e:r})},Gt=function(t,e,n,i,r){return ie(t)?t.call(e,n,i,r):le(t)&&~t.indexOf("random(")?Kt(t):t},Or=hi+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ar={};be(Or+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return Ar[s]=1});var ae=function(s){Ji(t,s);function t(n,i,r,a){var o;typeof i=="number"&&(r.duration=i,i=r,r=null),o=s.call(this,a?i:jt(i))||this;var l=o.vars,u=l.duration,f=l.delay,m=l.immediateRender,g=l.stagger,p=l.overwrite,v=l.keyframes,c=l.defaults,_=l.scrollTrigger,y=l.yoyoEase,w=i.parent||te,b=(me(n)||er(n)?Xe(n[0]):"length"in i)?[n]:Ne(n),C,S,D,E,I,T,B,Y;if(o._targets=b.length?pi(b):Xt("GSAP target "+n+" not found. https://gsap.com",!Pe.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,v||g||on(u)||on(f)){if(i=o.vars,C=o.timeline=new _e({data:"nested",defaults:c||{},targets:w&&w.data==="nested"?w.vars.targets:b}),C.kill(),C.parent=C._dp=Ge(o),C._start=0,g||on(u)||on(f)){if(E=b.length,B=g&&vr(g),je(g))for(I in g)~Or.indexOf(I)&&(Y||(Y={}),Y[I]=g[I]);for(S=0;S<E;S++)D=mn(i,Ar),D.stagger=0,y&&(D.yoyoEase=y),Y&&vt(D,Y),T=b[S],D.duration=+Gt(u,Ge(o),S,T,b),D.delay=(+Gt(f,Ge(o),S,T,b)||0)-o._delay,!g&&E===1&&D.delay&&(o._delay=f=D.delay,o._start+=f,D.delay=0),C.to(T,D,B?B(S,T,b):0),C._ease=X.none;C.duration()?u=f=0:o.timeline=0}else if(v){jt(Re(C.vars.defaults,{ease:"none"})),C._ease=gt(v.ease||i.ease||"none");var P=0,A,z,W;if(me(v))v.forEach(function(k){return C.to(b,k,">")}),C.duration();else{D={};for(I in v)I==="ease"||I==="easeEach"||xs(I,v[I],D,v.easeEach);for(I in D)for(A=D[I].sort(function(k,O){return k.t-O.t}),P=0,S=0;S<A.length;S++)z=A[S],W={ease:z.e,duration:(z.t-(S?A[S-1].t:0))/100*u},W[I]=z.v,C.to(b,W,P),P+=W.duration;C.duration()<u&&C.to({},{duration:u-C.duration()})}}u||o.duration(u=C.duration())}else o.timeline=0;return p===!0&&!oi&&(et=Ge(o),te.killTweensOf(b),et=0),ze(w,Ge(o),r),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(m||!u&&!v&&o._start===oe(w._time)&&xe(m)&&Qa(Ge(o))&&w.data!=="nested")&&(o._tTime=-J,o.render(Math.max(0,-f)||0)),_&&pr(Ge(o),_),o}var e=t.prototype;return e.render=function(i,r,a){var o=this._time,l=this._tDur,u=this._dur,f=i<0,m=i>l-J&&!f?l:i<J?0:i,g,p,v,c,_,y,w,b,C;if(!u)Za(this,i,r,a);else if(m!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(g=m,b=this.timeline,this._repeat){if(c=u+this._rDelay,this._repeat<-1&&f)return this.totalTime(c*100+i,r,a);if(g=oe(m%c),m===l?(v=this._repeat,g=u):(v=~~(m/c),v&&v===oe(m/c)&&(g=u,v--),g>u&&(g=u)),y=this._yoyo&&v&1,y&&(C=this._yEase,g=u-g),_=Ot(this._tTime,c),g===o&&!a&&this._initted&&v===_)return this._tTime=m,this;v!==_&&(b&&this._yEase&&Er(b,y),this.vars.repeatRefresh&&!y&&!this._lock&&this._time!==c&&this._initted&&(this._lock=a=1,this.render(oe(c*v),!0).invalidate()._lock=0))}if(!this._initted){if(mr(this,f?i:g,a,r,m))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&v!==_))return this;if(u!==this._dur)return this.render(i,r,a)}if(this._tTime=m,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(C||this._ease)(g/u),this._from&&(this.ratio=w=1-w),g&&!o&&!r&&!v&&(Ie(this,"onStart"),this._tTime!==m))return this;for(p=this._pt;p;)p.r(w,p.d),p=p._next;b&&b.render(i<0?i:b._dur*b._ease(g/this._dur),r,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(f&&qn(this,i,r,a),Ie(this,"onUpdate")),this._repeat&&v!==_&&this.vars.onRepeat&&!r&&this.parent&&Ie(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(f&&!this._onUpdate&&qn(this,i,!0,!0),(i||!u)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&at(this,1),!r&&!(f&&!o)&&(m||o||y)&&(Ie(this,m===l?"onComplete":"onReverseComplete",!0),this._prom&&!(m<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),s.prototype.invalidate.call(this,i)},e.resetTo=function(i,r,a,o,l){Qt||Ee.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||gi(this,u),f=this._ease(u/this._dur),vs(this,i,r,a,o,f,u,l)?this.resetTo(i,r,a,o,1):(Mn(this,0),this.parent||dr(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Ht(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,et&&et.vars.overwrite!==!0)._first||Ht(this),this.parent&&a!==this.timeline.totalDuration()&&At(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Ne(i):o,u=this._ptLookup,f=this._pt,m,g,p,v,c,_,y;if((!r||r==="all")&&qa(o,l))return r==="all"&&(this._pt=0),Ht(this);for(m=this._op=this._op||[],r!=="all"&&(le(r)&&(c={},be(r,function(w){return c[w]=1}),r=c),r=ys(o,r)),y=o.length;y--;)if(~l.indexOf(o[y])){g=u[y],r==="all"?(m[y]=r,v=g,p={}):(p=m[y]=m[y]||{},v=r);for(c in v)_=g&&g[c],_&&((!("kill"in _.d)||_.d.kill(c)===!0)&&wn(this,_,"_pt"),delete g[c]),p!=="all"&&(p[c]=1)}return this._initted&&!this._pt&&f&&Ht(this),this},t.to=function(i,r){return new t(i,r,arguments[2])},t.from=function(i,r){return Ut(1,arguments)},t.delayedCall=function(i,r,a,o){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(i,r,a){return Ut(2,arguments)},t.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(i,r)},t.killTweensOf=function(i,r,a){return te.killTweensOf(i,r,a)},t}(Jt);Re(ae.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});be("staggerTo,staggerFrom,staggerFromTo",function(s){ae[s]=function(){var t=new _e,e=Qn.call(arguments,0);return e.splice(s==="staggerFromTo"?5:4,0,0),t[s].apply(t,e)}});var _i=function(t,e,n){return t[e]=n},Lr=function(t,e,n){return t[e](n)},bs=function(t,e,n,i){return t[e](i.fp,n)},ws=function(t,e,n){return t.setAttribute(e,n)},vi=function(t,e){return ie(t[e])?Lr:li(t[e])&&t.setAttribute?ws:_i},Nr=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Cs=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Rr=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(t===1&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},yi=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Ms=function(t,e,n,i){for(var r=this._pt,a;r;)a=r._next,r.p===i&&r.modifier(t,e,n),r=a},Ds=function(t){for(var e=this._pt,n,i;e;)i=e._next,e.p===t&&!e.op||e.op===t?wn(this,e,"_pt"):e.dep||(n=1),e=i;return!n},Ss=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},$r=function(t){for(var e=t._pt,n,i,r,a;e;){for(n=e._next,i=r;i&&i.pr>e.pr;)i=i._next;(e._prev=i?i._prev:a)?e._prev._next=e:r=e,(e._next=i)?i._prev=e:a=e,e=n}t._pt=r},we=function(){function s(e,n,i,r,a,o,l,u,f){this.t=n,this.s=r,this.c=a,this.p=i,this.r=o||Nr,this.d=l||this,this.set=u||_i,this.pr=f||0,this._next=e,e&&(e._prev=this)}var t=s.prototype;return t.modifier=function(n,i,r){this.mSet=this.mSet||this.set,this.set=Ss,this.m=n,this.mt=r,this.tween=i},s}();be(hi+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return di[s]=1});Fe.TweenMax=Fe.TweenLite=ae;Fe.TimelineLite=Fe.TimelineMax=_e;te=new _e({sortChildren:!1,defaults:Ft,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pe.stringFilter=kr;var _t=[],dn={},ks=[],Bi=0,Ts=0,Nn=function(t){return(dn[t]||ks).map(function(e){return e()})},ti=function(){var t=Date.now(),e=[];t-Bi>2&&(Nn("matchMediaInit"),_t.forEach(function(n){var i=n.queries,r=n.conditions,a,o,l,u;for(o in i)a=Ye.matchMedia(i[o]).matches,a&&(l=1),a!==r[o]&&(r[o]=a,u=1);u&&(n.revert(),l&&e.push(n))}),Nn("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),Bi=t,Nn("matchMedia"))},Br=function(){function s(e,n){this.selector=n&&Jn(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Ts++,e&&this.add(e)}var t=s.prototype;return t.add=function(n,i,r){ie(n)&&(r=i,i=n,n=ie);var a=this,o=function(){var u=Z,f=a.selector,m;return u&&u!==a&&u.data.push(a),r&&(a.selector=Jn(r)),Z=a,m=i.apply(a,arguments),ie(m)&&a._r.push(m),Z=u,a.selector=f,a.isReverted=!1,m};return a.last=o,n===ie?o(a,function(l){return a.add(null,l)}):n?a[n]=o:o},t.ignore=function(n){var i=Z;Z=null,n(this),Z=i},t.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof s?n.push.apply(n,i.getTweens()):i instanceof ae&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,i){var r=this;if(n?function(){for(var o=r.getTweens(),l=r.data.length,u;l--;)u=r.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(f){return o.splice(o.indexOf(f),1)}));for(o.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,m){return m.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),l=r.data.length;l--;)u=r.data[l],u instanceof _e?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof ae)&&u.revert&&u.revert(n);r._r.forEach(function(f){return f(n,r)}),r.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=_t.length;a--;)_t[a].id===this.id&&_t.splice(a,1)},t.revert=function(n){this.kill(n||{})},s}(),Es=function(){function s(e){this.contexts=[],this.scope=e,Z&&Z.data.push(this)}var t=s.prototype;return t.add=function(n,i,r){je(n)||(n={matches:n});var a=new Br(0,r||this.scope),o=a.conditions={},l,u,f;Z&&!a.selector&&(a.selector=Z.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(u in n)u==="all"?f=1:(l=Ye.matchMedia(n[u]),l&&(_t.indexOf(a)<0&&_t.push(a),(o[u]=l.matches)&&(f=1),l.addListener?l.addListener(ti):l.addEventListener("change",ti)));return f&&i(a,function(m){return a.add(null,m)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},s}(),_n={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(i){return Mr(i)})},timeline:function(t){return new _e(t)},getTweensOf:function(t,e){return te.getTweensOf(t,e)},getProperty:function(t,e,n,i){le(t)&&(t=Ne(t)[0]);var r=pt(t||{}).get,a=n?cr:ur;return n==="native"&&(n=""),t&&(e?a((Te[e]&&Te[e].get||r)(t,e,n,i)):function(o,l,u){return a((Te[o]&&Te[o].get||r)(t,o,l,u))})},quickSetter:function(t,e,n){if(t=Ne(t),t.length>1){var i=t.map(function(f){return Me.quickSetter(f,e,n)}),r=i.length;return function(f){for(var m=r;m--;)i[m](f)}}t=t[0]||{};var a=Te[e],o=pt(t),l=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(f){var m=new a;St._pt=0,m.init(t,n?f+n:f,St,0,[t]),m.render(1,m),St._pt&&yi(1,St)}:o.set(t,l);return a?u:function(f){return u(t,l,n?f+n:f,o,1)}},quickTo:function(t,e,n){var i,r=Me.to(t,vt((i={},i[e]="+=0.1",i.paused=!0,i),n||{})),a=function(l,u,f){return r.resetTo(e,l,u,f)};return a.tween=r,a},isTweening:function(t){return te.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=gt(t.ease,Ft.ease)),Ai(Ft,t||{})},config:function(t){return Ai(Pe,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!Te[o]&&!Fe[o]&&Xt(e+" effect requires "+o+" plugin.")}),Fn[e]=function(o,l,u){return n(Ne(o),Re(l||{},r),u)},a&&(_e.prototype[e]=function(o,l,u){return this.add(Fn[e](o,je(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,e){X[t]=gt(e)},parseEase:function(t,e){return arguments.length?gt(t,e):X},getById:function(t){return te.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new _e(t),i,r;for(n.smoothChildTiming=xe(t.smoothChildTiming),te.remove(n),n._dp=0,n._time=n._tTime=te._time,i=te._first;i;)r=i._next,(e||!(!i._dur&&i instanceof ae&&i.vars.onComplete===i._targets[0]))&&ze(n,i,i._start-i._delay),i=r;return ze(te,n,0),n},context:function(t,e){return t?new Br(t,e):Z},matchMedia:function(t){return new Es(t)},matchMediaRefresh:function(){return _t.forEach(function(t){var e=t.conditions,n,i;for(i in e)e[i]&&(e[i]=!1,n=1);n&&t.revert()})||ti()},addEventListener:function(t,e){var n=dn[t]||(dn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=dn[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:os,wrapYoyo:ls,distribute:vr,random:xr,snap:yr,normalize:ss,getUnit:he,clamp:ns,splitColor:Dr,toArray:Ne,selector:Jn,mapRange:wr,pipe:rs,unitize:as,interpolate:fs,shuffle:_r},install:ar,effects:Fn,ticker:Ee,updateRoot:_e.updateRoot,plugins:Te,globalTimeline:te,core:{PropTween:we,globals:sr,Tween:ae,Timeline:_e,Animation:Jt,getCache:pt,_removeLinkedListItem:wn,reverting:function(){return pe},context:function(t){return t&&Z&&(Z.data.push(t),t._ctx=Z),Z},suppressOverwrites:function(t){return oi=t}}};be("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return _n[s]=ae[s]});Ee.add(_e.updateRoot);St=_n.to({},{duration:0});var Is=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Ps=function(t,e){var n=t._targets,i,r,a;for(i in e)for(r=n.length;r--;)a=t._ptLookup[r][i],a&&(a=a.d)&&(a._pt&&(a=Is(a,i)),a&&a.modifier&&a.modifier(e[i],t,n[r],i))},Rn=function(t,e){return{name:t,rawVars:1,init:function(i,r,a){a._onInit=function(o){var l,u;if(le(r)&&(l={},be(r,function(f){return l[f]=1}),r=l),e){l={};for(u in r)l[u]=e(r[u]);r=l}Ps(o,r)}}}},Me=_n.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,o,l;this.tween=n;for(a in e)l=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(l||0)+"",e[a],i,r,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(t,e){for(var n=e._pt;n;)pe?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Rn("roundProps",Zn),Rn("modifiers"),Rn("snap",yr))||_n;ae.version=_e.version=Me.version="3.12.5";rr=1;fi()&&Lt();X.Power0;X.Power1;X.Power2;X.Power3;X.Power4;X.Linear;X.Quad;X.Cubic;X.Quart;X.Quint;X.Strong;X.Elastic;X.Back;X.SteppedEase;X.Bounce;X.Sine;X.Expo;X.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Yi,tt,Tt,xi,ht,zi,bi,Fs=function(){return typeof window<"u"},qe={},ct=180/Math.PI,Et=Math.PI/180,Ct=Math.atan2,Hi=1e8,wi=/([A-Z])/g,Os=/(left|right|width|margin|padding|x)/i,As=/[\s,\(]\S/,He={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ni=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Ls=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Ns=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Rs=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Yr=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},zr=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},$s=function(t,e,n){return t.style[e]=n},Bs=function(t,e,n){return t.style.setProperty(e,n)},Ys=function(t,e,n){return t._gsap[e]=n},zs=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Hs=function(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},Vs=function(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)},ne="transform",Ce=ne+"Origin",js=function s(t,e){var n=this,i=this.target,r=i.style,a=i._gsap;if(t in qe&&r){if(this.tfm=this.tfm||{},t!=="transform")t=He[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return n.tfm[o]=We(i,o)}):this.tfm[t]=a.x?a[t]:We(i,t),t===Ce&&(this.tfm.zOrigin=a.zOrigin);else return He.transform.split(",").forEach(function(o){return s.call(n,o,e)});if(this.props.indexOf(ne)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ce,e,"")),t=ne}(r||e)&&this.props.push(t,e,r[t])},Hr=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Us=function(){var t=this.props,e=this.target,n=e.style,i=e._gsap,r,a;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?n[t[r]]=t[r+2]:n.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(wi,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=bi(),(!r||!r.isStart)&&!n[ne]&&(Hr(n),i.zOrigin&&n[Ce]&&(n[Ce]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Vr=function(t,e){var n={target:t,props:[],revert:Us,save:js};return t._gsap||Me.core.getCache(t),e&&e.split(",").forEach(function(i){return n.save(i)}),n},jr,ii=function(t,e){var n=tt.createElementNS?tt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):tt.createElement(t);return n&&n.style?n:tt.createElement(t)},Ve=function s(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(wi,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&s(t,Nt(e)||e,1)||""},Vi="O,Moz,ms,Ms,Webkit".split(","),Nt=function(t,e,n){var i=e||ht,r=i.style,a=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(Vi[a]+t in r););return a<0?null:(a===3?"ms":a>=0?Vi[a]:"")+t},ri=function(){Fs()&&window.document&&(Yi=window,tt=Yi.document,Tt=tt.documentElement,ht=ii("div")||{style:{}},ii("div"),ne=Nt(ne),Ce=ne+"Origin",ht.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jr=!!Nt("perspective"),bi=Me.core.reverting,xi=1)},$n=function s(t){var e=ii("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,r=this.style.cssText,a;if(Tt.appendChild(e),e.appendChild(this),this.style.display="block",t)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=s}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),Tt.removeChild(e),this.style.cssText=r,a},ji=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Ur=function(t){var e;try{e=t.getBBox()}catch{e=$n.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===$n||(e=$n.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+ji(t,["x","cx","x1"])||0,y:+ji(t,["y","cy","y1"])||0,width:0,height:0}:e},Gr=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Ur(t))},yt=function(t,e){if(e){var n=t.style,i;e in qe&&e!==Ce&&(e=ne),n.removeProperty?(i=e.substr(0,2),(i==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(i==="--"?e:e.replace(wi,"-$1").toLowerCase())):n.removeAttribute(e)}},nt=function(t,e,n,i,r,a){var o=new we(t._pt,e,n,0,1,a?zr:Yr);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Ui={deg:1,rad:1,turn:1},Gs={grid:1,flex:1},st=function s(t,e,n,i){var r=parseFloat(n)||0,a=(n+"").trim().substr((r+"").length)||"px",o=ht.style,l=Os.test(e),u=t.tagName.toLowerCase()==="svg",f=(u?"client":"offset")+(l?"Width":"Height"),m=100,g=i==="px",p=i==="%",v,c,_,y;if(i===a||!r||Ui[i]||Ui[a])return r;if(a!=="px"&&!g&&(r=s(t,e,n,"px")),y=t.getCTM&&Gr(t),(p||a==="%")&&(qe[e]||~e.indexOf("adius")))return v=y?t.getBBox()[l?"width":"height"]:t[f],re(p?r/v*m:r/100*v);if(o[l?"width":"height"]=m+(g?a:i),c=~e.indexOf("adius")||i==="em"&&t.appendChild&&!u?t:t.parentNode,y&&(c=(t.ownerSVGElement||{}).parentNode),(!c||c===tt||!c.appendChild)&&(c=tt.body),_=c._gsap,_&&p&&_.width&&l&&_.time===Ee.time&&!_.uncache)return re(r/_.width*m);if(p&&(e==="height"||e==="width")){var w=t.style[e];t.style[e]=m+i,v=t[f],w?t.style[e]=w:yt(t,e)}else(p||a==="%")&&!Gs[Ve(c,"display")]&&(o.position=Ve(t,"position")),c===t&&(o.position="static"),c.appendChild(ht),v=ht[f],c.removeChild(ht),o.position="absolute";return l&&p&&(_=pt(c),_.time=Ee.time,_.width=c[f]),re(g?v*r/m:v&&r?m/v*r:0)},We=function(t,e,n,i){var r;return xi||ri(),e in He&&e!=="transform"&&(e=He[e],~e.indexOf(",")&&(e=e.split(",")[0])),qe[e]&&e!=="transform"?(r=en(t,i),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:yn(Ve(t,Ce))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=vn[e]&&vn[e](t,e,n)||Ve(t,e)||lr(t,e)||(e==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?st(t,e,r,n)+n:r},Ws=function(t,e,n,i){if(!n||n==="none"){var r=Nt(e,t,1),a=r&&Ve(t,r,1);a&&a!==n?(e=r,n=a):e==="borderColor"&&(n=Ve(t,"borderTopColor"))}var o=new we(this._pt,t.style,e,0,1,Rr),l=0,u=0,f,m,g,p,v,c,_,y,w,b,C,S;if(o.b=n,o.e=i,n+="",i+="",i==="auto"&&(c=t.style[e],t.style[e]=i,i=Ve(t,e)||i,c?t.style[e]=c:yt(t,e)),f=[n,i],kr(f),n=f[0],i=f[1],g=n.match(Dt)||[],S=i.match(Dt)||[],S.length){for(;m=Dt.exec(i);)_=m[0],w=i.substring(l,m.index),v?v=(v+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(v=1),_!==(c=g[u++]||"")&&(p=parseFloat(c)||0,C=c.substr((p+"").length),_.charAt(1)==="="&&(_=kt(p,_)+C),y=parseFloat(_),b=_.substr((y+"").length),l=Dt.lastIndex-b.length,b||(b=b||Pe.units[e]||C,l===i.length&&(i+=b,o.e+=b)),C!==b&&(p=st(t,e,c,b)||0),o._pt={_next:o._pt,p:w||u===1?w:",",s:p,c:y-p,m:v&&v<4||e==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=e==="display"&&i==="none"?zr:Yr;return nr.test(i)&&(o.e=0),this._pt=o,o},Gi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xs=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(t=n,n=i,i=t),e[0]=Gi[n]||n,e[1]=Gi[i]||i,e.join(" ")},qs=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,i=n.style,r=e.u,a=n._gsap,o,l,u;if(r==="all"||r===!0)i.cssText="",l=1;else for(r=r.split(","),u=r.length;--u>-1;)o=r[u],qe[o]&&(l=1,o=o==="transformOrigin"?Ce:ne),yt(n,o);l&&(yt(n,ne),a&&(a.svg&&n.removeAttribute("transform"),en(n,1),a.uncache=1,Hr(i)))}},vn={clearProps:function(t,e,n,i,r){if(r.data!=="isFromStart"){var a=t._pt=new we(t._pt,e,n,0,0,qs);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},Zt=[1,0,0,1,0,0],Wr={},Xr=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Wi=function(t){var e=Ve(t,ne);return Xr(e)?Zt:e.substr(7).match(tr).map(re)},Ci=function(t,e){var n=t._gsap||pt(t),i=t.style,r=Wi(t),a,o,l,u;return n.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Zt:r):(r===Zt&&!t.offsetParent&&t!==Tt&&!n.svg&&(l=i.display,i.display="block",a=t.parentNode,(!a||!t.offsetParent)&&(u=1,o=t.nextElementSibling,Tt.appendChild(t)),r=Wi(t),l?i.display=l:yt(t,"display"),u&&(o?a.insertBefore(t,o):a?a.appendChild(t):Tt.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},ai=function(t,e,n,i,r,a){var o=t._gsap,l=r||Ci(t,!0),u=o.xOrigin||0,f=o.yOrigin||0,m=o.xOffset||0,g=o.yOffset||0,p=l[0],v=l[1],c=l[2],_=l[3],y=l[4],w=l[5],b=e.split(" "),C=parseFloat(b[0])||0,S=parseFloat(b[1])||0,D,E,I,T;n?l!==Zt&&(E=p*_-v*c)&&(I=C*(_/E)+S*(-c/E)+(c*w-_*y)/E,T=C*(-v/E)+S*(p/E)-(p*w-v*y)/E,C=I,S=T):(D=Ur(t),C=D.x+(~b[0].indexOf("%")?C/100*D.width:C),S=D.y+(~(b[1]||b[0]).indexOf("%")?S/100*D.height:S)),i||i!==!1&&o.smooth?(y=C-u,w=S-f,o.xOffset=m+(y*p+w*c)-y,o.yOffset=g+(y*v+w*_)-w):o.xOffset=o.yOffset=0,o.xOrigin=C,o.yOrigin=S,o.smooth=!!i,o.origin=e,o.originIsAbsolute=!!n,t.style[Ce]="0px 0px",a&&(nt(a,o,"xOrigin",u,C),nt(a,o,"yOrigin",f,S),nt(a,o,"xOffset",m,o.xOffset),nt(a,o,"yOffset",g,o.yOffset)),t.setAttribute("data-svg-origin",C+" "+S)},en=function(t,e){var n=t._gsap||new Pr(t);if("x"in n&&!e&&!n.uncache)return n;var i=t.style,r=n.scaleX<0,a="px",o="deg",l=getComputedStyle(t),u=Ve(t,Ce)||"0",f,m,g,p,v,c,_,y,w,b,C,S,D,E,I,T,B,Y,P,A,z,W,k,O,$,U,H,fe,ue,lt,ve,ce;return f=m=g=c=_=y=w=b=C=0,p=v=1,n.svg=!!(t.getCTM&&Gr(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[ne]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ne]!=="none"?l[ne]:"")),i.scale=i.rotate=i.translate="none"),E=Ci(t,n.svg),n.svg&&(n.uncache?($=t.getBBox(),u=n.xOrigin-$.x+"px "+(n.yOrigin-$.y)+"px",O=""):O=!e&&t.getAttribute("data-svg-origin"),ai(t,O||u,!!O||n.originIsAbsolute,n.smooth!==!1,E)),S=n.xOrigin||0,D=n.yOrigin||0,E!==Zt&&(Y=E[0],P=E[1],A=E[2],z=E[3],f=W=E[4],m=k=E[5],E.length===6?(p=Math.sqrt(Y*Y+P*P),v=Math.sqrt(z*z+A*A),c=Y||P?Ct(P,Y)*ct:0,w=A||z?Ct(A,z)*ct+c:0,w&&(v*=Math.abs(Math.cos(w*Et))),n.svg&&(f-=S-(S*Y+D*A),m-=D-(S*P+D*z))):(ce=E[6],lt=E[7],H=E[8],fe=E[9],ue=E[10],ve=E[11],f=E[12],m=E[13],g=E[14],I=Ct(ce,ue),_=I*ct,I&&(T=Math.cos(-I),B=Math.sin(-I),O=W*T+H*B,$=k*T+fe*B,U=ce*T+ue*B,H=W*-B+H*T,fe=k*-B+fe*T,ue=ce*-B+ue*T,ve=lt*-B+ve*T,W=O,k=$,ce=U),I=Ct(-A,ue),y=I*ct,I&&(T=Math.cos(-I),B=Math.sin(-I),O=Y*T-H*B,$=P*T-fe*B,U=A*T-ue*B,ve=z*B+ve*T,Y=O,P=$,A=U),I=Ct(P,Y),c=I*ct,I&&(T=Math.cos(I),B=Math.sin(I),O=Y*T+P*B,$=W*T+k*B,P=P*T-Y*B,k=k*T-W*B,Y=O,W=$),_&&Math.abs(_)+Math.abs(c)>359.9&&(_=c=0,y=180-y),p=re(Math.sqrt(Y*Y+P*P+A*A)),v=re(Math.sqrt(k*k+ce*ce)),I=Ct(W,k),w=Math.abs(I)>2e-4?I*ct:0,C=ve?1/(ve<0?-ve:ve):0),n.svg&&(O=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Xr(Ve(t,ne)),O&&t.setAttribute("transform",O))),Math.abs(w)>90&&Math.abs(w)<270&&(r?(p*=-1,w+=c<=0?180:-180,c+=c<=0?180:-180):(v*=-1,w+=w<=0?180:-180)),e=e||n.uncache,n.x=f-((n.xPercent=f&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-f)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+a,n.y=m-((n.yPercent=m&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-m)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+a,n.z=g+a,n.scaleX=re(p),n.scaleY=re(v),n.rotation=re(c)+o,n.rotationX=re(_)+o,n.rotationY=re(y)+o,n.skewX=w+o,n.skewY=b+o,n.transformPerspective=C+a,(n.zOrigin=parseFloat(u.split(" ")[2])||!e&&n.zOrigin||0)&&(i[Ce]=yn(u)),n.xOffset=n.yOffset=0,n.force3D=Pe.force3D,n.renderTransform=n.svg?Qs:jr?qr:Ks,n.uncache=0,n},yn=function(t){return(t=t.split(" "))[0]+" "+t[1]},Bn=function(t,e,n){var i=he(e);return re(parseFloat(e)+parseFloat(st(t,"x",n+"px",i)))+i},Ks=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,qr(t,e)},ft="0deg",zt="0px",ut=") ",qr=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,o=n.y,l=n.z,u=n.rotation,f=n.rotationY,m=n.rotationX,g=n.skewX,p=n.skewY,v=n.scaleX,c=n.scaleY,_=n.transformPerspective,y=n.force3D,w=n.target,b=n.zOrigin,C="",S=y==="auto"&&t&&t!==1||y===!0;if(b&&(m!==ft||f!==ft)){var D=parseFloat(f)*Et,E=Math.sin(D),I=Math.cos(D),T;D=parseFloat(m)*Et,T=Math.cos(D),a=Bn(w,a,E*T*-b),o=Bn(w,o,-Math.sin(D)*-b),l=Bn(w,l,I*T*-b+b)}_!==zt&&(C+="perspective("+_+ut),(i||r)&&(C+="translate("+i+"%, "+r+"%) "),(S||a!==zt||o!==zt||l!==zt)&&(C+=l!==zt||S?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+ut),u!==ft&&(C+="rotate("+u+ut),f!==ft&&(C+="rotateY("+f+ut),m!==ft&&(C+="rotateX("+m+ut),(g!==ft||p!==ft)&&(C+="skew("+g+", "+p+ut),(v!==1||c!==1)&&(C+="scale("+v+", "+c+ut),w.style[ne]=C||"translate(0, 0)"},Qs=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,o=n.y,l=n.rotation,u=n.skewX,f=n.skewY,m=n.scaleX,g=n.scaleY,p=n.target,v=n.xOrigin,c=n.yOrigin,_=n.xOffset,y=n.yOffset,w=n.forceCSS,b=parseFloat(a),C=parseFloat(o),S,D,E,I,T;l=parseFloat(l),u=parseFloat(u),f=parseFloat(f),f&&(f=parseFloat(f),u+=f,l+=f),l||u?(l*=Et,u*=Et,S=Math.cos(l)*m,D=Math.sin(l)*m,E=Math.sin(l-u)*-g,I=Math.cos(l-u)*g,u&&(f*=Et,T=Math.tan(u-f),T=Math.sqrt(1+T*T),E*=T,I*=T,f&&(T=Math.tan(f),T=Math.sqrt(1+T*T),S*=T,D*=T)),S=re(S),D=re(D),E=re(E),I=re(I)):(S=m,I=g,D=E=0),(b&&!~(a+"").indexOf("px")||C&&!~(o+"").indexOf("px"))&&(b=st(p,"x",a,"px"),C=st(p,"y",o,"px")),(v||c||_||y)&&(b=re(b+v-(v*S+c*E)+_),C=re(C+c-(v*D+c*I)+y)),(i||r)&&(T=p.getBBox(),b=re(b+i/100*T.width),C=re(C+r/100*T.height)),T="matrix("+S+","+D+","+E+","+I+","+b+","+C+")",p.setAttribute("transform",T),w&&(p.style[ne]=T)},Js=function(t,e,n,i,r){var a=360,o=le(r),l=parseFloat(r)*(o&&~r.indexOf("rad")?ct:1),u=l-i,f=i+u+"deg",m,g;return o&&(m=r.split("_")[1],m==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),m==="cw"&&u<0?u=(u+a*Hi)%a-~~(u/a)*a:m==="ccw"&&u>0&&(u=(u-a*Hi)%a-~~(u/a)*a)),t._pt=g=new we(t._pt,e,n,i,u,Ls),g.e=f,g.u="deg",t._props.push(n),g},Xi=function(t,e){for(var n in e)t[n]=e[n];return t},Zs=function(t,e,n){var i=Xi({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,u,f,m,g,p,v;i.svg?(u=n.getAttribute("transform"),n.setAttribute("transform",""),a[ne]=e,o=en(n,1),yt(n,ne),n.setAttribute("transform",u)):(u=getComputedStyle(n)[ne],a[ne]=e,o=en(n,1),a[ne]=u);for(l in qe)u=i[l],f=o[l],u!==f&&r.indexOf(l)<0&&(p=he(u),v=he(f),m=p!==v?st(n,l,u,v):parseFloat(u),g=parseFloat(f),t._pt=new we(t._pt,o,l,m,g-m,ni),t._pt.u=v||0,t._props.push(l));Xi(o,i)};be("padding,margin,Width,Radius",function(s,t){var e="Top",n="Right",i="Bottom",r="Left",a=(t<3?[e,n,i,r]:[e+r,e+n,i+n,i+r]).map(function(o){return t<2?s+o:"border"+o+s});vn[t>1?"border"+s:s]=function(o,l,u,f,m){var g,p;if(arguments.length<4)return g=a.map(function(v){return We(o,v,u)}),p=g.join(" "),p.split(g[0]).length===5?g[0]:p;g=(f+"").split(" "),p={},a.forEach(function(v,c){return p[v]=g[c]=g[c]||g[(c-1)/2|0]}),o.init(l,p,m)}});var Kr={name:"css",register:ri,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a=this._props,o=t.style,l=n.vars.startAt,u,f,m,g,p,v,c,_,y,w,b,C,S,D,E,I;xi||ri(),this.styles=this.styles||Vr(t),I=this.styles.props,this.tween=n;for(c in e)if(c!=="autoRound"&&(f=e[c],!(Te[c]&&Fr(c,e,n,i,t,r)))){if(p=typeof f,v=vn[c],p==="function"&&(f=f.call(n,i,t,r),p=typeof f),p==="string"&&~f.indexOf("random(")&&(f=Kt(f)),v)v(this,t,c,f,n)&&(E=1);else if(c.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(c)+"").trim(),f+="",rt.lastIndex=0,rt.test(u)||(_=he(u),y=he(f)),y?_!==y&&(u=st(t,c,u,y)+y):_&&(f+=_),this.add(o,"setProperty",u,f,i,r,0,0,c),a.push(c),I.push(c,0,o[c]);else if(p!=="undefined"){if(l&&c in l?(u=typeof l[c]=="function"?l[c].call(n,i,t,r):l[c],le(u)&&~u.indexOf("random(")&&(u=Kt(u)),he(u+"")||u==="auto"||(u+=Pe.units[c]||he(We(t,c))||""),(u+"").charAt(1)==="="&&(u=We(t,c))):u=We(t,c),g=parseFloat(u),w=p==="string"&&f.charAt(1)==="="&&f.substr(0,2),w&&(f=f.substr(2)),m=parseFloat(f),c in He&&(c==="autoAlpha"&&(g===1&&We(t,"visibility")==="hidden"&&m&&(g=0),I.push("visibility",0,o.visibility),nt(this,o,"visibility",g?"inherit":"hidden",m?"inherit":"hidden",!m)),c!=="scale"&&c!=="transform"&&(c=He[c],~c.indexOf(",")&&(c=c.split(",")[0]))),b=c in qe,b){if(this.styles.save(c),C||(S=t._gsap,S.renderTransform&&!e.parseTransform||en(t,e.parseTransform),D=e.smoothOrigin!==!1&&S.smooth,C=this._pt=new we(this._pt,o,ne,0,1,S.renderTransform,S,0,-1),C.dep=1),c==="scale")this._pt=new we(this._pt,S,"scaleY",S.scaleY,(w?kt(S.scaleY,w+m):m)-S.scaleY||0,ni),this._pt.u=0,a.push("scaleY",c),c+="X";else if(c==="transformOrigin"){I.push(Ce,0,o[Ce]),f=Xs(f),S.svg?ai(t,f,0,D,0,this):(y=parseFloat(f.split(" ")[2])||0,y!==S.zOrigin&&nt(this,S,"zOrigin",S.zOrigin,y),nt(this,o,c,yn(u),yn(f)));continue}else if(c==="svgOrigin"){ai(t,f,1,D,0,this);continue}else if(c in Wr){Js(this,S,c,g,w?kt(g,w+f):f);continue}else if(c==="smoothOrigin"){nt(this,S,"smooth",S.smooth,f);continue}else if(c==="force3D"){S[c]=f;continue}else if(c==="transform"){Zs(this,f,t);continue}}else c in o||(c=Nt(c)||c);if(b||(m||m===0)&&(g||g===0)&&!As.test(f)&&c in o)_=(u+"").substr((g+"").length),m||(m=0),y=he(f)||(c in Pe.units?Pe.units[c]:_),_!==y&&(g=st(t,c,u,y)),this._pt=new we(this._pt,b?S:o,c,g,(w?kt(g,w+m):m)-g,!b&&(y==="px"||c==="zIndex")&&e.autoRound!==!1?Rs:ni),this._pt.u=y||0,_!==y&&y!=="%"&&(this._pt.b=u,this._pt.r=Ns);else if(c in o)Ws.call(this,t,c,u,w?w+f:f);else if(c in t)this.add(t,c,u||t[c],w?w+f:f,i,r);else if(c!=="parseTransform"){ci(c,f);continue}b||(c in o?I.push(c,0,o[c]):I.push(c,1,u||t[c])),a.push(c)}}E&&$r(this)},render:function(t,e){if(e.tween._time||!bi())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:We,aliases:He,getSetter:function(t,e,n){var i=He[e];return i&&i.indexOf(",")<0&&(e=i),e in qe&&e!==Ce&&(t._gsap.x||We(t,"x"))?n&&zi===n?e==="scale"?zs:Ys:(zi=n||{})&&(e==="scale"?Hs:Vs):t.style&&!li(t.style[e])?$s:~e.indexOf("-")?Bs:vi(t,e)},core:{_removeProperty:yt,_getMatrix:Ci}};Me.utils.checkPrefix=Nt;Me.core.getStyleSaver=Vr;(function(s,t,e,n){var i=be(s+","+t+","+e,function(r){qe[r]=1});be(t,function(r){Pe.units[r]="deg",Wr[r]=1}),He[i[13]]=s+","+t,be(n,function(r){var a=r.split(":");He[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");be("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Pe.units[s]="px"});Me.registerPlugin(Kr);var Mt=Me.registerPlugin(Kr)||Me;Mt.core.Tween;const Ze=class Ze extends Pa{static getInstance(){return Ze.instance||(Ze.instance=new Ze),Ze.instance}constructor(){super(Ze.id),this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.renderer=this.experience.renderer,this.camera=this.experience.camera,this.mouse=this.experience.mouse,this.sizes=this.experience.sizes,this.resources=this.experience.resources,this.debug=this.experience.debug,this.params={color:new In("#F777A8"),size:1.7,minAlpha:.04,maxAlpha:.8,force:.7},this.currentModelName="mask",this.init()}init(){this.setupMask(),this.setupGPGPU(),this.setupDebug()}setupMask(){const t=this.currentModelName||"mask",e=this.resources.models[t];if(!e){console.error(`Model ${t} not found!`);return}let n=e.scene.children[0];n.geometry||e.scene.traverse(i=>{i.isMesh&&!n.geometry&&(n=i)}),this.model=n,this.keywordCloud||(this.keywordCloud=new Ba)}setupCameraPosition(){}setupGPGPU(){this.gpgpu=new Fa({size:1200,camera:this.camera,renderer:this.renderer.webglRenderer,mouse:this.mouse,scene:this.scene,sizes:this.sizes,model:this.model,debug:this.debug,audio:this.experience.audio,webcam:this.experience.webcam,params:this.params})}setupDebug(){if(this.debug.active){this.particlesFolder&&this.particlesFolder.destroy(),this.debug.gui.width=300,this.particlesFolder=this.debug.gui.addFolder("particles"),this.particlesFolder.addColor(this.params,"color").name("Color").onChange(()=>{this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms.uColor&&this.gpgpu.material.uniforms.uColor.value.copy(this.params.color)}),this.particlesFolder.add(this.gpgpu.material.uniforms.uParticleSize,"value").min(.1).max(10).step(.1).name("Size"),this.particlesFolder.add(this.gpgpu.uniforms.velocityUniforms.uForce,"value").min(0).max(1).step(.01).name("Force"),this.particlesFolder.add(this.params,"minAlpha").min(0).max(1).step(.01).name("Min Alpha").onChange(()=>{this.gpgpu.material.uniforms.uMinAlpha&&(this.gpgpu.material.uniforms.uMinAlpha.value=this.params.minAlpha)}),this.particlesFolder.add(this.params,"maxAlpha").min(0).max(1).step(.01).name("Max Alpha").onChange(()=>{this.gpgpu.material.uniforms.uMaxAlpha&&(this.gpgpu.material.uniforms.uMaxAlpha.value=this.params.maxAlpha)}),this.particlesFolder.add(this,"randomize");const t={mask:"mask",veneciaMask:"veneciaMask",samurai:"samurai",cyborg:"cyborg",subway:"subway"};this.particlesFolder.add({model:"mask"},"model",t).onChange(e=>this.changeModel(e))}}randomize(){this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms.uRandom&&(this.gpgpu.material.uniforms.uRandom.value=Math.random())}changeModel(t){this.currentModelName!==t&&(console.log(`[Mask] Switching to model: ${t}`),this.currentModelName=t,this.gpgpu&&(this.gpgpu.particles&&(this.scene.remove(this.gpgpu.particles),this.gpgpu.particles.geometry&&this.gpgpu.particles.geometry.dispose(),this.gpgpu.particles.material&&this.gpgpu.particles.material.dispose()),this.gpgpu=null),this.setupMask(),this.setupGPGPU())}updateVisualization(t){if(!t)return;this.currentData=t;const e=t.marketChangePercent||0,n=t.vix||20,i=t.fearGreedIndex||50,r=t.volumeRatio||1,a=t.tenYearYield||4;this.keywordCloud&&t.headlines&&this.keywordCloud.updateHeadlines(t.headlines);const o={0:{h:340,s:95,l:40,name:"Extreme Panic"},25:{h:260,s:60,l:40,name:"Fear"},45:{h:220,s:40,l:40,name:"Nervous"},55:{h:180,s:40,l:45,name:"Neutral"},75:{h:160,s:70,l:50,name:"Greed"},100:{h:50,s:95,l:60,name:"Euphoria"}},l=(H,fe,ue)=>({h:H.h+(fe.h-H.h)*ue,s:H.s+(fe.s-H.s)*ue,l:H.l+(fe.l-H.l)*ue});let u=0,f=100;const m=Object.keys(o).map(H=>parseInt(H)).sort((H,fe)=>H-fe);for(let H=0;H<m.length-1;H++)if(i>=m[H]&&i<=m[H+1]){u=m[H],f=m[H+1];break}const g=f-u,p=(i-u)/g,v=l(o[u],o[f],p);let c=v.h,_=v.s,y=v.l;const w=Math.max(0,a-4);w>0&&(c-=w*15);const b=(r-1)*20;_=Math.max(20,Math.min(100,_+b)),r>1.5&&(y+=5),c+=(t.day||1)%5*2,c=c%360,c<0&&(c+=360),_=Math.max(0,Math.min(100,_)),y=Math.max(0,Math.min(100,y));const C=new In(`hsl(${Math.round(c)}, ${Math.round(_)}%, ${Math.round(y)}%)`),S=r,D=.5+S*.8,E=t.intradayRange||1,I=Math.min(1,E/3),T=Math.abs(t.marketGap||0),B=Math.min(1,T/2);let Y=0;(n>28||e<-1.8)&&(Y=Math.min(1,(n-25)/20+Math.abs(e)/5),Y>.5&&C.lerp(new In(16711680),.3));const P=Y*.015,A=Y*.2,z=.2+(t.volatility||.4)*.8+S*.1+B*.3+Y*.5,k=.04+Math.min(1,Math.max(0,(a-3)/2))*.05,O=i/100;let U=1.5+Math.abs(e)*1.5+O*1;if(U+=Math.random()*I*1.5,Mt.to(this.params.color,{r:C.r,g:C.g,b:C.b,duration:2,ease:"power2.out",onUpdate:()=>{this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms.uColor&&this.gpgpu.material.uniforms.uColor.value.copy(this.params.color)}}),this.gpgpu&&this.gpgpu.material){Mt.to(this.gpgpu.material.uniforms.uForce,{value:z,duration:2.5});const H=I>.5?"elastic.out(1, 0.3)":"back.out(1.0)";Mt.to(this.gpgpu.material.uniforms.uParticleSize,{value:U,duration:2.5,ease:H}),Mt.to(this.params,{minAlpha:k,duration:2})}if(this.renderer&&this.renderer.postprocessing){const H=this.renderer.postprocessing;H.setGlitch(P),this.fxParams||(this.fxParams={bloom:1,shake:0}),Mt.to(this.fxParams,{bloom:D,shake:A,duration:2,onUpdate:()=>{H.setBloom(this.fxParams.bloom),this.camera&&(this.camera.shakeIntensity=this.fxParams.shake)}})}this.currentBaseSize=U}update(){if(this.gpgpu&&(this.gpgpu.compute(),this.currentData&&this.gpgpu.material&&this.gpgpu.uniforms.velocityUniforms)){const t=performance.now()*.001,e=this.currentData.vix||20;let n=1+e/10,i=.4;e>30&&(n=8,i=.2);const r=1+Math.sin(t*n)*i;this.gpgpu.material.uniforms.uParticleSize&&(this.gpgpu.material.uniforms.uParticleSize.value=(this.params.size||1.5)*r);const a=(Math.random()-.5)*(e/100);this.gpgpu.uniforms.velocityUniforms.uForce.value=(this.params.force||.5)+a}this.keywordCloud&&this.experience.time&&this.keywordCloud.update(this.experience.time.elapsed/1e3)}};Fi(Ze,"instance");let xn=Ze;var Yn=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],It={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(s){return typeof console<"u"&&console.warn(s)},getWeek:function(s){var t=new Date(s.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},tn={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(s){var t=s%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ye=function(s,t){return t===void 0&&(t=2),("000"+s).slice(t*-1)},Ae=function(s){return s===!0?1:0};function qi(s,t){var e;return function(){var n=this,i=arguments;clearTimeout(e),e=setTimeout(function(){return s.apply(n,i)},t)}}var zn=function(s){return s instanceof Array?s:[s]};function ge(s,t,e){if(e===!0)return s.classList.add(t);s.classList.remove(t)}function q(s,t,e){var n=window.document.createElement(s);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function ln(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Qr(s,t){if(t(s))return s;if(s.parentNode)return Qr(s.parentNode,t)}function fn(s,t){var e=q("div","numInputWrapper"),n=q("input","numInput "+s),i=q("span","arrowUp"),r=q("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var a in t)n.setAttribute(a,t[a]);return e.appendChild(n),e.appendChild(i),e.appendChild(r),e}function Se(s){try{if(typeof s.composedPath=="function"){var t=s.composedPath();return t[0]}return s.target}catch{return s.target}}var Hn=function(){},bn=function(s,t,e){return e.months[t?"shorthand":"longhand"][s]},eo={D:Hn,F:function(s,t,e){s.setMonth(e.months.longhand.indexOf(t))},G:function(s,t){s.setHours((s.getHours()>=12?12:0)+parseFloat(t))},H:function(s,t){s.setHours(parseFloat(t))},J:function(s,t){s.setDate(parseFloat(t))},K:function(s,t,e){s.setHours(s.getHours()%12+12*Ae(new RegExp(e.amPM[1],"i").test(t)))},M:function(s,t,e){s.setMonth(e.months.shorthand.indexOf(t))},S:function(s,t){s.setSeconds(parseFloat(t))},U:function(s,t){return new Date(parseFloat(t)*1e3)},W:function(s,t,e){var n=parseInt(t),i=new Date(s.getFullYear(),0,2+(n-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+e.firstDayOfWeek),i},Y:function(s,t){s.setFullYear(parseFloat(t))},Z:function(s,t){return new Date(t)},d:function(s,t){s.setDate(parseFloat(t))},h:function(s,t){s.setHours((s.getHours()>=12?12:0)+parseFloat(t))},i:function(s,t){s.setMinutes(parseFloat(t))},j:function(s,t){s.setDate(parseFloat(t))},l:Hn,m:function(s,t){s.setMonth(parseFloat(t)-1)},n:function(s,t){s.setMonth(parseFloat(t)-1)},s:function(s,t){s.setSeconds(parseFloat(t))},u:function(s,t){return new Date(parseFloat(t))},w:Hn,y:function(s,t){s.setFullYear(2e3+parseFloat(t))}},dt={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Wt={Z:function(s){return s.toISOString()},D:function(s,t,e){return t.weekdays.shorthand[Wt.w(s,t,e)]},F:function(s,t,e){return bn(Wt.n(s,t,e)-1,!1,t)},G:function(s,t,e){return ye(Wt.h(s,t,e))},H:function(s){return ye(s.getHours())},J:function(s,t){return t.ordinal!==void 0?s.getDate()+t.ordinal(s.getDate()):s.getDate()},K:function(s,t){return t.amPM[Ae(s.getHours()>11)]},M:function(s,t){return bn(s.getMonth(),!0,t)},S:function(s){return ye(s.getSeconds())},U:function(s){return s.getTime()/1e3},W:function(s,t,e){return e.getWeek(s)},Y:function(s){return ye(s.getFullYear(),4)},d:function(s){return ye(s.getDate())},h:function(s){return s.getHours()%12?s.getHours()%12:12},i:function(s){return ye(s.getMinutes())},j:function(s){return s.getDate()},l:function(s,t){return t.weekdays.longhand[s.getDay()]},m:function(s){return ye(s.getMonth()+1)},n:function(s){return s.getMonth()+1},s:function(s){return s.getSeconds()},u:function(s){return s.getTime()},w:function(s){return s.getDay()},y:function(s){return String(s.getFullYear()).substring(2)}},Jr=function(s){var t=s.config,e=t===void 0?It:t,n=s.l10n,i=n===void 0?tn:n,r=s.isMobile,a=r===void 0?!1:r;return function(o,l,u){var f=u||i;return e.formatDate!==void 0&&!a?e.formatDate(o,l,f):l.split("").map(function(m,g,p){return Wt[m]&&p[g-1]!=="\\"?Wt[m](o,f,e):m!=="\\"?m:""}).join("")}},si=function(s){var t=s.config,e=t===void 0?It:t,n=s.l10n,i=n===void 0?tn:n;return function(r,a,o,l){if(!(r!==0&&!r)){var u=l||i,f,m=r;if(r instanceof Date)f=new Date(r.getTime());else if(typeof r!="string"&&r.toFixed!==void 0)f=new Date(r);else if(typeof r=="string"){var g=a||(e||It).dateFormat,p=String(r).trim();if(p==="today")f=new Date,o=!0;else if(e&&e.parseDate)f=e.parseDate(r,g);else if(/Z$/.test(p)||/GMT$/.test(p))f=new Date(r);else{for(var v=void 0,c=[],_=0,y=0,w="";_<g.length;_++){var b=g[_],C=b==="\\",S=g[_-1]==="\\"||C;if(dt[b]&&!S){w+=dt[b];var D=new RegExp(w).exec(r);D&&(v=!0)&&c[b!=="Y"?"push":"unshift"]({fn:eo[b],val:D[++y]})}else C||(w+=".")}f=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),c.forEach(function(E){var I=E.fn,T=E.val;return f=I(f,T,u)||f}),f=v?f:void 0}}if(!(f instanceof Date&&!isNaN(f.getTime()))){e.errorHandler(new Error("Invalid date provided: "+m));return}return o===!0&&f.setHours(0,0,0,0),f}}};function ke(s,t,e){return e===void 0&&(e=!0),e!==!1?new Date(s.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):s.getTime()-t.getTime()}var to=function(s,t,e){return s>Math.min(t,e)&&s<Math.max(t,e)},Vn=function(s,t,e){return s*3600+t*60+e},no=function(s){var t=Math.floor(s/3600),e=(s-t*3600)/60;return[t,e,s-t*3600-e*60]},io={DAY:864e5};function jn(s){var t=s.defaultHour,e=s.defaultMinute,n=s.defaultSeconds;if(s.minDate!==void 0){var i=s.minDate.getHours(),r=s.minDate.getMinutes(),a=s.minDate.getSeconds();t<i&&(t=i),t===i&&e<r&&(e=r),t===i&&e===r&&n<a&&(n=s.minDate.getSeconds())}if(s.maxDate!==void 0){var o=s.maxDate.getHours(),l=s.maxDate.getMinutes();t=Math.min(t,o),t===o&&(e=Math.min(l,e)),t===o&&e===l&&(n=s.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!s)throw TypeError("Cannot convert undefined or null to object");for(var n=function(o){o&&Object.keys(o).forEach(function(l){return s[l]=o[l]})},i=0,r=t;i<r.length;i++){var a=r[i];n(a)}return s});var de=globalThis&&globalThis.__assign||function(){return de=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},de.apply(this,arguments)},Ki=globalThis&&globalThis.__spreadArrays||function(){for(var s=0,t=0,e=arguments.length;t<e;t++)s+=arguments[t].length;for(var n=Array(s),i=0,t=0;t<e;t++)for(var r=arguments[t],a=0,o=r.length;a<o;a++,i++)n[i]=r[a];return n},ro=300;function ao(s,t){var e={config:de(de({},It),se.defaultConfig),l10n:tn};e.parseDate=si({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=c,e._setHoursFromDate=g,e._positionCalendar=rn,e.changeMonth=fe,e.changeYear=Ke,e.clear=ue,e.close=lt,e.onMouseOver=Je,e._createElement=q,e.createDay=D,e.destroy=ve,e.isEnabled=$e,e.jumpToDate=w,e.updateValue=Ue,e.open=Zr,e.redraw=ki,e.set=ia,e.setDate=ra,e.toggle=la;function n(){e.utils={getDaysInMonth:function(d,h){return d===void 0&&(d=e.currentMonth),h===void 0&&(h=e.currentYear),d===1&&(h%4===0&&h%100!==0||h%400===0)?29:e.l10n.daysInMonth[d]}}}function i(){e.element=e.input=s,e.isOpen=!1,ea(),Si(),sa(),aa(),n(),e.isMobile||S(),y(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&g(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ue(!1)),o();var d=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&d&&rn(),ee("onReady")}function r(){var d;return((d=e.calendarContainer)===null||d===void 0?void 0:d.getRootNode()).activeElement||document.activeElement}function a(d){return d.bind(e)}function o(){var d=e.config;d.weekNumbers===!1&&d.showMonths===1||d.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var h=(e.days.offsetWidth+1)*d.showMonths;e.daysContainer.style.width=h+"px",e.calendarContainer.style.width=h+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(d){if(e.selectedDates.length===0){var h=e.config.minDate===void 0||ke(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),x=jn(e.config);h.setHours(x.hours,x.minutes,x.seconds,h.getMilliseconds()),e.selectedDates=[h],e.latestSelectedDateObj=h}d!==void 0&&d.type!=="blur"&&ca(d);var M=e._input.value;m(),Ue(),e._input.value!==M&&e._debouncedChange()}function u(d,h){return d%12+12*Ae(h===e.l10n.amPM[1])}function f(d){switch(d%24){case 0:case 12:return 12;default:return d%12}}function m(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var d=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,h=(parseInt(e.minuteElement.value,10)||0)%60,x=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(d=u(d,e.amPM.textContent));var M=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&ke(e.latestSelectedDateObj,e.config.minDate,!0)===0,F=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&ke(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var L=Vn(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),j=Vn(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),R=Vn(d,h,x);if(R>j&&R<L){var G=no(L);d=G[0],h=G[1],x=G[2]}}else{if(F){var N=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;d=Math.min(d,N.getHours()),d===N.getHours()&&(h=Math.min(h,N.getMinutes())),h===N.getMinutes()&&(x=Math.min(x,N.getSeconds()))}if(M){var V=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;d=Math.max(d,V.getHours()),d===V.getHours()&&h<V.getMinutes()&&(h=V.getMinutes()),h===V.getMinutes()&&(x=Math.max(x,V.getSeconds()))}}p(d,h,x)}}function g(d){var h=d||e.latestSelectedDateObj;h&&h instanceof Date&&p(h.getHours(),h.getMinutes(),h.getSeconds())}function p(d,h,x){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(d%24,h,x||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ye(e.config.time_24hr?d:(12+d)%12+12*Ae(d%12===0)),e.minuteElement.value=ye(h),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Ae(d>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ye(x)))}function v(d){var h=Se(d),x=parseInt(h.value)+(d.delta||0);(x/1e3>1||d.key==="Enter"&&!/[^\d]/.test(x.toString()))&&Ke(x)}function c(d,h,x,M){if(h instanceof Array)return h.forEach(function(F){return c(d,F,x,M)});if(d instanceof Array)return d.forEach(function(F){return c(F,h,x,M)});d.addEventListener(h,x,M),e._handlers.push({remove:function(){return d.removeEventListener(h,x,M)}})}function _(){ee("onChange")}function y(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(x){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+x+"]"),function(M){return c(M,"click",e[x])})}),e.isMobile){oa();return}var d=qi(bt,50);if(e._debouncedChange=qi(_,ro),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&c(e.daysContainer,"mouseover",function(x){e.config.mode==="range"&&Je(Se(x))}),c(e._input,"keydown",Bt),e.calendarContainer!==void 0&&c(e.calendarContainer,"keydown",Bt),!e.config.inline&&!e.config.static&&c(window,"resize",d),window.ontouchstart!==void 0?c(window.document,"touchstart",Rt):c(window.document,"mousedown",Rt),c(window.document,"focus",Rt,{capture:!0}),e.config.clickOpens===!0&&(c(e._input,"focus",e.open),c(e._input,"click",e.open)),e.daysContainer!==void 0&&(c(e.monthNav,"click",ua),c(e.monthNav,["keyup","increment"],v),c(e.daysContainer,"click",Ti)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var h=function(x){return Se(x).select()};c(e.timeContainer,["increment"],l),c(e.timeContainer,"blur",l,{capture:!0}),c(e.timeContainer,"click",b),c([e.hourElement,e.minuteElement],["focus","click"],h),e.secondElement!==void 0&&c(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&c(e.amPM,"click",function(x){l(x)})}e.config.allowInput&&c(e._input,"blur",$t)}function w(d,h){var x=d!==void 0?e.parseDate(d):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),M=e.currentYear,F=e.currentMonth;try{x!==void 0&&(e.currentYear=x.getFullYear(),e.currentMonth=x.getMonth())}catch(L){L.message="Invalid date supplied: "+x,e.config.errorHandler(L)}h&&e.currentYear!==M&&(ee("onYearChange"),A()),h&&(e.currentYear!==M||e.currentMonth!==F)&&ee("onMonthChange"),e.redraw()}function b(d){var h=Se(d);~h.className.indexOf("arrow")&&C(d,h.classList.contains("arrowUp")?1:-1)}function C(d,h,x){var M=d&&Se(d),F=x||M&&M.parentNode&&M.parentNode.firstChild,L=Sn("increment");L.delta=h,F&&F.dispatchEvent(L)}function S(){var d=window.document.createDocumentFragment();if(e.calendarContainer=q("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(d.appendChild(k()),e.innerContainer=q("div","flatpickr-innerContainer"),e.config.weekNumbers){var h=H(),x=h.weekWrapper,M=h.weekNumbers;e.innerContainer.appendChild(x),e.weekNumbers=M,e.weekWrapper=x}e.rContainer=q("div","flatpickr-rContainer"),e.rContainer.appendChild($()),e.daysContainer||(e.daysContainer=q("div","flatpickr-days"),e.daysContainer.tabIndex=-1),P(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),d.appendChild(e.innerContainer)}e.config.enableTime&&d.appendChild(O()),ge(e.calendarContainer,"rangeMode",e.config.mode==="range"),ge(e.calendarContainer,"animate",e.config.animate===!0),ge(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(d);var F=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!F&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var L=q("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(L,e.element),L.appendChild(e.element),e.altInput&&L.appendChild(e.altInput),L.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function D(d,h,x,M){var F=$e(h,!0),L=q("span",d,h.getDate().toString());return L.dateObj=h,L.$i=M,L.setAttribute("aria-label",e.formatDate(h,e.config.ariaDateFormat)),d.indexOf("hidden")===-1&&ke(h,e.now)===0&&(e.todayDateElem=L,L.classList.add("today"),L.setAttribute("aria-current","date")),F?(L.tabIndex=-1,kn(h)&&(L.classList.add("selected"),e.selectedDateElem=L,e.config.mode==="range"&&(ge(L,"startRange",e.selectedDates[0]&&ke(h,e.selectedDates[0],!0)===0),ge(L,"endRange",e.selectedDates[1]&&ke(h,e.selectedDates[1],!0)===0),d==="nextMonthDay"&&L.classList.add("inRange")))):L.classList.add("flatpickr-disabled"),e.config.mode==="range"&&fa(h)&&!kn(h)&&L.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&d!=="prevMonthDay"&&M%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(h)+"</span>"),ee("onDayCreate",L),L}function E(d){d.focus(),e.config.mode==="range"&&Je(d)}function I(d){for(var h=d>0?0:e.config.showMonths-1,x=d>0?e.config.showMonths:-1,M=h;M!=x;M+=d)for(var F=e.daysContainer.children[M],L=d>0?0:F.children.length-1,j=d>0?F.children.length:-1,R=L;R!=j;R+=d){var G=F.children[R];if(G.className.indexOf("hidden")===-1&&$e(G.dateObj))return G}}function T(d,h){for(var x=d.className.indexOf("Month")===-1?d.dateObj.getMonth():e.currentMonth,M=h>0?e.config.showMonths:-1,F=h>0?1:-1,L=x-e.currentMonth;L!=M;L+=F)for(var j=e.daysContainer.children[L],R=x-e.currentMonth===L?d.$i+h:h<0?j.children.length-1:0,G=j.children.length,N=R;N>=0&&N<G&&N!=(h>0?G:-1);N+=F){var V=j.children[N];if(V.className.indexOf("hidden")===-1&&$e(V.dateObj)&&Math.abs(d.$i-N)>=Math.abs(h))return E(V)}e.changeMonth(F),B(I(F),0)}function B(d,h){var x=r(),M=Qe(x||document.body),F=d!==void 0?d:M?x:e.selectedDateElem!==void 0&&Qe(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Qe(e.todayDateElem)?e.todayDateElem:I(h>0?1:-1);F===void 0?e._input.focus():M?T(F,h):E(F)}function Y(d,h){for(var x=(new Date(d,h,1).getDay()-e.l10n.firstDayOfWeek+7)%7,M=e.utils.getDaysInMonth((h-1+12)%12,d),F=e.utils.getDaysInMonth(h,d),L=window.document.createDocumentFragment(),j=e.config.showMonths>1,R=j?"prevMonthDay hidden":"prevMonthDay",G=j?"nextMonthDay hidden":"nextMonthDay",N=M+1-x,V=0;N<=M;N++,V++)L.appendChild(D("flatpickr-day "+R,new Date(d,h-1,N),N,V));for(N=1;N<=F;N++,V++)L.appendChild(D("flatpickr-day",new Date(d,h,N),N,V));for(var K=F+1;K<=42-x&&(e.config.showMonths===1||V%7!==0);K++,V++)L.appendChild(D("flatpickr-day "+G,new Date(d,h+1,K%F),K,V));var Be=q("div","dayContainer");return Be.appendChild(L),Be}function P(){if(e.daysContainer!==void 0){ln(e.daysContainer),e.weekNumbers&&ln(e.weekNumbers);for(var d=document.createDocumentFragment(),h=0;h<e.config.showMonths;h++){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+h),d.appendChild(Y(x.getFullYear(),x.getMonth()))}e.daysContainer.appendChild(d),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Je()}}function A(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var d=function(M){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&M<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&M>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var h=0;h<12;h++)if(d(h)){var x=q("option","flatpickr-monthDropdown-month");x.value=new Date(e.currentYear,h).getMonth().toString(),x.textContent=bn(h,e.config.shorthandCurrentMonth,e.l10n),x.tabIndex=-1,e.currentMonth===h&&(x.selected=!0),e.monthsDropdownContainer.appendChild(x)}}}function z(){var d=q("div","flatpickr-month"),h=window.document.createDocumentFragment(),x;e.config.showMonths>1||e.config.monthSelectorType==="static"?x=q("span","cur-month"):(e.monthsDropdownContainer=q("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),c(e.monthsDropdownContainer,"change",function(j){var R=Se(j),G=parseInt(R.value,10);e.changeMonth(G-e.currentMonth),ee("onMonthChange")}),A(),x=e.monthsDropdownContainer);var M=fn("cur-year",{tabindex:"-1"}),F=M.getElementsByTagName("input")[0];F.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&F.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(F.setAttribute("max",e.config.maxDate.getFullYear().toString()),F.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var L=q("div","flatpickr-current-month");return L.appendChild(x),L.appendChild(M),h.appendChild(L),d.appendChild(h),{container:d,yearElement:F,monthElement:x}}function W(){ln(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var d=e.config.showMonths;d--;){var h=z();e.yearElements.push(h.yearElement),e.monthElements.push(h.monthElement),e.monthNav.appendChild(h.container)}e.monthNav.appendChild(e.nextMonthNav)}function k(){return e.monthNav=q("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=q("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=q("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,W(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(d){e.__hidePrevMonthArrow!==d&&(ge(e.prevMonthNav,"flatpickr-disabled",d),e.__hidePrevMonthArrow=d)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(d){e.__hideNextMonthArrow!==d&&(ge(e.nextMonthNav,"flatpickr-disabled",d),e.__hideNextMonthArrow=d)}}),e.currentYearElement=e.yearElements[0],sn(),e.monthNav}function O(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var d=jn(e.config);e.timeContainer=q("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var h=q("span","flatpickr-time-separator",":"),x=fn("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=x.getElementsByTagName("input")[0];var M=fn("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=M.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ye(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?d.hours:f(d.hours)),e.minuteElement.value=ye(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():d.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(x),e.timeContainer.appendChild(h),e.timeContainer.appendChild(M),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var F=fn("flatpickr-second");e.secondElement=F.getElementsByTagName("input")[0],e.secondElement.value=ye(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():d.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(q("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(F)}return e.config.time_24hr||(e.amPM=q("span","flatpickr-am-pm",e.l10n.amPM[Ae((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function $(){e.weekdayContainer?ln(e.weekdayContainer):e.weekdayContainer=q("div","flatpickr-weekdays");for(var d=e.config.showMonths;d--;){var h=q("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(h)}return U(),e.weekdayContainer}function U(){if(e.weekdayContainer){var d=e.l10n.firstDayOfWeek,h=Ki(e.l10n.weekdays.shorthand);d>0&&d<h.length&&(h=Ki(h.splice(d,h.length),h.splice(0,d)));for(var x=e.config.showMonths;x--;)e.weekdayContainer.children[x].innerHTML=`
      <span class='flatpickr-weekday'>
        `+h.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function H(){e.calendarContainer.classList.add("hasWeeks");var d=q("div","flatpickr-weekwrapper");d.appendChild(q("span","flatpickr-weekday",e.l10n.weekAbbreviation));var h=q("div","flatpickr-weeks");return d.appendChild(h),{weekWrapper:d,weekNumbers:h}}function fe(d,h){h===void 0&&(h=!0);var x=h?d:d-e.currentMonth;x<0&&e._hidePrevMonthArrow===!0||x>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=x,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,ee("onYearChange"),A()),P(),ee("onMonthChange"),sn())}function ue(d,h){if(d===void 0&&(d=!0),h===void 0&&(h=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,h===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var x=jn(e.config),M=x.hours,F=x.minutes,L=x.seconds;p(M,F,L)}e.redraw(),d&&ee("onChange")}function lt(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),ee("onClose")}function ve(){e.config!==void 0&&ee("onDestroy");for(var d=e._handlers.length;d--;)e._handlers[d].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var h=e.calendarContainer.parentNode;if(h.lastChild&&h.removeChild(h.lastChild),h.parentNode){for(;h.firstChild;)h.parentNode.insertBefore(h.firstChild,h);h.parentNode.removeChild(h)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(x){try{delete e[x]}catch{}})}function ce(d){return e.calendarContainer.contains(d)}function Rt(d){if(e.isOpen&&!e.config.inline){var h=Se(d),x=ce(h),M=h===e.input||h===e.altInput||e.element.contains(h)||d.path&&d.path.indexOf&&(~d.path.indexOf(e.input)||~d.path.indexOf(e.altInput)),F=!M&&!x&&!ce(d.relatedTarget),L=!e.config.ignoredFocusElements.some(function(j){return j.contains(h)});F&&L&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Ke(d){if(!(!d||e.config.minDate&&d<e.config.minDate.getFullYear()||e.config.maxDate&&d>e.config.maxDate.getFullYear())){var h=d,x=e.currentYear!==h;e.currentYear=h||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),x&&(e.redraw(),ee("onYearChange"),A())}}function $e(d,h){var x;h===void 0&&(h=!0);var M=e.parseDate(d,void 0,h);if(e.config.minDate&&M&&ke(M,e.config.minDate,h!==void 0?h:!e.minDateHasTime)<0||e.config.maxDate&&M&&ke(M,e.config.maxDate,h!==void 0?h:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(M===void 0)return!1;for(var F=!!e.config.enable,L=(x=e.config.enable)!==null&&x!==void 0?x:e.config.disable,j=0,R=void 0;j<L.length;j++){if(R=L[j],typeof R=="function"&&R(M))return F;if(R instanceof Date&&M!==void 0&&R.getTime()===M.getTime())return F;if(typeof R=="string"){var G=e.parseDate(R,void 0,!0);return G&&G.getTime()===M.getTime()?F:!F}else if(typeof R=="object"&&M!==void 0&&R.from&&R.to&&M.getTime()>=R.from.getTime()&&M.getTime()<=R.to.getTime())return F}return!F}function Qe(d){return e.daysContainer!==void 0?d.className.indexOf("hidden")===-1&&d.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(d):!1}function $t(d){var h=d.target===e._input,x=e._input.value.trimEnd()!==Tn();h&&x&&!(d.relatedTarget&&ce(d.relatedTarget))&&e.setDate(e._input.value,!0,d.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Bt(d){var h=Se(d),x=e.config.wrap?s.contains(h):h===e._input,M=e.config.allowInput,F=e.isOpen&&(!M||!x),L=e.config.inline&&x&&!M;if(d.keyCode===13&&x){if(M)return e.setDate(e._input.value,!0,h===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),h.blur();e.open()}else if(ce(h)||F||L){var j=!!e.timeContainer&&e.timeContainer.contains(h);switch(d.keyCode){case 13:j?(d.preventDefault(),l(),Dn()):Ti(d);break;case 27:d.preventDefault(),Dn();break;case 8:case 46:x&&!e.config.allowInput&&(d.preventDefault(),e.clear());break;case 37:case 39:if(!j&&!x){d.preventDefault();var R=r();if(e.daysContainer!==void 0&&(M===!1||R&&Qe(R))){var G=d.keyCode===39?1:-1;d.ctrlKey?(d.stopPropagation(),fe(G),B(I(1),0)):B(void 0,G)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:d.preventDefault();var N=d.keyCode===40?1:-1;e.daysContainer&&h.$i!==void 0||h===e.input||h===e.altInput?d.ctrlKey?(d.stopPropagation(),Ke(e.currentYear-N),B(I(1),0)):j||B(void 0,N*7):h===e.currentYearElement?Ke(e.currentYear-N):e.config.enableTime&&(!j&&e.hourElement&&e.hourElement.focus(),l(d),e._debouncedChange());break;case 9:if(j){var V=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(De){return De}),K=V.indexOf(h);if(K!==-1){var Be=V[K+(d.shiftKey?-1:1)];d.preventDefault(),(Be||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(h)&&d.shiftKey&&(d.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&h===e.amPM)switch(d.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],m(),Ue();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],m(),Ue();break}(x||ce(h))&&ee("onKeyDown",d)}function Je(d,h){if(h===void 0&&(h="flatpickr-day"),!(e.selectedDates.length!==1||d&&(!d.classList.contains(h)||d.classList.contains("flatpickr-disabled")))){for(var x=d?d.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),M=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),F=Math.min(x,e.selectedDates[0].getTime()),L=Math.max(x,e.selectedDates[0].getTime()),j=!1,R=0,G=0,N=F;N<L;N+=io.DAY)$e(new Date(N),!0)||(j=j||N>F&&N<L,N<M&&(!R||N>R)?R=N:N>M&&(!G||N<G)&&(G=N));var V=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+h));V.forEach(function(K){var Be=K.dateObj,De=Be.getTime(),Yt=R>0&&De<R||G>0&&De>G;if(Yt){K.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(wt){K.classList.remove(wt)});return}else if(j&&!Yt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(wt){K.classList.remove(wt)}),d!==void 0&&(d.classList.add(x<=e.selectedDates[0].getTime()?"startRange":"endRange"),M<x&&De===M?K.classList.add("startRange"):M>x&&De===M&&K.classList.add("endRange"),De>=R&&(G===0||De<=G)&&to(De,M,x)&&K.classList.add("inRange"))})}}function bt(){e.isOpen&&!e.config.static&&!e.config.inline&&rn()}function Zr(d,h){if(h===void 0&&(h=e._positionElement),e.isMobile===!0){if(d){d.preventDefault();var x=Se(d);x&&x.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),ee("onOpen");return}else if(e._input.disabled||e.config.inline)return;var M=e.isOpen;e.isOpen=!0,M||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),ee("onOpen"),rn(h)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(d===void 0||!e.timeContainer.contains(d.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Mi(d){return function(h){var x=e.config["_"+d+"Date"]=e.parseDate(h,e.config.dateFormat),M=e.config["_"+(d==="min"?"max":"min")+"Date"];x!==void 0&&(e[d==="min"?"minDateHasTime":"maxDateHasTime"]=x.getHours()>0||x.getMinutes()>0||x.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(F){return $e(F)}),!e.selectedDates.length&&d==="min"&&g(x),Ue()),e.daysContainer&&(ki(),x!==void 0?e.currentYearElement[d]=x.getFullYear().toString():e.currentYearElement.removeAttribute(d),e.currentYearElement.disabled=!!M&&x!==void 0&&M.getFullYear()===x.getFullYear())}}function ea(){var d=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],h=de(de({},JSON.parse(JSON.stringify(s.dataset||{}))),t),x={};e.config.parseDate=h.parseDate,e.config.formatDate=h.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(V){e.config._enable=Ii(V)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(V){e.config._disable=Ii(V)}});var M=h.mode==="time";if(!h.dateFormat&&(h.enableTime||M)){var F=se.defaultConfig.dateFormat||It.dateFormat;x.dateFormat=h.noCalendar||M?"H:i"+(h.enableSeconds?":S":""):F+" H:i"+(h.enableSeconds?":S":"")}if(h.altInput&&(h.enableTime||M)&&!h.altFormat){var L=se.defaultConfig.altFormat||It.altFormat;x.altFormat=h.noCalendar||M?"h:i"+(h.enableSeconds?":S K":" K"):L+(" h:i"+(h.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Mi("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Mi("max")});var j=function(V){return function(K){e.config[V==="min"?"_minTime":"_maxTime"]=e.parseDate(K,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:j("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:j("max")}),h.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,x,h);for(var R=0;R<d.length;R++)e.config[d[R]]=e.config[d[R]]===!0||e.config[d[R]]==="true";Yn.filter(function(V){return e.config[V]!==void 0}).forEach(function(V){e.config[V]=zn(e.config[V]||[]).map(a)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var R=0;R<e.config.plugins.length;R++){var G=e.config.plugins[R](e)||{};for(var N in G)Yn.indexOf(N)>-1?e.config[N]=zn(G[N]).map(a).concat(e.config[N]):typeof h[N]>"u"&&(e.config[N]=G[N])}h.altInputClass||(e.config.altInputClass=Di().className+" "+e.config.altInputClass),ee("onParseConfig")}function Di(){return e.config.wrap?s.querySelector("[data-input]"):s}function Si(){typeof e.config.locale!="object"&&typeof se.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=de(de({},se.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?se.l10ns[e.config.locale]:void 0),dt.D="("+e.l10n.weekdays.shorthand.join("|")+")",dt.l="("+e.l10n.weekdays.longhand.join("|")+")",dt.M="("+e.l10n.months.shorthand.join("|")+")",dt.F="("+e.l10n.months.longhand.join("|")+")",dt.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var d=de(de({},t),JSON.parse(JSON.stringify(s.dataset||{})));d.time_24hr===void 0&&se.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Jr(e),e.parseDate=si({config:e.config,l10n:e.l10n})}function rn(d){if(typeof e.config.position=="function")return void e.config.position(e,d);if(e.calendarContainer!==void 0){ee("onPreCalendarPosition");var h=d||e._positionElement,x=Array.prototype.reduce.call(e.calendarContainer.children,function(ya,xa){return ya+xa.offsetHeight},0),M=e.calendarContainer.offsetWidth,F=e.config.position.split(" "),L=F[0],j=F.length>1?F[1]:null,R=h.getBoundingClientRect(),G=window.innerHeight-R.bottom,N=L==="above"||L!=="below"&&G<x&&R.top>x,V=window.pageYOffset+R.top+(N?-x-2:h.offsetHeight+2);if(ge(e.calendarContainer,"arrowTop",!N),ge(e.calendarContainer,"arrowBottom",N),!e.config.inline){var K=window.pageXOffset+R.left,Be=!1,De=!1;j==="center"?(K-=(M-R.width)/2,Be=!0):j==="right"&&(K-=M-R.width,De=!0),ge(e.calendarContainer,"arrowLeft",!Be&&!De),ge(e.calendarContainer,"arrowCenter",Be),ge(e.calendarContainer,"arrowRight",De);var Yt=window.document.body.offsetWidth-(window.pageXOffset+R.right),wt=K+M>window.document.body.offsetWidth,da=Yt+M>window.document.body.offsetWidth;if(ge(e.calendarContainer,"rightMost",wt),!e.config.static)if(e.calendarContainer.style.top=V+"px",!wt)e.calendarContainer.style.left=K+"px",e.calendarContainer.style.right="auto";else if(!da)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Yt+"px";else{var En=ta();if(En===void 0)return;var ha=window.document.body.offsetWidth,pa=Math.max(0,ha/2-M/2),ma=".flatpickr-calendar.centerMost:before",ga=".flatpickr-calendar.centerMost:after",_a=En.cssRules.length,va="{left:"+R.left+"px;right:auto;}";ge(e.calendarContainer,"rightMost",!1),ge(e.calendarContainer,"centerMost",!0),En.insertRule(ma+","+ga+va,_a),e.calendarContainer.style.left=pa+"px",e.calendarContainer.style.right="auto"}}}}function ta(){for(var d=null,h=0;h<document.styleSheets.length;h++){var x=document.styleSheets[h];if(x.cssRules){try{x.cssRules}catch{continue}d=x;break}}return d??na()}function na(){var d=document.createElement("style");return document.head.appendChild(d),d.sheet}function ki(){e.config.noCalendar||e.isMobile||(A(),sn(),P())}function Dn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Ti(d){d.preventDefault(),d.stopPropagation();var h=function(V){return V.classList&&V.classList.contains("flatpickr-day")&&!V.classList.contains("flatpickr-disabled")&&!V.classList.contains("notAllowed")},x=Qr(Se(d),h);if(x!==void 0){var M=x,F=e.latestSelectedDateObj=new Date(M.dateObj.getTime()),L=(F.getMonth()<e.currentMonth||F.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=M,e.config.mode==="single")e.selectedDates=[F];else if(e.config.mode==="multiple"){var j=kn(F);j?e.selectedDates.splice(parseInt(j),1):e.selectedDates.push(F)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=F,e.selectedDates.push(F),ke(F,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(V,K){return V.getTime()-K.getTime()}));if(m(),L){var R=e.currentYear!==F.getFullYear();e.currentYear=F.getFullYear(),e.currentMonth=F.getMonth(),R&&(ee("onYearChange"),A()),ee("onMonthChange")}if(sn(),P(),Ue(),!L&&e.config.mode!=="range"&&e.config.showMonths===1?E(M):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var G=e.config.mode==="single"&&!e.config.enableTime,N=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(G||N)&&Dn()}_()}}var an={locale:[Si,U],showMonths:[W,o,$],minDate:[w],maxDate:[w],positionElement:[Pi],clickOpens:[function(){e.config.clickOpens===!0?(c(e._input,"focus",e.open),c(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function ia(d,h){if(d!==null&&typeof d=="object"){Object.assign(e.config,d);for(var x in d)an[x]!==void 0&&an[x].forEach(function(M){return M()})}else e.config[d]=h,an[d]!==void 0?an[d].forEach(function(M){return M()}):Yn.indexOf(d)>-1&&(e.config[d]=zn(h));e.redraw(),Ue(!0)}function Ei(d,h){var x=[];if(d instanceof Array)x=d.map(function(M){return e.parseDate(M,h)});else if(d instanceof Date||typeof d=="number")x=[e.parseDate(d,h)];else if(typeof d=="string")switch(e.config.mode){case"single":case"time":x=[e.parseDate(d,h)];break;case"multiple":x=d.split(e.config.conjunction).map(function(M){return e.parseDate(M,h)});break;case"range":x=d.split(e.l10n.rangeSeparator).map(function(M){return e.parseDate(M,h)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(d)));e.selectedDates=e.config.allowInvalidPreload?x:x.filter(function(M){return M instanceof Date&&$e(M,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(M,F){return M.getTime()-F.getTime()})}function ra(d,h,x){if(h===void 0&&(h=!1),x===void 0&&(x=e.config.dateFormat),d!==0&&!d||d instanceof Array&&d.length===0)return e.clear(h);Ei(d,x),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),w(void 0,h),g(),e.selectedDates.length===0&&e.clear(!1),Ue(h),h&&ee("onChange")}function Ii(d){return d.slice().map(function(h){return typeof h=="string"||typeof h=="number"||h instanceof Date?e.parseDate(h,void 0,!0):h&&typeof h=="object"&&h.from&&h.to?{from:e.parseDate(h.from,void 0),to:e.parseDate(h.to,void 0)}:h}).filter(function(h){return h})}function aa(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var d=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);d&&Ei(d,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function sa(){if(e.input=Di(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=q(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Pi()}function Pi(){e._positionElement=e.config.positionElement||e._input}function oa(){var d=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=q("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=d,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=d==="datetime-local"?"Y-m-d\\TH:i:S":d==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}c(e.mobileInput,"change",function(h){e.setDate(Se(h).value,!1,e.mobileFormatStr),ee("onChange"),ee("onClose")})}function la(d){if(e.isOpen===!0)return e.close();e.open(d)}function ee(d,h){if(e.config!==void 0){var x=e.config[d];if(x!==void 0&&x.length>0)for(var M=0;x[M]&&M<x.length;M++)x[M](e.selectedDates,e.input.value,e,h);d==="onChange"&&(e.input.dispatchEvent(Sn("change")),e.input.dispatchEvent(Sn("input")))}}function Sn(d){var h=document.createEvent("Event");return h.initEvent(d,!0,!0),h}function kn(d){for(var h=0;h<e.selectedDates.length;h++){var x=e.selectedDates[h];if(x instanceof Date&&ke(x,d)===0)return""+h}return!1}function fa(d){return e.config.mode!=="range"||e.selectedDates.length<2?!1:ke(d,e.selectedDates[0])>=0&&ke(d,e.selectedDates[1])<=0}function sn(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(d,h){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+h),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[h].textContent=bn(x.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=x.getMonth().toString(),d.value=x.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Tn(d){var h=d||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(x){return e.formatDate(x,h)}).filter(function(x,M,F){return e.config.mode!=="range"||e.config.enableTime||F.indexOf(x)===M}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ue(d){d===void 0&&(d=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Tn(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Tn(e.config.altFormat)),d!==!1&&ee("onValueUpdate")}function ua(d){var h=Se(d),x=e.prevMonthNav.contains(h),M=e.nextMonthNav.contains(h);x||M?fe(x?-1:1):e.yearElements.indexOf(h)>=0?h.select():h.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):h.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function ca(d){d.preventDefault();var h=d.type==="keydown",x=Se(d),M=x;e.amPM!==void 0&&x===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Ae(e.amPM.textContent===e.l10n.amPM[0])]);var F=parseFloat(M.getAttribute("min")),L=parseFloat(M.getAttribute("max")),j=parseFloat(M.getAttribute("step")),R=parseInt(M.value,10),G=d.delta||(h?d.which===38?1:-1:0),N=R+j*G;if(typeof M.value<"u"&&M.value.length===2){var V=M===e.hourElement,K=M===e.minuteElement;N<F?(N=L+N+Ae(!V)+(Ae(V)&&Ae(!e.amPM)),K&&C(void 0,-1,e.hourElement)):N>L&&(N=M===e.hourElement?N-L-Ae(!e.amPM):F,K&&C(void 0,1,e.hourElement)),e.amPM&&V&&(j===1?N+R===23:Math.abs(N-R)>j)&&(e.amPM.textContent=e.l10n.amPM[Ae(e.amPM.textContent===e.l10n.amPM[0])]),M.value=ye(N)}}return i(),e}function Pt(s,t){for(var e=Array.prototype.slice.call(s).filter(function(a){return a instanceof HTMLElement}),n=[],i=0;i<e.length;i++){var r=e[i];try{if(r.getAttribute("data-fp-omit")!==null)continue;r._flatpickr!==void 0&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=ao(r,t||{}),n.push(r._flatpickr)}catch(a){console.error(a)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(s){return Pt(this,s)},HTMLElement.prototype.flatpickr=function(s){return Pt([this],s)});var se=function(s,t){return typeof s=="string"?Pt(window.document.querySelectorAll(s),t):s instanceof Node?Pt([s],t):Pt(s,t)};se.defaultConfig={};se.l10ns={en:de({},tn),default:de({},tn)};se.localize=function(s){se.l10ns.default=de(de({},se.l10ns.default),s)};se.setDefaults=function(s){se.defaultConfig=de(de({},se.defaultConfig),s)};se.parseDate=si({});se.formatDate=Jr({});se.compareDates=ke;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(s){return Pt(this,s)});Date.prototype.fp_incr=function(s){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof s=="string"?parseInt(s,10):s))};typeof window<"u"&&(window.flatpickr=se);class so{constructor(){this.marketDataService=new Oa,this.mask=null,this.picker=null,this.ui={datePickerInput:document.getElementById("date-picker"),btnToday:document.getElementById("btn-today"),marketInfo:document.getElementById("market-info"),valSentiment:document.getElementById("val-mood-state"),valFearGreed:document.getElementById("risk-val"),valVix:document.getElementById("val-vix"),headlinesContainer:document.getElementById("headlines-container")},this.init()}async init(){await this.marketDataService.init();const t=Object.keys(this.marketDataService.dataMap||{});t.length===0&&console.error("Critical: No market data found for calendar."),this.picker=se(this.ui.datePickerInput,{dateFormat:"Y-m-d",defaultDate:t.sort().pop()||"today",theme:"dark",disable:[n=>{const i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),o=`${i}-${r}-${a}`;return this.marketDataService.dataMap?!this.marketDataService.dataMap[o]:!0}],onChange:n=>{n.length>0&&this.loadDate(n[0])}}),this.ui.timelineSlider=document.getElementById("timeline-slider"),this.ui.timelineStart=document.getElementById("timeline-start"),this.ui.timelineCurrent=document.getElementById("timeline-current"),this.ui.timelineCanvas=document.getElementById("timeline-canvas"),this.ui.btnPlay=document.getElementById("btn-play"),this.ui.modelSelect=document.getElementById("model-select"),this.isPlaying=!1,this.playInterval=null,this.ui.timelineSlider&&(this.ui.timelineSlider.min=0,this.ui.timelineSlider.max=t.length-1,this.ui.timelineStart.textContent=t[0],this.drawTimeline(t),this.ui.timelineSlider.addEventListener("input",n=>{this.stopPlay();const i=parseInt(n.target.value),r=t.sort()[i];r&&(this.picker.setDate(new Date(r+"T00:00:00"),!1),this.loadDate(new Date(r+"T00:00:00")))}),this.ui.btnPlay&&this.ui.btnPlay.addEventListener("click",()=>this.togglePlay(t))),this.ui.modelSelect&&this.ui.modelSelect.addEventListener("change",n=>{this.mask&&this.mask.changeModel(n.target.value)}),this.setupEventListeners();const e=t.sort().pop();e?this.picker.setDate(e,!0):this.loadDate(new Date)}drawTimeline(t){if(!this.ui.timelineCanvas||!this.marketDataService.dataMap)return;const e=this.ui.timelineCanvas,n=e.getContext("2d"),i=e.parentElement.offsetWidth,r=e.parentElement.offsetHeight,a=window.devicePixelRatio||1;e.width=i*a,e.height=r*a,n.scale(a,a);const o=t.map(p=>this.marketDataService.dataMap[p]),l=o.length,u=i/l;n.fillStyle="rgba(0,0,0,0.2)",n.fillRect(0,0,i,r),n.strokeStyle="rgba(255,255,255,0.05)",n.lineWidth=1,n.beginPath();for(let p=1;p<4;p++){const v=r/4*p;n.moveTo(0,v),n.lineTo(i,v)}if(n.stroke(),l===0)return;o.forEach((p,v)=>{if(!p)return;const c=p.intradayRange||.5,_=p.fearGreedIndex||50,y=Math.min(1,c/3)*r,w=v*u,b=Math.max(1,u-.5);let C,S,D;_<50?(C=255,S=Math.floor(_/50*255),D=0):(C=Math.floor((100-_)/50*255),S=255,D=0),n.fillStyle=`rgba(${C}, ${S}, ${D}, 0.5)`,n.fillRect(w,r-y,b,y)});const f=10,m=60,g=p=>r-(Math.min(m,Math.max(f,p))-f)/(m-f)*(r*.9);n.strokeStyle="#ffffff",n.lineWidth=2.5,n.lineJoin=n.lineCap="round",n.beginPath(),o.forEach((p,v)=>{if(!p)return;const c=v*u+u/2,_=g(p.vix||15);v===0?n.moveTo(c,_):n.lineTo(c,_)}),n.stroke()}togglePlay(t){this.isPlaying?this.stopPlay():this.startPlay(t)}startPlay(t){this.isPlaying||(this.isPlaying=!0,this.ui.btnPlay.textContent="",this.playInterval=setInterval(()=>{let e=parseInt(this.ui.timelineSlider.value);e>=t.length-1&&(e=-1),this.ui.timelineSlider.value=++e;const n=t.sort()[e],i=new Date(n+"T00:00:00");this.picker.setDate(i,!1),this.loadDate(i)},200))}stopPlay(){this.isPlaying=!1,this.ui.btnPlay.textContent="",this.playInterval&&clearInterval(this.playInterval)}setupEventListeners(){this.ui.btnToday&&this.ui.btnToday.addEventListener("click",()=>{this.stopPlay(),this.picker.setDate(new Date,!0)})}loadDate(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=`${e}-${n}-${i}`,a=this.marketDataService.getDataForDate(t);this.updateUI(a,!a||a.regime==="Data Missing",r),this.updateVisuals(a)}updateUI(t,e,n){console.log("[updateUI] CALLED with data:",t?t.date:"NONE");const i=document.getElementById("market-status");i&&(i.classList.toggle("hidden",!e),e&&(i.textContent=`Market Closed on ${n}. Data from ${t.date}`)),document.getElementById("val-index").textContent=t.indexValue.toLocaleString();const r=document.getElementById("val-change");r.textContent=(t.marketChangePercent>0?"+":"")+t.marketChangePercent+"%",r.className="change-pill "+(t.marketChangePercent>=0?"positive":"negative");const a=document.getElementById("val-sp500");a.textContent=t.sp500Value?t.sp500Value.toLocaleString():"--";const o=document.getElementById("val-sp500-change");if(o.textContent=t.sp500Value?(t.sp500Change>0?"+":"")+t.sp500Change+"%":"--%",o.className="change-pill "+(t.sp500Change>=0?"positive":"negative"),this.ui.marketInfo.classList.remove("hidden"),this.ui.valSentiment){this.ui.valSentiment.textContent=t.moodState?t.moodState.toUpperCase():"NEUTRAL";let l="#ffffff";const u=(t.moodState||"").toLowerCase();u.includes("panic")||u.includes("fear")||u.includes("bear")?l="#ff5050":u.includes("greed")||u.includes("euphoria")||u.includes("bull")?l="#00ffaa":u.includes("anxiety")&&(l="#ffcc00"),this.ui.valSentiment.style.color=l;const f=document.getElementById("val-regime");if(f&&t.regime&&(f.textContent=t.regime+" Regime"),this.ui.yield&&(this.ui.yield.textContent=t.yield10y),this.ui.valVix){this.ui.valVix.textContent=t.vix;const b=parseFloat(t.vix);isNaN(b)||(b<18?this.ui.valVix.style.color="#00ffaa":b>25?this.ui.valVix.style.color="#ff5050":this.ui.valVix.style.color="#ffffff")}const m=document.getElementById("val-volume");if(m){const b=t.volume||0;m.textContent=b>1e9?(b/1e9).toFixed(1)+"B":(b/1e6).toFixed(1)+"M"}this.ui.range52w&&(this.ui.range52w.textContent=t.range52w||"15222.78 - 20204.58");const g=t.fearGreedIndex||50;let p="NEUTRAL",v="#ffffff";if(g<=25?(p=`EXTREME FEAR (${g})`,v="#ff5050"):g<=45?(p=`FEAR (${g})`,v="#ffaa50"):g<=55?(p=`NEUTRAL (${g})`,v="#ffffff"):g<=75?(p=`GREED (${g})`,v="#50ffaa"):(p=`EXTREME GREED (${g})`,v="#00ffaa"),this.ui.valSentiment){this.ui.valSentiment.textContent=p,this.ui.valSentiment.style.color=v,this.ui.valSentiment.style.fontWeight="bold";const b=document.getElementById("val-regime");b&&(b.textContent="CNN Fear & Greed Index",b.style.fontSize="0.7em",b.style.opacity="0.7")}const c=document.getElementById("val-day-range");c&&(c.textContent=t.dayLow?`${t.dayLow} - ${t.dayHigh}`:"--");const _=document.getElementById("val-52w-range");if(_&&(_.textContent=t.yearLow?`${t.yearLow} - ${t.yearHigh}`:"--"),this.ui.timelineSlider&&this.marketDataService.dataMap){const C=Object.keys(this.marketDataService.dataMap).sort().indexOf(t.date);C!==-1&&(this.ui.timelineSlider.value=C,this.ui.timelineCurrent.textContent=t.date)}this.ui.headlinesContainer.innerHTML="",t.headlines.forEach(b=>{const C=typeof b=="object"&&b!==null,S=C?b.title:b,D=C?b.link:"#",E=document.createElement("p");E.style.margin="0",E.innerHTML=`<a href="${D}" target="_blank" rel="noopener noreferrer" style="cursor:pointer">${S}</a>`,this.ui.headlinesContainer.appendChild(E)});const y=this.ui.marketInfo.querySelector(".sources");if(y&&y.remove(),t.sources){const b=document.createElement("div");b.className="sources",b.style.cssText="font-size:0.7em; opacity:0.5; margin-top:1rem; border-top:1px solid rgba(255,255,255,0.1); padding-top:0.5rem;",b.textContent="Data Sources: "+t.sources[0]+", "+t.sources[1],this.ui.marketInfo.appendChild(b)}this.renderTreemap(t),this.drawIndexChart(t),this.updateMarketBreadth(t);const w=document.getElementById("velocity-marker");w&&t.fearGreedIndex&&(w.style.left=t.fearGreedIndex+"%")}console.log("[updateUI] Running AI scan, data:",t?t.date:"undefined"),this.runAIPatternScan(t)}updateMarketBreadth(t){if(!t.sectorMap)return;let e=0,n=0;Object.values(t.sectorMap).forEach(u=>{(typeof u=="object"?u.change:u)>=0?e++:n++});const i=e+n||1,r=e/i*100,a=document.getElementById("breadth-fill"),o=document.getElementById("breadth-up"),l=document.getElementById("breadth-down");a&&(a.style.width=r+"%"),o&&(o.textContent=`${e} Up`),l&&(l.textContent=`${n} Down`)}renderTreemap(t){const e=document.getElementById("treemap-container");if(!e||!t.sectorMap)return;let n=[];Object.keys(t.sectorMap).forEach(g=>{const p=t.sectorMap[g],v=typeof p=="object"?p.change:p,c=typeof p=="object"?p.weight:1;n.push({id:g,val:v,weight:c})}),n.sort((g,p)=>p.weight-g.weight),e.innerHTML="";const i={x:0,y:0,w:e.clientWidth,h:e.clientHeight};if(i.w===0||i.h===0)return;const r=(g,p)=>{if(g.length===0)return 0;const v=g.reduce((w,b)=>w+b.area,0),c=p*p,_=v*v;let y=0;for(let w of g){const b=w.area,C=Math.max(c*b/_,_/(c*b));C>y&&(y=C)}return y},a=(g,p,v,c,_)=>{const y=document.createElement("div");y.className="sector-cell",y.style.left=p+"px",y.style.top=v+"px",y.style.width=Math.max(0,c-1)+"px",y.style.height=Math.max(0,_-1)+"px";const w=g.val;let b,C;if(w>=0){const E=Math.min(1,w/3),I=11,T=46+E*40;b=`rgb(${I}, ${T}, 30)`,C="#4ade80"}else b=`rgb(${46+Math.min(1,Math.abs(w)/3)*40}, 11, 11)`,C="#f87171";y.style.backgroundColor=b,y.style.color=C,y.style.border="1px solid rgba(0,0,0,0.3)",y.style.boxShadow="inset 0 0 10px rgba(0,0,0,0.2)";const D={XLK:"Technology",XLF:"Financials",XLV:"Healthcare",XLY:"Discretionary",XLP:"Staples",XLE:"Energy",XLI:"Industrials",XLB:"Materials",XLU:"Utilities",XLRE:"Real Estate",XLC:"Comm. Svcs"}[g.id]||g.id;y.innerHTML=`
                <div style="text-align:center; pointer-events:none; width:100%; overflow:hidden; display:flex; flex-direction:column; justify-content:center; height:100%;">
                    <span style="display:block; font-size:0.8em; font-weight:700; color:white; margin-bottom:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; padding:0 2px;">${D}</span>
                    <span style="font-size:0.85em; font-weight:600;">${w>0?"+":""}${w}%</span>
                </div>
            `,y.title=`${D}: ${w}%`,e.appendChild(y)},o=(g,p)=>{const v=g.reduce((_,y)=>_+y.area,0);if(p.w<p.h){const _=v/p.w;let y=p.x;g.forEach(w=>{const b=w.area/_;a(w,y,p.y,b,_),y+=b}),p.y+=_,p.h-=_}else{const _=v/p.h;let y=p.y;g.forEach(w=>{const b=w.area/_;a(w,p.x,y,_,b),y+=b}),p.x+=_,p.w-=_}},l=n.reduce((g,p)=>g+p.weight,0),u=i.w*i.h/l;n.forEach(g=>g.area=g.weight*u);let f=[],m=[...n];for(;m.length>0;){const g=m[0],p=Math.min(i.w,i.h),v=[...f,g],c=r(f,p),_=r(v,p);if(f.length===0||_<=c)f.push(g),m.shift();else if(o(f,i),f=[],i.w<=0||i.h<=0)break}f.length>0&&o(f,i)}drawIndexChart(t){const e=document.getElementById("market-chart");if(!e||!this.marketDataService.dataMap)return;const n=e.getContext("2d"),i=e.width,r=e.height;n.clearRect(0,0,i,r);const a=Object.keys(this.marketDataService.dataMap).sort(),o=a.indexOf(t.date);if(o===-1)return;const l=Math.max(0,o-30),f=a.slice(l,o+1).map(_=>this.marketDataService.dataMap[_].indexValue||0),m=Math.min(...f),p=Math.max(...f)-m||1,v=f[f.length-1]>=f[0];n.strokeStyle=v?"#00ffaa":"#ff5050",n.lineWidth=2,n.lineJoin="round",n.beginPath(),f.forEach((_,y)=>{const w=y/(f.length-1)*i,C=(r-(_-m)/p*r)*.8+r*.1;y===0?n.moveTo(w,C):n.lineTo(w,C)}),n.stroke();const c=n.createLinearGradient(0,0,0,r);c.addColorStop(0,v?"rgba(0, 255, 170, 0.2)":"rgba(255, 80, 80, 0.2)"),c.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=c,n.lineTo(i,r),n.lineTo(0,r),n.fill()}runAIPatternScan(t){var lt,ve;const e=document.getElementById("ai-analyst-text");if(!e||!t)return;const n=t.fearGreedIndex||50,i=parseFloat(t.vix)||15,r=parseFloat(t.marketChangePercent)||0,a=parseFloat(t.sp500Change)||0;parseFloat(t.dowChange);const o=t.rsi||50,l=t.yieldSpread||0,u=t.date||"";(lt=t.indexValue)!=null&&lt.toLocaleString(),(ve=t.sp500Value)!=null&&ve.toLocaleString();let f="NEUTRAL",m="#ffffff",g="",p="#ffffff11";n<=25?(f="EXTREME FEAR",m="#ff5050",g="",p="#ff505022"):n<=40?(f="FEAR",m="#ff7744",g="",p="#ff774422"):n>=75?(f="EXTREME GREED",m="#00ffaa",g="",p="#00ffaa22"):n>=60?(f="GREED",m="#50ffaa",g="",p="#50ffaa22"):i>25?(f="HIGH VOLATILITY",m="#ff5050",g="",p="#ff505022"):i<15&&r>0&&(f="RISK-ON",m="#00ffaa",g="",p="#00ffaa22");let v="",c="#8899a6";r>1.5?(v=" Rally",c="#00ffaa"):r>.5?(v=" Up",c="#50ffaa"):r>0?(v=" +",c="#ffcc00"):r<-1.5?(v=" Selloff",c="#ff5050"):r<-.5?(v=" Down",c="#ff7744"):r<0?(v=" -",c="#ffcc00"):(v=" Flat",c="#8899a6");let _="",y="",w=0,b=0;if(t.sectorMap){const ce={XLK:"Tech",XLF:"Financials",XLV:"Healthcare",XLE:"Energy",XLI:"Industrials",XLU:"Utilities",XLY:"Consumer Discretionary",XLP:"Consumer Staples",XLB:"Materials",XLRE:"Real Estate",XLC:"Communications"},Rt=Object.entries(t.sectorMap);let Ke=null,$e=null,Qe=-1/0,$t=1/0;Rt.forEach(([Bt,Je])=>{const bt=typeof Je=="object"?Je.change:Je;bt>Qe&&(Qe=bt,Ke=Bt),bt<$t&&($t=bt,$e=Bt)}),_=ce[Ke]||Ke||"",y=ce[$e]||$e||"",w=Qe,b=$t}let C="";const S=Math.abs(r),D=a>=0?`+${a.toFixed(2)}%`:`${a.toFixed(2)}%`,E=r>=0?`+${r.toFixed(2)}%`:`${r.toFixed(2)}%`;n<=25&&i>25?C=` PANIC MODE: Extreme fear (F&G: ${n}) with VIX at ${i.toFixed(1)}. NASDAQ ${E}, S&P ${D}. ${y?`${y} crushed (${b.toFixed(1)}%).`:""} Capitulation conditions  historically a contrarian buy signal.`:n<=25&&r<-1?C=` FEAR SELLOFF: Markets plunging with F&G at ${n}. NASDAQ down ${S.toFixed(2)}%. VIX elevated at ${i.toFixed(1)}. ${_?`Only ${_} showing resilience.`:""} Oversold bounce possible.`:n>=75&&r>1?C=` EUPHORIA: Extreme greed (${n}) and NASDAQ surging ${E}. VIX low at ${i.toFixed(1)}. ${_?`${_} leading (+${w.toFixed(1)}%).`:""} Overbought  late buyers at risk.`:n>=60&&r>.5?C=` BULL RUN: Greed sentiment (${n}) with NASDAQ ${E}. S&P ${D}. VIX calm at ${i.toFixed(1)}. ${_?`${_} outperforming.`:""} Trend continuation likely.`:i>25?C=` VOL SPIKE: VIX surged to ${i.toFixed(1)}! NASDAQ ${E}. F&G at ${n}. ${S>1?"Wild swings expected.":"Tension building."} ${y?`${y} hardest hit.`:""} Options expensive.`:r<-1.5?C=` SELLOFF: NASDAQ dropped ${S.toFixed(2)}%, S&P ${D}. VIX at ${i.toFixed(1)}, F&G ${n}. ${y?`${y} led losses (${b.toFixed(1)}%).`:""} Watch support levels.`:r>1.5?C=` STRONG DAY: NASDAQ rallied ${E}, S&P ${D}. VIX subdued at ${i.toFixed(1)}. ${_?`${_} surging (+${w.toFixed(1)}%).`:""} Bullish momentum intact.`:S<.3&&i<18?C=` QUIET: NASDAQ ${E}, S&P ${D}. VIX low at ${i.toFixed(1)}, F&G ${n}. Low volatility consolidation. Market awaits catalyst for next directional move.`:r>0&&n<45?C=` RECOVERY: NASDAQ edging higher ${E} despite fear (F&G: ${n}). VIX at ${i.toFixed(1)}. ${_?`${_} leading.`:""} Tentative buying returning.`:r<0&&n>55?C=` PULLBACK: NASDAQ ${E} amid greedy sentiment (${n}). VIX at ${i.toFixed(1)}. ${y?`${y} lagging.`:""} Healthy profit-taking or start of rotation?`:r>0?C=` GREEN: NASDAQ ${E}, S&P ${D}. F&G ${n}, VIX ${i.toFixed(1)}. ${_?`${_} (+${w.toFixed(1)}%) outperforming.`:""} Modest risk appetite.`:r<0?C=` RED: NASDAQ ${E}, S&P ${D}. F&G ${n}, VIX ${i.toFixed(1)}. ${y?`${y} (${b.toFixed(1)}%) underperforming.`:""} Caution warranted.`:C=` UNCHANGED: NASDAQ flat at ${E}. S&P ${D}. VIX ${i.toFixed(1)}, F&G ${n}. Markets in wait-and-see mode. Direction unclear.`;let I="",T="#8899a6";l<0?(I=" Inverted (Recession Signal)",T="#ff5050"):l<.5?(I=" Flat (Slowing)",T="#ffcc00"):(I=" Normal",T="#50ffaa");let B="";_&&y&&(B=`<span style="color:#50ffaa"> ${_}</span> <span style="color:#ff7744"> ${y}</span>`);let Y=50;Y+=(n-50)*.4,Y+=r*8,Y-=(i-18)*1.5,Y+=l>0?5:-10,Y=Math.max(0,Math.min(100,Math.round(Y)));let P="Balanced",A="#ffffff";Y>=70?(P="Strong",A="#00ffaa"):Y>=55?(P="Healthy",A="#50ffaa"):Y<=30?(P="Weak",A="#ff5050"):Y<=45&&(P="Fragile",A="#ff7744");let z=50;r>0&&i<18&&(z+=20),r<0&&i>22&&(z-=20),n>60&&r<0&&(z-=10),n<40&&r>0&&(z+=15),z=Math.max(0,Math.min(100,Math.round(z)));let W=z>=60?"Inflow":z<=40?"Outflow":"Neutral",k=z>=60?"#50ffaa":z<=40?"#ff7744":"#8899a6",O=50;O+=(i-18)*2,O-=(n-50)*.3,l<0&&(O+=20),Math.abs(r)>2&&(O+=15),O=Math.max(0,Math.min(100,Math.round(O)));let $="Moderate",U="#ffcc00";O>=70?($="Elevated",U="#ff5050"):O>=55?($="Caution",U="#ff7744"):O<=30?($="Low",U="#00ffaa"):O<=45&&($="Calm",U="#50ffaa");let H=50+r*15+(o-50)*.3;H=Math.max(0,Math.min(100,Math.round(H)));let fe=H>=65?" Bullish":H<=35?" Bearish":" Neutral",ue=H>=65?"#50ffaa":H<=35?"#ff7744":"#8899a6";e.innerHTML=`
            <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px; flex-wrap: nowrap; white-space: nowrap; overflow: hidden;">
                <span style="background: ${p}; color: ${m}; padding: 3px 8px; border-radius: 4px; font-size: 0.7em; font-weight: 700; letter-spacing: 0.3px; box-shadow: 0 0 8px ${m}44; flex-shrink: 0;">
                    ${g} ${f}
                </span>
                <span style="font-size: 0.7em; color: var(--text-faint); flex-shrink: 0;">${u}</span>
                <span style="margin-left: auto; font-size: 0.7em; color: ${c}; font-weight: 600; flex-shrink: 0;">${v}</span>
            </div>
            
            <div style="font-size: 0.9em; line-height: 1.7; color: var(--text-main); margin-bottom: 12px;">
                ${C}
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 10px; font-size: 0.7em;">
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${A};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">PULSE</div>
                    <div style="color: ${A}; font-weight: 700; font-size: 1.1em;">${Y}</div>
                    <div style="color: ${A}; font-size: 0.8em;">${P}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${k};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">FLOW</div>
                    <div style="color: ${k}; font-weight: 700; font-size: 1.1em;">${z}</div>
                    <div style="color: ${k}; font-size: 0.8em;">${W}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${U};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">RISK</div>
                    <div style="color: ${U}; font-weight: 700; font-size: 1.1em;">${O}</div>
                    <div style="color: ${U}; font-size: 0.8em;">${$}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${ue};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">MOMO</div>
                    <div style="color: ${ue}; font-weight: 700; font-size: 1.1em;">${H}</div>
                    <div style="color: ${ue}; font-size: 0.8em;">${fe}</div>
                </div>
            </div>
            
            <div style="display: flex; gap: 12px; flex-wrap: wrap; font-size: 0.75em; color: var(--text-faint); padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                <span> Yield: <strong style="color: ${T}">${I}</strong></span>
                ${B?`<span> ${B}</span>`:""}
            </div>
        `,e.style.borderLeft=`3px solid ${m}`,e.style.paddingLeft="12px",e.style.background=`linear-gradient(135deg, ${m}08, transparent)`,e.style.borderRadius="0 8px 8px 0",e.style.padding="12px"}updateVisuals(t){if(!this.mask)try{this.mask=xn.getInstance()}catch(e){console.warn("Mask instance not ready yet",e)}this.mask&&this.mask.updateVisualization?(console.log("[AppController] Updating mask visualization with data:",t.date),this.mask.updateVisualization(t)):console.warn("[AppController] Mask not available for visualization update")}drawSparkline(t,e,n=null){const i=document.getElementById(t);if(!i)return;const r=i.getContext("2d"),a=i.width,o=i.height;if(r.clearRect(0,0,a,o),!e||e.length<2)return;const l=Math.min(...e),f=Math.max(...e)-l||1,m=e[e.length-1]>=e[0],g=n||(m?"#00ffaa":"#ff5050");r.strokeStyle=g,r.lineWidth=1.5,r.lineJoin="round",r.beginPath(),e.forEach((v,c)=>{const _=c/(e.length-1)*a,y=o-(v-l)/f*(o-4)-2;c===0?r.moveTo(_,y):r.lineTo(_,y)}),r.stroke();const p=r.createLinearGradient(0,0,0,o);p.addColorStop(0,g),p.addColorStop(1,"rgba(0,0,0,0)"),r.globalAlpha=.15,r.fillStyle=p,r.lineTo(a,o),r.lineTo(0,o),r.fill(),r.globalAlpha=1}updateLeaderboard(t){const e=document.getElementById("leaders-list"),n=document.getElementById("laggards-list");if(!t.sectorMap||!e||!n)return;const i=Object.entries(t.sectorMap).map(([a,o])=>({id:a,val:typeof o=="object"?o.change:o}));i.sort((a,o)=>o.val-a.val);const r=a=>`<div>${a.id}: ${a.val>0?"+":""}${a.val}%</div>`;e.innerHTML=i.slice(0,3).map(r).join(""),n.innerHTML=i.slice(-3).reverse().map(r).join("")}updateAIAnalystList(t,e){const n=document.getElementById("ai-signals-list");if(!n)return;let i=[];if(i.push(`System State: <span class="ai-signal">${t.moodState}</span> (${t.regime})`),t.marketChangePercent>1?i.push('<span class="ai-signal" style="color:#00ffaa">Strong Breadth</span>: Buyers dominant (>1%)'):t.marketChangePercent<-1&&i.push('<span class="ai-signal" style="color:#ff5050">Distribution</span>: Heavy selling pressure'),t.sectorMap){const f=Object.entries(t.sectorMap).map(([_,y])=>({id:_,val:y.change||y}));f.sort((_,y)=>y.val-_.val);const m=f[0],g=f[f.length-1],p={XLK:"Tech",XLF:"Financials",XLV:"Health",XLE:"Energy",XLI:"Industrials",XLU:"Utilities"},v=p[m.id]||m.id,c=p[g.id]||g.id;m.val>.5&&i.push(`Rotation into <span class="ai-signal">${v}</span> (+${m.val}%)`),g.val<-.5&&i.push(`Weakness in <span class="ai-signal" style="color:#ff5050">${c}</span> (${g.val}%)`)}const r=t.rsi||50;r>75?i.push(`RSI Divergence: <span class="ai-signal" style="color:#ff5050">Overbought</span> (${r.toFixed(0)})`):r<25&&i.push(`RSI Compression: <span class="ai-signal" style="color:#00ffaa">Oversold</span> (${r.toFixed(0)})`);const a=parseFloat(t.vix);a>30&&i.push(`Volatility Spiking: VIX ${a} (Defensive Posture)`),t.volumeRatio>1.5?i.push(`Institutional Volume: ${t.volumeRatio}x Average`):t.volumeRatio<.6&&i.push(`Low Liquidity Environment (${t.volumeRatio}x Vol)`);const o=t.tenYearYield||4;o>4.5?i.push(`Macro Headwind: 10Y Yields Elevated (${o}%)`):o<3.5&&i.push(`Yield Support: Rates stabilizing (${o}%)`);const l=["Pattern: Bull Flag detected on hourly.","Pattern: Consolidation ahead of breakout.","Sentiment: Retail sentiment is cooling.","Flows: Net positive delta in dark pools.","Algo: HFT activity detected at close."],u=t.date.split("").reduce((f,m)=>f+m.charCodeAt(0),0);i.push(l[u%l.length]),n.innerHTML=i.map(f=>`<li>${f}</li>`).join("")}updateUI(t,e,n){const i=document.getElementById("market-status");if(i&&(i.classList.toggle("hidden",!e),e&&(i.textContent=`Market Closed on ${n}. Data from ${t.date}`)),document.getElementById("val-index")){const k=t.indexValue!==void 0?t.indexValue:0;document.getElementById("val-index").textContent=k.toLocaleString(void 0,{maximumFractionDigits:2});const O=document.getElementById("val-change");if(O){const $=parseFloat(t.marketChangePercent||0).toFixed(2);O.textContent=(t.marketChangePercent>0?"+":"")+$+"%",O.className="change-pill "+(t.marketChangePercent>0?"positive":"negative")}}if(document.getElementById("val-sp500")){const k=t.sp500Value!==void 0?t.sp500Value:0;document.getElementById("val-sp500").textContent=k.toLocaleString(void 0,{maximumFractionDigits:2});const O=document.getElementById("val-sp500-change");if(O){const $=parseFloat(t.sp500Change||0).toFixed(2);O.textContent=(t.sp500Change>0?"+":"")+$+"%",O.className="change-pill "+(t.sp500Change>0?"positive":"negative")}}const r=document.getElementById("val-volume");if(r){const k=t.volume;isNaN(k)?r.textContent=k||"--":r.textContent=k>1e9?(k/1e9).toFixed(1)+"B":(k/1e6).toFixed(1)+"M"}const a=document.getElementById("val-vix");if(a){const k=parseFloat(t.vix);a.textContent=isNaN(k)?"--":k.toFixed(2),isNaN(k)||(a.style.color=k>20?"#ff5050":k<15?"#00ffaa":"#ffffff")}const o=document.getElementById("val-52w-range");if(o){const k=t.yearLow?parseFloat(t.yearLow).toFixed(2):"--",O=t.yearHigh?parseFloat(t.yearHigh).toFixed(2):"--";o.textContent=t.yearLow&&t.yearHigh?`${k} - ${O}`:"--"}if(document.getElementById("val-gold")){const k=parseFloat(t.gold);document.getElementById("val-gold").textContent=isNaN(k)?"--":k.toLocaleString(void 0,{maximumFractionDigits:1})}if(document.getElementById("val-oil")){const k=parseFloat(t.oil);document.getElementById("val-oil").textContent=isNaN(k)?"--":k.toFixed(2)}if(this.drawIndexChart&&this.drawIndexChart(t),!this.marketDataService.dataMap)return;const l=Object.keys(this.marketDataService.dataMap).sort(),u=l.indexOf(t.date);let f=[],m=[],g=[],p=0,v=0,c=0;if(u!==-1){const k=Math.max(0,u-20),O=l.slice(k,u+1);f=O.map(U=>this.marketDataService.dataMap[U].indexValue),m=O.map(U=>this.marketDataService.dataMap[U].sp500Value),g=O.map(U=>this.marketDataService.dataMap[U].tenYearYield||4);const $=U=>U.length<2?0:(U[U.length-1]-U[0])/U[0]*100;p=$(f).toFixed(2),v=$(m).toFixed(2),c=$(g).toFixed(2)}this.drawSparkline("chart-nasdaq",f),this.drawSparkline("chart-sp500",m),this.drawSparkline("chart-yield",g,"#cc99ff");const _=(k,O,$)=>{const U=document.getElementById(k);U&&(U.textContent=O,U.style.color=$)},y=k=>k>=0?"#00ffaa":"#ff5050";_("val-index-mini",t.indexValue.toLocaleString(),"#fff"),_("pch-nasdaq",(p>0?"+":"")+p+"%",y(p)),_("val-sp500-mini",t.sp500Value.toLocaleString(),"#fff"),_("pch-sp500",(v>0?"+":"")+v+"%",y(v)),_("val-yield-mini",(t.tenYearYield||4)+"%","#fff"),_("pch-yield",(c>0?"+":"")+c+"%",y(c));const w=t.rsi||50,b=document.getElementById("meter-rsi"),C=document.getElementById("val-rsi");b&&(b.style.width=`${w}%`,b.style.backgroundColor=w>70?"#ff5050":w<30?"#00ffaa":"#ffcc00"),C&&(C.textContent=w.toFixed(1));const S=t.volumeRatio||1,D=document.getElementById("meter-rvol"),E=document.getElementById("val-rvol");if(D){const k=Math.min(100,S/2*100);D.style.width=`${k}%`,D.style.backgroundColor=S>1?"#00ffaa":"#ffffff"}if(E&&(E.textContent=S.toFixed(2)+"x"),this.updateLeaderboard(t),this.updateAIAnalystList(t),this.ui.headlinesContainer.innerHTML="",t.headlines.forEach(k=>{const O=typeof k=="object"&&k!==null,$=O?k.title:k,U=O?k.link:"#",H=document.createElement("p");H.style.margin="0",H.innerHTML=`<a href="${U}" target="_blank" rel="noopener noreferrer" style="cursor:pointer">${$}</a>`,this.ui.headlinesContainer.appendChild(H)}),this.ui.valSentiment){this.ui.valSentiment.textContent=t.moodState.toUpperCase();const k=t.fearGreedIndex;let O="NEUTRAL",$="#ffffff";k<=25?(O=`EXTREME FEAR (${k})`,$="#ff5050"):k<=45?(O=`FEAR (${k})`,$="#ffaa50"):k<=55?(O=`NEUTRAL (${k})`,$="#ffffff"):k<=75?(O=`GREED (${k})`,$="#50ffaa"):(O=`EXTREME GREED (${k})`,$="#00ffaa"),this.ui.valSentiment.textContent=O,this.ui.valSentiment.style.color=$}const I=document.getElementById("val-regime");I&&(I.textContent="CNN Fear & Greed Index");const T=document.getElementById("val-fear-greed");if(T&&t.fearGreedIndex!==void 0){const k=t.fearGreedIndex;let O=k,$="#ffffff";k<=25?(O=`${k}  Extreme Fear`,$="#ff5050"):k<=45?(O=`${k}  Fear`,$="#ffaa50"):k<=55?(O=`${k}  Neutral`,$="#ffffff"):k<=75?(O=`${k}  Greed`,$="#50ffaa"):(O=`${k}  Extreme Greed`,$="#00ffaa"),T.textContent=O,T.style.color=$}if(document.getElementById("val-yield-curve")){const k=parseFloat(t.yieldCurve);document.getElementById("val-yield-curve").textContent=isNaN(k)?"--":k.toFixed(2)+"%"}if(document.getElementById("val-dxy")){const k=parseFloat(t.dollarIndex);document.getElementById("val-dxy").textContent=isNaN(k)?"--":k.toFixed(2)}if(document.getElementById("val-dow")){const k=parseFloat(t.dowValue);document.getElementById("val-dow").textContent=isNaN(k)?"--":k.toLocaleString(void 0,{maximumFractionDigits:2});const O=document.getElementById("val-dow-change");if(O){const $=parseFloat(t.dowChange);isNaN($)?O.textContent="--":(O.textContent=($>0?"+":"")+$.toFixed(2)+"%",O.className="change-pill "+($>0?"positive":"negative"))}}this.renderTreemap(t),this.updateMarketBreadth(t);const B=document.getElementById("velocity-marker");B&&t.fearGreedIndex&&(B.style.left=t.fearGreedIndex+"%");const Y=document.getElementById("risk-marker"),P=document.getElementById("risk-val");if(Y&&t.fearGreedIndex!==void 0&&(Y.style.left=t.fearGreedIndex+"%",P)){const k=t.fearGreedIndex;k<40?(P.textContent="Risk Off",P.style.color="#ff5050"):k>60?(P.textContent="Risk On",P.style.color="#00ffaa"):(P.textContent="Neutral",P.style.color="#ffffff")}if(this.ui.timelineSlider&&this.marketDataService.dataMap){const O=Object.keys(this.marketDataService.dataMap).sort().indexOf(t.date);O!==-1&&(this.ui.timelineSlider.value=O,this.ui.timelineCurrent.textContent=t.date)}const A=document.getElementById("val-dow");A&&(A.textContent=t.dowValue?parseFloat(t.dowValue).toLocaleString(void 0,{maximumFractionDigits:2}):"--");const z=document.getElementById("val-dow-change");if(z){const k=t.dowChange||0;z.textContent=(k>0?"+":"")+k+"%",z.className="change-pill "+(k>=0?"positive":"negative")}this.ui.currentDataCache=t,this.drawIndexChart(t),this.drawYieldCurve(t);const W=document.getElementById("headlines-container");W&&t.headlines&&(W.innerHTML="",t.headlines.slice(0,10).forEach(k=>{const O=typeof k=="object"&&k!==null,$=O?k.title:k,U=O?k.link:"#",H=document.createElement("p");H.style.margin="0",H.style.marginBottom="6px",H.innerHTML=`<a href="${U}" target="_blank" rel="noopener noreferrer">${$}</a>`,W.appendChild(H)})),this.runAIPatternScan(t)}setupEventListeners(){var n,i,r,a,o;this.ui.btnToday&&this.ui.btnToday.addEventListener("click",()=>{this.stopPlay(),this.picker.setDate(new Date,!0)});const t=["nasdaq","sp500","dow"],e=l=>{this.activeChart=l;const u={nasdaq:"NASDAQ",sp500:"S&P 500",dow:"DOW JONES"},f=document.getElementById("chart-title");f&&(f.textContent=u[l]),["row-nasdaq","row-sp500","row-dow"].forEach(p=>{const v=document.getElementById(p);v&&v.classList.remove("active-row")});const m="row-"+l,g=document.getElementById(m);g&&g.classList.add("active-row"),this.ui.currentDataCache&&this.drawIndexChart(this.ui.currentDataCache)};(n=document.getElementById("row-nasdaq"))==null||n.addEventListener("click",()=>e("nasdaq")),(i=document.getElementById("row-sp500"))==null||i.addEventListener("click",()=>e("sp500")),(r=document.getElementById("row-dow"))==null||r.addEventListener("click",()=>e("dow")),(a=document.getElementById("btn-chart-prev"))==null||a.addEventListener("click",()=>{let l=t.indexOf(this.activeChart);l=(l-1+t.length)%t.length,e(t[l])}),(o=document.getElementById("btn-chart-next"))==null||o.addEventListener("click",()=>{let l=t.indexOf(this.activeChart);l=(l+1)%t.length,e(t[l])})}drawYieldCurve(t){const e=document.getElementById("yield-curve-chart");if(!e)return;const n=window.devicePixelRatio||1,i=e.getBoundingClientRect();e.width=i.width*n,e.height=i.height*n;const r=e.getContext("2d");r.scale(n,n);const a=i.width,o=i.height;r.clearRect(0,0,a,o);let l={};Array.isArray(t.yieldCurve)&&t.yieldCurve.forEach(P=>{l[P.maturity]=P.val});const u=l["3M"]||t.threeMonthYield||4.3,f=l["5Y"]||t.fiveYearYield||4,m=l["10Y"]||t.tenYearYield||4.2,g=l["30Y"]||t.thirtyYearYield||4.5,p=[{months:3,val:u},{months:60,val:f},{months:120,val:m},{months:360,val:g}],v=(P,A,z,W,k)=>z+(k-z)*(P-A)/(W-A),c=P=>{if(P<=p[0].months)return p[0].val;if(P>=p[p.length-1].months)return p[p.length-1].val;for(let A=0;A<p.length-1;A++)if(P>=p[A].months&&P<=p[A+1].months)return v(P,p[A].months,p[A].val,p[A+1].months,p[A+1].val);return m},y=[{label:"3M",months:3},{label:"6M",months:6},{label:"1Y",months:12},{label:"2Y",months:24},{label:"3Y",months:36},{label:"5Y",months:60},{label:"7Y",months:84},{label:"10Y",months:120},{label:"20Y",months:240},{label:"30Y",months:360}].map(P=>({maturity:P.label,val:c(P.months),isReal:P.months===3||P.months===60||P.months===120||P.months===360})),w=y.map(P=>P.val),b=Math.min(...w)-.2,C=Math.max(...w)+.2,S=C-b||1,D={left:35,right:10,top:15,bottom:20},E=a-D.left-D.right,I=o-D.top-D.bottom,T=P=>D.left+P/(y.length-1)*E,B=P=>D.top+I-(P-b)/S*I;r.strokeStyle="rgba(255, 255, 255, 0.1)",r.lineWidth=1,r.setLineDash([2,2]);for(let P=0;P<=4;P++){const A=D.top+I/4*P;r.beginPath(),r.moveTo(D.left,A),r.lineTo(a-D.right,A),r.stroke()}r.setLineDash([]),r.beginPath(),r.strokeStyle="#00ffcc",r.lineWidth=2,r.lineCap="round",r.lineJoin="round";for(let P=0;P<y.length;P++){const A=T(P),z=B(y[P].val);if(P===0)r.moveTo(A,z);else{const W=T(P-1),k=B(y[P-1].val),O=(W+A)/2;r.quadraticCurveTo(W+(A-W)*.5,k,O,(k+z)/2),r.quadraticCurveTo(O,z,A,z)}}r.stroke();const Y=r.createLinearGradient(0,D.top,0,o);Y.addColorStop(0,"rgba(0, 255, 204, 0.2)"),Y.addColorStop(1,"rgba(0, 255, 204, 0)"),r.lineTo(T(y.length-1),o),r.lineTo(T(0),o),r.closePath(),r.fillStyle=Y,r.fill(),y.forEach((P,A)=>{const z=T(A),W=B(P.val);r.beginPath(),P.isReal?(r.arc(z,W,4,0,Math.PI*2),r.fillStyle="#00ffcc"):(r.arc(z,W,2,0,Math.PI*2),r.fillStyle="#888888"),r.fill()}),r.fillStyle="rgba(255, 255, 255, 0.7)",r.font='10px "Space Mono", monospace',r.textAlign="center",y.forEach((P,A)=>{if(A%2===0||A===y.length-1){const z=T(A);r.fillText(P.maturity,z,o-3)}}),r.textAlign="right",r.fillStyle="rgba(255, 255, 255, 0.6)",r.font='10px "Space Mono", monospace',r.fillText(C.toFixed(1)+"%",D.left-3,D.top+4),r.fillText(b.toFixed(1)+"%",D.left-3,o-D.bottom),y[0].val>y[y.length-1].val&&(r.fillStyle="#ff5050",r.font='bold 10px "Space Mono", monospace',r.textAlign="right",r.fillText(" INVERTED",a-D.right,D.top))}drawIndexChart(t){if(!t)return;this.currentData=t;const e=document.getElementById("market-chart");if(!e||!this.marketDataService.dataMap)return;this.activeChart,this.activeChart;const n=e.getContext("2d"),i=e.width,r=e.height;n.clearRect(0,0,i,r);const a=Object.keys(this.marketDataService.dataMap).sort(),o=a.indexOf(t.date);if(o===-1)return;const l=Math.max(0,o-30),u=a.slice(l,o+1);let f=[];if(this.activeChart==="sp500"?f=u.map(_=>this.marketDataService.dataMap[_].sp500Value):this.activeChart==="dow"?f=u.map(_=>this.marketDataService.dataMap[_].dowValue||0):f=u.map(_=>this.marketDataService.dataMap[_].indexValue),f.length<2)return;const m=Math.min(...f),p=Math.max(...f)-m||1;n.beginPath();const v=f[f.length-1]>=f[0]?"#00ffaa":"#ff5050";n.strokeStyle=v,n.lineWidth=2;const c=n.createLinearGradient(0,0,0,r);c.addColorStop(0,v),c.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=c,n.moveTo(0,r),f.forEach((_,y)=>{const w=y/(f.length-1)*i,b=r-(_-m)/p*r*.8-r*.1;n.lineTo(w,b)}),n.lineTo(i,r),n.globalAlpha=.2,n.fill(),n.globalAlpha=1,n.beginPath(),f.forEach((_,y)=>{const w=y/(f.length-1)*i,b=r-(_-m)/p*r*.8-r*.1;y===0?n.moveTo(w,b):n.lineTo(w,b)}),n.stroke()}}document.addEventListener("DOMContentLoaded",()=>{console.log("[Main] Initializing WebGL Experience...");const s=document.querySelector("canvas.experience__canvas");s?new Qi(s,xn):console.error("Canvas element not found!"),console.log("[Main] Initializing AppController..."),window.app=new so});
