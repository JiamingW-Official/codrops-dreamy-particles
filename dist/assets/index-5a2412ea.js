var Ia=Object.defineProperty;var Pa=(o,t,e)=>t in o?Ia(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var Ai=(o,t,e)=>(Pa(o,typeof t!="symbol"?t+"":t,e),e);import{L as Aa,F as Fa,S as Oa,E as La,a as Zi,G as er,M as tr,D as nr,b as ai,R as Fi,V as ce,C as Ke,c as Ra,d as $a,H as Na,e as Ba,f as Ha,g as Ya,B as za,h as Wa,A as Va}from"./GPGPU-a4caf82c.js";class Ga{constructor(){this.dataMap=null}async init(){try{const t=await fetch("./data/market_data.json?v="+new Date().getTime());if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.dataMap=await t.json(),console.log("Market Data Loaded:",Object.keys(this.dataMap).length,"days")}catch(t){console.error("Failed to load market data:",t)}}getDataForDate(t){if(!this.dataMap)return console.warn("Market data not loaded yet."),this.getMockFallback(t);const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=`${e}-${n}-${i}`;let a=this.dataMap[r];if(!a)for(let s=1;s<=5;s++){const l=new Date(t);l.setDate(t.getDate()-s);const c=l.getFullYear(),u=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0"),m=`${c}-${u}-${d}`;if(this.dataMap[m]){a=this.dataMap[m];break}}return a||this.getMockFallback(t)}getMockFallback(t){return{date:t.toISOString().split("T")[0],fearGreedIndex:50,sentiment:0,marketChangePercent:0,headlines:["Data unavailable for this date","Please check fetch_data.py"],volatility:.2,vix:20,indexValue:0,sp500Value:0,volume:0,dayHigh:0,dayLow:0,yearHigh:0,yearLow:0,sectorStat:0,rsi:50,tenYearYield:4,moodState:"Neutral",regime:"Data Missing"}}}const ja="modulepreload",Ua=function(o){return"/codrops-dreamy-particles/"+o},Oi={},Xa=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=Ua(r),r in Oi)return;Oi[r]=!0;const a=r.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===r&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${s}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":ja,a||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),a)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};class ir extends Aa{constructor(t){super(t)}load(t,e,n,i){const r=this,a=new Fa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(s){const l=r.parse(JSON.parse(s));e&&e(l)},n,i)}parse(t){return new qa(t)}}class qa{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=Ka(t,e,this.data);for(let r=0,a=i.length;r<a;r++)n.push(...i[r].toShapes());return n}}function Ka(o,t,e){const n=Array.from(o),i=t/e.resolution,r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,a=[];let s=0,l=0;for(let c=0;c<n.length;c++){const u=n[c];if(u===`
`)s=0,l-=r;else{const d=Qa(u,i,s,l,e);s+=d.offsetX,a.push(d.path)}}return a}function Qa(o,t,e,n,i){const r=i.glyphs[o]||i.glyphs["?"];if(!r){console.error('THREE.Font: character "'+o+'" does not exists in font family '+i.familyName+".");return}const a=new Oa;let s,l,c,u,d,m,g,y;if(r.o){const f=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let v=0,_=f.length;v<_;)switch(f[v++]){case"m":s=f[v++]*t+e,l=f[v++]*t+n,a.moveTo(s,l);break;case"l":s=f[v++]*t+e,l=f[v++]*t+n,a.lineTo(s,l);break;case"q":c=f[v++]*t+e,u=f[v++]*t+n,d=f[v++]*t+e,m=f[v++]*t+n,a.quadraticCurveTo(d,m,c,u);break;case"b":c=f[v++]*t+e,u=f[v++]*t+n,d=f[v++]*t+e,m=f[v++]*t+n,g=f[v++]*t+e,y=f[v++]*t+n,a.bezierCurveTo(d,m,g,y,c,u);break}}return{offsetX:r.ha*t,path:a}}class rr extends La{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const i=n.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}class Ja{constructor(){this.experience=new Zi,this.scene=this.experience.scene,this.camera=this.experience.camera,this.group=new er,this.scene.add(this.group),this.words=[],this.font=null,this.loader=new ir,this.loader.load("/fonts/helvetiker_regular.typeface.json",t=>{this.font=t}),this.stopWords=new Set(["stock","market","daily","news","update","today","price","shares","gains","losses","drop","rise","fall","plunge","record","highs","lows","watch","moves","action","closely"])}updateHeadlines(t){if(!this.font||!t)return;this.words.forEach(l=>{l.geometry.dispose(),l.material.dispose(),this.group.remove(l)}),this.words=[];const n=t.map(l=>l.title).join(" ").toLowerCase().match(/\b\w+\b/g)||[],i={};n.forEach(l=>{l.length>3&&!this.stopWords.has(l)&&(i[l]=(i[l]||0)+1)});const a=Object.keys(i).sort((l,c)=>i[c]-i[l]).slice(0,8);if(a.length===0)return;const s=new tr({color:16777215,transparent:!0,opacity:.6,side:nr});a.forEach((l,c)=>{const u=new rr(l.toUpperCase(),{font:this.font,size:.15,height:.02,curveSegments:4});u.center();const d=new ai(u,s),m=Math.acos(-1+2*c/a.length),g=Math.sqrt(a.length*Math.PI)*m,y=3.5;d.position.setFromSphericalCoords(y,m,g),d.lookAt(0,0,0),d.userData={word:l,angle:Math.random()*Math.PI*2,speed:.2+Math.random()*.2,yOffset:(Math.random()-.5)*2},this.group.add(d),this.words.push(d)})}update(t){this.group.rotation.y=t*.1,this.group.rotation.z=Math.sin(t*.05)*.1,this.words.forEach(e=>{this.experience.camera&&this.experience.camera.instance&&e.lookAt(this.experience.camera.instance.position)})}checkIntersects(t){if(!this.group||this.words.length===0)return null;const e=t.intersectObjects(this.words,!1);if(e.length>0){this.words.forEach(i=>i.material.color.setHex(16777215));const n=e[0].object;return n.material.color.setHex(65450),n.userData.word}else this.words.forEach(n=>n.material.color.setHex(16777215));return null}}class Za{constructor(t,e,n=new ce(0,0,0),i=null,r=null,a=null,s=null){this.scene=t,this.mouse=e,this.camera=a,this.modelPosition=n,this.modelMesh=s,this.gpgpu=i,this.audio=r,this.group=new er,this.words=[],this.rotationSpeed=0,this.targetRotation=0,this.currentRotation=0,this.particleProximityData=null,this.time=0,this.raycaster=new Fi,this.mouseWorldPosition=new ce,this.hoverIntensity=0,this.collisionRaycaster=new Fi,this.radius=.5,this.tiltAngle=40*Math.PI/180,this.rotationAngle=Math.PI/4,this.fontSize=.018,this.wordSpacing=.12,this.testWords=["Bullish","Optimistic","Growth","Momentum","Confidence","Rally","Strength","Gains","Prosperity","Success","Victory","Triumph","Advance","Progress","Boom","Surge","Climb","Rise","Soar","Thrive","Flourish","Expand","Increase","Upward","Peak","Summit","Top","High","Elevate","Ascend","Lift","Boost"],this.currentDate=null}async init(){try{if(console.log("WordRing: Starting initialization..."),console.log("WordRing: Scene:",this.scene),console.log("WordRing: Mouse:",this.mouse),!this.scene){console.error("WordRing: Scene is not available");return}if(!this.mouse){console.error("WordRing: Mouse is not available");return}const t=new ir,e="https://threejs.org/examples/fonts/helvetiker_regular.typeface.json";console.log("WordRing: Loading font from",e);const n=new Promise((i,r)=>{const a=setTimeout(()=>{r(new Error("Font loading timeout"))},1e4);t.load(e,s=>{clearTimeout(a),console.log("WordRing: Font loaded successfully"),i(s)},void 0,s=>{clearTimeout(a),console.error("WordRing: Error loading font:",s),r(s)})});this.font=await n,console.log("WordRing: Font ready, creating ring..."),this.createRing(),this.scene.add(this.group),console.log("WordRing: Group added to scene"),console.log("WordRing: Group position:",this.group.position)}catch(t){console.error("WordRing: Initialization failed:",t)}}createRing(){if(!this.font){console.warn("WordRing: Font not loaded, cannot create ring");return}this.words.forEach(i=>{this.group.remove(i.mesh),i.mesh.geometry.dispose(),i.mesh.material.dispose()}),this.words=[],this.testWords.length;const t=.04,e=this.wordSpacing*.08;let n=0;this.testWords.forEach((i,r)=>{const s=Math.floor(n/(Math.PI*2))*t,l=i.split(""),c=l.length,d=this.fontSize*.4*c/this.radius,m=d/c,g=n;n+=d+e,l.forEach((y,f)=>{const v=g+(f-(c-1)/2)*m,_=Math.cos(v)*this.radius,b=Math.sin(v)*Math.cos(this.tiltAngle)*this.radius+s,w=Math.sin(v)*Math.sin(this.tiltAngle)*this.radius,C=new rr(y,{font:this.font,size:this.fontSize,depth:0,curveSegments:4,bevelEnabled:!1});C.computeBoundingBox();const E=new Ke(16766115),M={h:0,s:0,l:0};E.getHSL(M),M.s*=.7;const T=new Ke().setHSL(M.h,M.s,M.l),I=new Ra({color:T,emissive:T,emissiveIntensity:.8,transparent:!0,opacity:.45,side:nr,depthWrite:!0,depthTest:!0}),S=new ai(C,I);S.userData.originalPosition=new ce(_,b,w),S.position.set(_,b,w);const B=new ce(_,b,w).normalize(),W=-Math.sin(v),P=Math.cos(v)*Math.cos(this.tiltAngle),F=Math.cos(v)*Math.sin(this.tiltAngle),H=new ce(W,P,F).normalize(),V=new ce().crossVectors(H,B).normalize(),j=B.clone().multiplyScalar(-1),D=new ce(S.position.x+j.x*200,S.position.y+j.y*200,S.position.z+j.z*200);S.up.copy(V),S.lookAt(D),this.words.push({mesh:S,angle:v,basePosition:new ce(_,b,w),letter:y}),this.group.add(S)})}),this.group.position.copy(this.modelPosition)}update(){if(!this.mouse||!this.mouse.cursorPosition)return;this.time=performance.now()*.001;const t=this.mouse.cursorPosition.x||0;this.targetRotation=t*Math.PI*.5,this.currentRotation+=(this.targetRotation-this.currentRotation)*.1,this.group.rotation.y=this.rotationAngle+this.currentRotation,this.applyAudioVibration(),this.updateMouseHover(),this.updateParticleInteraction()}updateCollisionDetection(){}updateMouseHover(){var t,e;if(!(!this.mouse||!this.camera||!this.words.length))try{const n=((t=this.mouse.cursorPosition)==null?void 0:t.x)||0,i=((e=this.mouse.cursorPosition)==null?void 0:e.y)||0,r=this.camera.target||this.camera;if(!r)return;this.raycaster.setFromCamera(new $a(n,i),r);const a=this.words.map(c=>c.mesh).filter(c=>c),s=this.raycaster.intersectObjects(a,!1);let l=0;if(s.length>0)l=1;else{const c=new ce;this.group.getWorldPosition(c);const u=c.distanceTo(r.position),d=new ce;d.copy(this.raycaster.ray.origin),d.add(this.raycaster.ray.direction.multiplyScalar(u));const m=d.distanceTo(c),g=this.radius*1.2;m<g&&(l=1-m/g,l=l*l)}this.words.forEach((c,u)=>{if(!c.mesh||!c.mesh.material)return;const d=c.mesh.material,m=.8,g=s.some(w=>w.object===c.mesh);let y=0;if(g)y=1;else{const w=new ce;c.mesh.getWorldPosition(w);const C=w.distanceTo(r.position),E=new ce;E.copy(this.raycaster.ray.origin),E.add(this.raycaster.ray.direction.multiplyScalar(C));const M=w.distanceTo(E),T=this.fontSize*3;M<T&&(y=(1-M/T)*l,y=y*y)}d.emissiveIntensity=m+y*1;const f=new Ke(16766115),v={h:0,s:0,l:0};f.getHSL(v),v.s*=.7;const _=y*.6,b=new Ke().setHSL(v.h+_*.2,v.s+_*.5,v.l+_*.4);d.emissive.copy(b)})}catch{}}applyAudioVibration(){if(!(!this.audio||!this.audio.ready||!this.words.length))try{const{bass:t,mid:e,high:n,level:i}=this.audio.frequencyData||{bass:0,mid:0,high:0,level:0},r=t*.03,a=e*.02,s=n*.015;this.words.forEach((l,c)=>{if(!l.mesh||!l.mesh.userData.originalPosition)return;const u=l.mesh.userData.originalPosition,d=l.mesh,m=new ce().subVectors(u,new ce(0,0,0)).normalize(),g=new ce(-m.z,0,m.x).normalize(),y=c*.1,f=Math.sin(this.time*2+y)*r,v=Math.cos(this.time*3+y)*a,_=Math.sin(this.time*5+y)*s,b=u.clone();b.add(m.multiplyScalar(f+v*.5)),b.add(g.multiplyScalar(_)),d.position.copy(b)})}catch{}}updateParticleInteraction(){var t;if(!(!this.gpgpu||!this.gpgpu.material||!this.gpgpu.material.uniforms))try{if(!((t=this.gpgpu.material.uniforms.uPositionTexture)==null?void 0:t.value))return;this.words.forEach((n,i)=>{if(!n.mesh||!n.mesh.material)return;const r=n.mesh.material,a=.8,s=this.time,u=(Math.sin(s*2+i*.1)*.5+.5)*.3*(.8+Math.sin(i*.1+s)*.2);r.emissiveIntensity=a+u*.6;const d=new Ke(16766115),m={h:0,s:0,l:0};d.getHSL(m),m.s*=.7;const g=u*.4,y=new Ke().setHSL(m.h+g*.15,m.s+g*.3,m.l+g*.2);if(r.emissive.copy(y),!n.mesh.userData.isColliding){n.mesh.userData.baseScale||(n.mesh.userData.baseScale=1);const f=n.mesh.userData.baseScale,v=1+u*.2;n.mesh.scale.setScalar(f*v)}})}catch{}}setWords(t){this.words.forEach(e=>{this.group.remove(e.mesh),e.mesh.geometry.dispose(),e.mesh.material.dispose()}),this.words=[],this.testWords=t||this.testWords,this.createRing()}setModelPosition(t){t&&(this.modelPosition.copy(t),this.group&&(this.group.position.copy(t),console.log("WordRing: Position updated to",t)))}setRotationAngle(t){this.rotationAngle=t}setModelMesh(t){}async updateWordsForDate(t,e){if(this.currentDate===t){console.log("WordRing: Words already loaded for",t);return}if(console.log("WordRing: Updating words for date:",t),e&&e.poeticWords&&Array.isArray(e.poeticWords)){console.log("WordRing: Using words from market data:",e.poeticWords.length,"words"),this.setWords(e.poeticWords),this.currentDate=t,this.updateRotationFromMarketConditions(e);return}console.log("WordRing: Generating words client-side for",t);const n=this.generateWordsClientSide(e);this.setWords(n),this.currentDate=t}updateRotationFromMarketConditions(t){if(!t)return;const e=t.fearGreedIndex||50,n=t.vix||20;(t.moodState||"Neutral").toLowerCase(),(t.regime||"Neutral").toLowerCase();let i=5;e<=25?n>30?i=1:(n>=20,i=2):e<=45?n>30?i=3:(n>=20,i=4):e<=55?n<15?i=12:n<20?i=5:n<=30?i=6:i=11:e<=75?n<20?i=7:n<=30?i=8:i=11:n<20?i=9:n<=30?i=10:i=11;const r=Math.PI*2/12;this.rotationAngle=(i-1)*r,this.group&&(this.group.rotation.y=this.rotationAngle+this.currentRotation),console.log(`WordRing: Market condition type ${i}, rotation angle: ${(this.rotationAngle*180/Math.PI).toFixed(1)}Â°`)}generateWordsClientSide(t){const e=[],n=["Bullish","Optimistic","Growth","Momentum","Confidence","Rally","Strength","Gains","Prosperity","Success","Victory","Triumph","Advance","Progress","Boom","Surge","Climb","Rise","Soar","Thrive","Flourish","Expand","Increase","Upward","Peak"];for(let i=0;i<160;i++)e.push(n[i%n.length]+(i>n.length?i:""));return e}dispose(){this.words.forEach(t=>{t.mesh&&(this.group.remove(t.mesh),t.mesh.geometry&&t.mesh.geometry.dispose(),t.mesh.material&&t.mesh.material.dispose())}),this.words=[],this.group&&this.scene&&this.scene.remove(this.group)}}function qe(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function ar(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ft={duration:.5,overwrite:!1,delay:0},si,ge,ee,Ne=1e8,Z=1/Ne,Wn=Math.PI*2,es=Wn/4,ts=0,sr=Math.sqrt,ns=Math.cos,is=Math.sin,de=function(t){return typeof t=="string"},re=function(t){return typeof t=="function"},Je=function(t){return typeof t=="number"},oi=function(t){return typeof t>"u"},Ue=function(t){return typeof t=="object"},be=function(t){return t!==!1},li=function(){return typeof window<"u"},on=function(t){return re(t)||de(t)},or=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},pe=Array.isArray,Vn=/(?:-?\.?\d|\.)+/gi,lr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,St=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Tn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,cr=/[+-]=-?[.\d]+/,ur=/[^,'"\[\]\s]+/gi,rs=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ne,We,Gn,ci,Oe={},hn={},dr,fr=function(t){return(hn=xt(t,Oe))&&Se},ui=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},jt=function(t,e){return!e&&console.warn(t)},hr=function(t,e){return t&&(Oe[t]=e)&&hn&&(hn[t]=e)||Oe},Ut=function(){return 0},as={suppressEvents:!0,isStart:!0,kill:!1},un={suppressEvents:!0,kill:!1},ss={suppressEvents:!0},di={},at=[],jn={},mr,Ie={},In={},Li=30,dn=[],fi="",hi=function(t){var e=t[0],n,i;if(Ue(e)||re(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(i=dn.length;i--&&!dn[i].targetTest(e););n=dn[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Nr(t[i],n)))||t.splice(i,1);return t},pt=function(t){return t._gsap||hi(Be(t))[0]._gsap},gr=function(t,e,n){return(n=t[e])&&re(n)?t[e]():oi(n)&&t.getAttribute&&t.getAttribute(e)||n},Me=function(t,e){return(t=t.split(",")).forEach(e)||t},ae=function(t){return Math.round(t*1e5)/1e5||0},ue=function(t){return Math.round(t*1e7)/1e7||0},Et=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+i:n==="-"?t-i:n==="*"?t*i:t/i},os=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},mn=function(){var t=at.length,e=at.slice(0),n,i;for(jn={},at.length=0,n=0;n<t;n++)i=e[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},pr=function(t,e,n,i){at.length&&!ge&&mn(),t.render(e,n,i||ge&&e<0&&(t._initted||t._startAt)),at.length&&!ge&&mn()},vr=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ur).length<2?e:de(t)?t.trim():t},yr=function(t){return t},He=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},ls=function(t){return function(e,n){for(var i in n)i in e||i==="duration"&&t||i==="ease"||(e[i]=n[i])}},xt=function(t,e){for(var n in e)t[n]=e[n];return t},Ri=function o(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=Ue(e[n])?o(t[n]||(t[n]={}),e[n]):e[n]);return t},gn=function(t,e){var n={},i;for(i in t)i in e||(n[i]=t[i]);return n},zt=function(t){var e=t.parent||ne,n=t.keyframes?ls(pe(t.keyframes)):He;if(be(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},cs=function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0},_r=function(t,e,n,i,r){n===void 0&&(n="_first"),i===void 0&&(i="_last");var a=t[i],s;if(r)for(s=e[r];a&&a[r]>s;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},wn=function(t,e,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},ot=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},vt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},us=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Un=function(t,e,n,i){return t._startAt&&(ge?t._startAt.revert(un):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},ds=function o(t){return!t||t._ts&&o(t.parent)},$i=function(t){return t._repeat?Ot(t._tTime,t=t.duration()+t._rDelay)*t:0},Ot=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},pn=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},bn=function(t){return t._end=ue(t._start+(t._tDur/Math.abs(t._ts||t._rts||Z)||0))},Mn=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=ue(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),bn(t),n._dirty||vt(n,t)),t},xr=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=pn(t.rawTime(),e),(!e._dur||en(0,e.totalDuration(),n)-e._tTime>Z)&&e.render(n,!0)),vt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Z}},Ve=function(t,e,n,i){return e.parent&&ot(e),e._start=ue((Je(n)?n:n||t!==ne?Re(t,n,e):t._time)+e._delay),e._end=ue(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),_r(t,e,"_first","_last",t._sort?"_start":0),Xn(e)||(t._recent=e),i||xr(t,e),t._ts<0&&Mn(t,t._tTime),t},wr=function(t,e){return(Oe.ScrollTrigger||ui("scrollTrigger",e))&&Oe.ScrollTrigger.create(e,t)},br=function(t,e,n,i,r){if(gi(t,e,r),!t._initted)return 1;if(!n&&t._pt&&!ge&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&mr!==Pe.frame)return at.push(t),t._lazy=[r,i],1},fs=function o(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||o(e))},Xn=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},hs=function(t,e,n,i){var r=t.ratio,a=e<0||!e&&(!t._start&&fs(t)&&!(!t._initted&&Xn(t))||(t._ts<0||t._dp._ts<0)&&!Xn(t))?0:1,s=t._rDelay,l=0,c,u,d;if(s&&t._repeat&&(l=en(0,t._tDur,e),u=Ot(l,s),t._yoyo&&u&1&&(a=1-a),u!==Ot(t._tTime,s)&&(r=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==r||ge||i||t._zTime===Z||!e&&t._zTime){if(!t._initted&&br(t,e,i,n,l))return;for(d=t._zTime,t._zTime=e||(n?Z:0),n||(n=e&&!d),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=l,c=t._pt;c;)c.r(a,c.d),c=c._next;e<0&&Un(t,e,n,!0),t._onUpdate&&!n&&Ae(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&Ae(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&ot(t,1),!n&&!ge&&(Ae(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},ms=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<e)return i;i=i._prev}},Lt=function(t,e,n,i){var r=t._repeat,a=ue(e)||0,s=t._tTime/t._tDur;return s&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:ue(a*(r+1)+t._rDelay*r):a,s>0&&!i&&Mn(t,t._tTime=t._tDur*s),t.parent&&bn(t),n||vt(t.parent,t),t},Ni=function(t){return t instanceof ye?vt(t):Lt(t,t._dur)},gs={_start:0,endTime:Ut,totalDuration:Ut},Re=function o(t,e,n){var i=t.labels,r=t._recent||gs,a=t.duration()>=Ne?r.endTime(!1):t._dur,s,l,c;return de(e)&&(isNaN(e)||e in i)?(l=e.charAt(0),c=e.substr(-1)==="%",s=e.indexOf("="),l==="<"||l===">"?(s>=0&&(e=e.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(s<0?r:n).totalDuration()/100:1)):s<0?(e in i||(i[e]=a),i[e]):(l=parseFloat(e.charAt(s-1)+e.substr(s+1)),c&&n&&(l=l/100*(pe(n)?n[0]:n).totalDuration()),s>1?o(t,e.substr(0,s-1),n)+l:a+l)):e==null?a:+e},Wt=function(t,e,n){var i=Je(e[1]),r=(i?2:1)+(t<2?0:1),a=e[r],s,l;if(i&&(a.duration=e[1]),a.parent=n,t){for(s=a,l=n;l&&!("immediateRender"in s);)s=l.vars.defaults||{},l=be(l.vars.inherit)&&l.parent;a.immediateRender=be(s.immediateRender),t<2?a.runBackwards=1:a.startAt=e[r-1]}return new se(e[0],a,e[r+1])},ct=function(t,e){return t||t===0?e(t):e},en=function(t,e,n){return n<t?t:n>e?e:n},me=function(t,e){return!de(t)||!(e=rs.exec(t))?"":e[1]},ps=function(t,e,n){return ct(n,function(i){return en(t,e,i)})},qn=[].slice,Mr=function(t,e){return t&&Ue(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ue(t[0]))&&!t.nodeType&&t!==We},vs=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(i){var r;return de(i)&&!e||Mr(i,1)?(r=n).push.apply(r,Be(i)):n.push(i)})||n},Be=function(t,e,n){return ee&&!e&&ee.selector?ee.selector(t):de(t)&&!n&&(Gn||!Rt())?qn.call((e||ci).querySelectorAll(t),0):pe(t)?vs(t,n):Mr(t)?qn.call(t,0):t?[t]:[]},Kn=function(t){return t=Be(t)[0]||jt("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Be(e,n.querySelectorAll?n:n===t?jt("Invalid scope")||ci.createElement("div"):t)}},kr=function(t){return t.sort(function(){return .5-Math.random()})},Cr=function(t){if(re(t))return t;var e=Ue(t)?t:{each:t},n=yt(e.ease),i=e.from||0,r=parseFloat(e.base)||0,a={},s=i>0&&i<1,l=isNaN(i)||s,c=e.axis,u=i,d=i;return de(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!s&&l&&(u=i[0],d=i[1]),function(m,g,y){var f=(y||e).length,v=a[f],_,b,w,C,E,M,T,I,S;if(!v){if(S=e.grid==="auto"?0:(e.grid||[1,Ne])[1],!S){for(T=-Ne;T<(T=y[S++].getBoundingClientRect().left)&&S<f;);S<f&&S--}for(v=a[f]=[],_=l?Math.min(S,f)*u-.5:i%S,b=S===Ne?0:l?f*d/S-.5:i/S|0,T=0,I=Ne,M=0;M<f;M++)w=M%S-_,C=b-(M/S|0),v[M]=E=c?Math.abs(c==="y"?C:w):sr(w*w+C*C),E>T&&(T=E),E<I&&(I=E);i==="random"&&kr(v),v.max=T-I,v.min=I,v.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(S>f?f-1:c?c==="y"?f/S:S:Math.max(S,f/S))||0)*(i==="edges"?-1:1),v.b=f<0?r-f:r,v.u=me(e.amount||e.each)||0,n=n&&f<0?Lr(n):n}return f=(v[m]-v.min)/v.max||0,ue(v.b+(n?n(f):f)*v.v)+v.u}},Qn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=ue(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(Je(n)?0:me(n))}},Sr=function(t,e){var n=pe(t),i,r;return!n&&Ue(t)&&(i=n=t.radius||Ne,t.values?(t=Be(t.values),(r=!Je(t[0]))&&(i*=i)):t=Qn(t.increment)),ct(e,n?re(t)?function(a){return r=t(a),Math.abs(r-a)<=i?r:a}:function(a){for(var s=parseFloat(r?a.x:a),l=parseFloat(r?a.y:0),c=Ne,u=0,d=t.length,m,g;d--;)r?(m=t[d].x-s,g=t[d].y-l,m=m*m+g*g):m=Math.abs(t[d]-s),m<c&&(c=m,u=d);return u=!i||c<=i?t[u]:a,r||u===a||Je(a)?u:u+me(a)}:Qn(t))},Dr=function(t,e,n,i){return ct(pe(t)?!e:n===!0?!!(n=0):!i,function(){return pe(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*i)/i})},ys=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){return e.reduce(function(r,a){return a(r)},i)}},_s=function(t,e){return function(n){return t(parseFloat(n))+(e||me(n))}},xs=function(t,e,n){return Tr(t,e,0,1,n)},Er=function(t,e,n){return ct(n,function(i){return t[~~e(i)]})},ws=function o(t,e,n){var i=e-t;return pe(t)?Er(t,o(0,t.length),e):ct(n,function(r){return(i+(r-t)%i)%i+t})},bs=function o(t,e,n){var i=e-t,r=i*2;return pe(t)?Er(t,o(0,t.length-1),e):ct(n,function(a){return a=(r+(a-t)%r)%r||0,t+(a>i?r-a:a)})},Xt=function(t){for(var e=0,n="",i,r,a,s;~(i=t.indexOf("random(",e));)a=t.indexOf(")",i),s=t.charAt(i+7)==="[",r=t.substr(i+7,a-i-7).match(s?ur:Vn),n+=t.substr(e,i-e)+Dr(s?r:+r[0],s?0:+r[1],+r[2]||1e-5),e=a+1;return n+t.substr(e,t.length-e)},Tr=function(t,e,n,i,r){var a=e-t,s=i-n;return ct(r,function(l){return n+((l-t)/a*s||0)})},Ms=function o(t,e,n,i){var r=isNaN(t+e)?0:function(g){return(1-g)*t+g*e};if(!r){var a=de(t),s={},l,c,u,d,m;if(n===!0&&(i=1)&&(n=null),a)t={p:t},e={p:e};else if(pe(t)&&!pe(e)){for(u=[],d=t.length,m=d-2,c=1;c<d;c++)u.push(o(t[c-1],t[c]));d--,r=function(y){y*=d;var f=Math.min(m,~~y);return u[f](y-f)},n=e}else i||(t=xt(pe(t)?[]:{},t));if(!u){for(l in e)mi.call(s,t,l,"get",e[l]);r=function(y){return yi(y,s)||(a?t.p:t)}}}return ct(n,r)},Bi=function(t,e,n){var i=t.labels,r=Ne,a,s,l;for(a in i)s=i[a]-e,s<0==!!n&&s&&r>(s=Math.abs(s))&&(l=a,r=s);return l},Ae=function(t,e,n){var i=t.vars,r=i[e],a=ee,s=t._ctx,l,c,u;if(r)return l=i[e+"Params"],c=i.callbackScope||t,n&&at.length&&mn(),s&&(ee=s),u=l?r.apply(c,l):r.call(c),ee=a,u},Ht=function(t){return ot(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ge),t.progress()<1&&Ae(t,"onInterrupt"),t},Dt,Ir=[],Pr=function(t){if(t)if(t=!t.name&&t.default||t,li()||t.headless){var e=t.name,n=re(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:Ut,render:yi,add:mi,kill:Bs,modifier:Ns,rawVars:0},a={targetTest:0,get:0,getSetter:vi,aliases:{},register:0};if(Rt(),t!==i){if(Ie[e])return;He(i,He(gn(t,r),a)),xt(i.prototype,xt(r,gn(t,a))),Ie[i.prop=e]=i,t.targetTest&&(dn.push(i),di[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}hr(e,i),t.register&&t.register(Se,i,ke)}else Ir.push(t)},J=255,Yt={aqua:[0,J,J],lime:[0,J,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,J],navy:[0,0,128],white:[J,J,J],olive:[128,128,0],yellow:[J,J,0],orange:[J,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[J,0,0],pink:[J,192,203],cyan:[0,J,J],transparent:[J,J,J,0]},Pn=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*J+.5|0},Ar=function(t,e,n){var i=t?Je(t)?[t>>16,t>>8&J,t&J]:0:Yt.black,r,a,s,l,c,u,d,m,g,y;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Yt[t])i=Yt[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),a=t.charAt(2),s=t.charAt(3),t="#"+r+r+a+a+s+s+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&J,i&J,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&J,t&J]}else if(t.substr(0,3)==="hsl"){if(i=y=t.match(Vn),!e)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,a=u<=.5?u*(c+1):u+c-u*c,r=u*2-a,i.length>3&&(i[3]*=1),i[0]=Pn(l+1/3,r,a),i[1]=Pn(l,r,a),i[2]=Pn(l-1/3,r,a);else if(~t.indexOf("="))return i=t.match(lr),n&&i.length<4&&(i[3]=1),i}else i=t.match(Vn)||Yt.transparent;i=i.map(Number)}return e&&!y&&(r=i[0]/J,a=i[1]/J,s=i[2]/J,d=Math.max(r,a,s),m=Math.min(r,a,s),u=(d+m)/2,d===m?l=c=0:(g=d-m,c=u>.5?g/(2-d-m):g/(d+m),l=d===r?(a-s)/g+(a<s?6:0):d===a?(s-r)/g+2:(r-a)/g+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),n&&i.length<4&&(i[3]=1),i},Fr=function(t){var e=[],n=[],i=-1;return t.split(st).forEach(function(r){var a=r.match(St)||[];e.push.apply(e,a),n.push(i+=a.length+1)}),e.c=n,e},Hi=function(t,e,n){var i="",r=(t+i).match(st),a=e?"hsla(":"rgba(",s=0,l,c,u,d;if(!r)return t;if(r=r.map(function(m){return(m=Ar(m,e,1))&&a+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(u=Fr(t),l=n.c,l.join(i)!==u.c.join(i)))for(c=t.replace(st,"1").split(St),d=c.length-1;s<d;s++)i+=c[s]+(~l.indexOf(s)?r.shift()||a+"0,0,0,0)":(u.length?u:r.length?r:n).shift());if(!c)for(c=t.split(st),d=c.length-1;s<d;s++)i+=c[s]+r[s];return i+c[d]},st=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Yt)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),ks=/hsl[a]?\(/,Or=function(t){var e=t.join(" "),n;if(st.lastIndex=0,st.test(e))return n=ks.test(e),t[1]=Hi(t[1],n),t[0]=Hi(t[0],n,Fr(t[1])),!0},qt,Pe=function(){var o=Date.now,t=500,e=33,n=o(),i=n,r=1e3/240,a=r,s=[],l,c,u,d,m,g,y=function f(v){var _=o()-i,b=v===!0,w,C,E,M;if((_>t||_<0)&&(n+=_-e),i+=_,E=i-n,w=E-a,(w>0||b)&&(M=++d.frame,m=E-d.time*1e3,d.time=E=E/1e3,a+=w+(w>=r?4:r-w),C=1),b||(l=c(f)),C)for(g=0;g<s.length;g++)s[g](E,m,M,v)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(v){return m/(1e3/(v||60))},wake:function(){dr&&(!Gn&&li()&&(We=Gn=window,ci=We.document||{},Oe.gsap=Se,(We.gsapVersions||(We.gsapVersions=[])).push(Se.version),fr(hn||We.GreenSockGlobals||!We.gsap&&We||{}),Ir.forEach(Pr)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(v){return setTimeout(v,a-d.time*1e3+1|0)},qt=1,y(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),qt=0,c=Ut},lagSmoothing:function(v,_){t=v||1/0,e=Math.min(_||33,t)},fps:function(v){r=1e3/(v||240),a=d.time*1e3+r},add:function(v,_,b){var w=_?function(C,E,M,T){v(C,E,M,T),d.remove(w)}:v;return d.remove(v),s[b?"unshift":"push"](w),Rt(),w},remove:function(v,_){~(_=s.indexOf(v))&&s.splice(_,1)&&g>=_&&g--},_listeners:s},d}(),Rt=function(){return!qt&&Pe.wake()},X={},Cs=/^[\d.\-M][\d.\-,\s]/,Ss=/["']/g,Ds=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),i=n[0],r=1,a=n.length,s,l,c;r<a;r++)l=n[r],s=r!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,s),e[i]=isNaN(c)?c.replace(Ss,"").trim():+c,i=l.substr(s+1).trim();return e},Es=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)},Ts=function(t){var e=(t+"").split("("),n=X[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Ds(e[1])]:Es(t).split(",").map(vr)):X._CE&&Cs.test(t)?X._CE("",t):n},Lr=function(t){return function(e){return 1-t(1-e)}},Rr=function o(t,e){for(var n=t._first,i;n;)n instanceof ye?o(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?o(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next},yt=function(t,e){return t&&(re(t)?t:X[t]||Ts(t))||e},bt=function(t,e,n,i){n===void 0&&(n=function(l){return 1-e(1-l)}),i===void 0&&(i=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var r={easeIn:e,easeOut:n,easeInOut:i},a;return Me(t,function(s){X[s]=Oe[s]=r,X[a=s.toLowerCase()]=n;for(var l in r)X[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=X[s+"."+l]=r[l]}),r},$r=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},An=function o(t,e,n){var i=e>=1?e:1,r=(n||(t?.3:.45))/(e<1?e:1),a=r/Wn*(Math.asin(1/i)||0),s=function(u){return u===1?1:i*Math.pow(2,-10*u)*is((u-a)*r)+1},l=t==="out"?s:t==="in"?function(c){return 1-s(1-c)}:$r(s);return r=Wn/r,l.config=function(c,u){return o(t,c,u)},l},Fn=function o(t,e){e===void 0&&(e=1.70158);var n=function(a){return a?--a*a*((e+1)*a+e)+1:0},i=t==="out"?n:t==="in"?function(r){return 1-n(1-r)}:$r(n);return i.config=function(r){return o(t,r)},i};Me("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var e=t<5?t+1:t;bt(o+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});X.Linear.easeNone=X.none=X.Linear.easeIn;bt("Elastic",An("in"),An("out"),An());(function(o,t){var e=1/t,n=2*e,i=2.5*e,r=function(s){return s<e?o*s*s:s<n?o*Math.pow(s-1.5/t,2)+.75:s<i?o*(s-=2.25/t)*s+.9375:o*Math.pow(s-2.625/t,2)+.984375};bt("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);bt("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});bt("Circ",function(o){return-(sr(1-o*o)-1)});bt("Sine",function(o){return o===1?1:-ns(o*es)+1});bt("Back",Fn("in"),Fn("out"),Fn());X.SteppedEase=X.steps=Oe.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,a=1-Z;return function(s){return((i*en(0,a,s)|0)+r)*n}}};Ft.ease=X["quad.out"];Me("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return fi+=o+","+o+"Params,"});var Nr=function(t,e){this.id=ts++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:gr,this.set=e?e.getSetter:vi},Kt=function(){function o(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Lt(this,+e.duration,1,1),this.data=e.data,ee&&(this._ctx=ee,ee.data.push(this)),qt||Pe.wake()}var t=o.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Lt(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,i){if(Rt(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Mn(this,n),!r._dp||r.parent||xr(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ve(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Z||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),pr(this,n,i)),this},t.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+$i(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},t.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+$i(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,i):this._repeat?Ot(this._tTime,r)+1:1},t.timeScale=function(n,i){if(!arguments.length)return this._rts===-Z?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?pn(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Z?0:this._rts,this.totalTime(en(-Math.abs(this._delay),this._tDur,r),i!==!1),bn(this),us(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Z&&(this._tTime-=Z)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Ve(i,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(be(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?pn(i.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=ss);var i=ge;return ge=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ge=i,this},t.globalTime=function(n){for(var i=this,r=arguments.length?n:i.rawTime();i;)r=i._start+r/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Ni(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,Ni(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,i){return this.totalTime(Re(this,n),be(i))},t.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,be(i))},t.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},t.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Z:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Z,this},t.isActive=function(){var n=this.parent||this._dp,i=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=i&&r<this.endTime(!0)-Z)},t.eventCallback=function(n,i,r){var a=this.vars;return arguments.length>1?(i?(a[n]=i,r&&(a[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},t.then=function(n){var i=this;return new Promise(function(r){var a=re(n)?n:yr,s=function(){var c=i.then;i.then=null,re(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=c),r(a),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?s():i._prom=s})},t.kill=function(){Ht(this)},o}();He(Kt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Z,_prom:0,_ps:!1,_rts:1});var ye=function(o){ar(t,o);function t(n,i){var r;return n===void 0&&(n={}),r=o.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=be(n.sortChildren),ne&&Ve(n.parent||ne,qe(r),i),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&wr(qe(r),n.scrollTrigger),r}var e=t.prototype;return e.to=function(i,r,a){return Wt(0,arguments,this),this},e.from=function(i,r,a){return Wt(1,arguments,this),this},e.fromTo=function(i,r,a,s){return Wt(2,arguments,this),this},e.set=function(i,r,a){return r.duration=0,r.parent=this,zt(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new se(i,r,Re(this,a),1),this},e.call=function(i,r,a){return Ve(this,se.delayedCall(0,i,r),a)},e.staggerTo=function(i,r,a,s,l,c,u){return a.duration=r,a.stagger=a.stagger||s,a.onComplete=c,a.onCompleteParams=u,a.parent=this,new se(i,a,Re(this,l)),this},e.staggerFrom=function(i,r,a,s,l,c,u){return a.runBackwards=1,zt(a).immediateRender=be(a.immediateRender),this.staggerTo(i,r,a,s,l,c,u)},e.staggerFromTo=function(i,r,a,s,l,c,u,d){return s.startAt=a,zt(s).immediateRender=be(s.immediateRender),this.staggerTo(i,r,s,l,c,u,d)},e.render=function(i,r,a){var s=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:ue(i),d=this._zTime<0!=i<0&&(this._initted||!c),m,g,y,f,v,_,b,w,C,E,M,T;if(this!==ne&&u>l&&i>=0&&(u=l),u!==this._tTime||a||d){if(s!==this._time&&c&&(u+=this._time-s,i+=this._time-s),m=u,C=this._start,w=this._ts,_=!w,d&&(c||(s=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,v=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(v*100+i,r,a);if(m=ue(u%v),u===l?(f=this._repeat,m=c):(f=~~(u/v),f&&f===u/v&&(m=c,f--),m>c&&(m=c)),E=Ot(this._tTime,v),!s&&this._tTime&&E!==f&&this._tTime-E*v-this._dur<=0&&(E=f),M&&f&1&&(m=c-m,T=1),f!==E&&!this._lock){var I=M&&E&1,S=I===(M&&f&1);if(f<E&&(I=!I),s=I?0:u%c?c:u,this._lock=1,this.render(s||(T?0:ue(f*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&Ae(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),s&&s!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,S&&(this._lock=2,s=I?c:-1e-4,this.render(s,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Rr(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=ms(this,ue(s),ue(m)),b&&(u-=m-(m=b._start))),this._tTime=u,this._time=m,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,s=0),!s&&m&&!r&&!f&&(Ae(this,"onStart"),this._tTime!==u))return this;if(m>=s&&i>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&b!==g){if(g.parent!==this)return this.render(i,r,a);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,r,a),m!==this._time||!this._ts&&!_){b=0,y&&(u+=this._zTime=-Z);break}}g=y}else{g=this._last;for(var B=i<0?i:m;g;){if(y=g._prev,(g._act||B<=g._end)&&g._ts&&b!==g){if(g.parent!==this)return this.render(i,r,a);if(g.render(g._ts>0?(B-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(B-g._start)*g._ts,r,a||ge&&(g._initted||g._startAt)),m!==this._time||!this._ts&&!_){b=0,y&&(u+=this._zTime=B?-Z:Z);break}}g=y}}if(b&&!r&&(this.pause(),b.render(m>=s?0:-Z)._zTime=m>=s?1:-1,this._ts))return this._start=C,bn(this),this.render(i,r,a);this._onUpdate&&!r&&Ae(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&s)&&(C===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&ot(this,1),!r&&!(i<0&&!s)&&(u||s||!l)&&(Ae(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(i,r){var a=this;if(Je(r)||(r=Re(this,r,i)),!(i instanceof Kt)){if(pe(i))return i.forEach(function(s){return a.add(s,r)}),this;if(de(i))return this.addLabel(i,r);if(re(i))i=se.delayedCall(0,i);else return this}return this!==i?Ve(this,i,r):this},e.getChildren=function(i,r,a,s){i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),s===void 0&&(s=-Ne);for(var l=[],c=this._first;c;)c._start>=s&&(c instanceof se?r&&l.push(c):(a&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,r,a)))),c=c._next;return l},e.getById=function(i){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===i)return r[a]},e.remove=function(i){return de(i)?this.removeLabel(i):re(i)?this.killTweensOf(i):(wn(this,i),i===this._recent&&(this._recent=this._last),vt(this))},e.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ue(Pe.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),o.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},e.addLabel=function(i,r){return this.labels[i]=Re(this,r),this},e.removeLabel=function(i){return delete this.labels[i],this},e.addPause=function(i,r,a){var s=se.delayedCall(0,r||Ut,a);return s.data="isPause",this._hasPause=1,Ve(this,s,Re(this,i))},e.removePause=function(i){var r=this._first;for(i=Re(this,i);r;)r._start===i&&r.data==="isPause"&&ot(r),r=r._next},e.killTweensOf=function(i,r,a){for(var s=this.getTweensOf(i,a),l=s.length;l--;)nt!==s[l]&&s[l].kill(i,r);return this},e.getTweensOf=function(i,r){for(var a=[],s=Be(i),l=this._first,c=Je(r),u;l;)l instanceof se?os(l._targets,s)&&(c?(!nt||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&a.push(l):(u=l.getTweensOf(s,r)).length&&a.push.apply(a,u),l=l._next;return a},e.tweenTo=function(i,r){r=r||{};var a=this,s=Re(a,i),l=r,c=l.startAt,u=l.onStart,d=l.onStartParams,m=l.immediateRender,g,y=se.to(a,He({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:r.duration||Math.abs((s-(c&&"time"in c?c.time:a._time))/a.timeScale())||Z,onStart:function(){if(a.pause(),!g){var v=r.duration||Math.abs((s-(c&&"time"in c?c.time:a._time))/a.timeScale());y._dur!==v&&Lt(y,v,0,1).render(y._time,!0,!0),g=1}u&&u.apply(y,d||[])}},r));return m?y.render(0):y},e.tweenFromTo=function(i,r,a){return this.tweenTo(r,He({startAt:{time:Re(this,i)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(i){return i===void 0&&(i=this._time),Bi(this,Re(this,i))},e.previousLabel=function(i){return i===void 0&&(i=this._time),Bi(this,Re(this,i),1)},e.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Z)},e.shiftChildren=function(i,r,a){a===void 0&&(a=0);for(var s=this._first,l=this.labels,c;s;)s._start>=a&&(s._start+=i,s._end+=i),s=s._next;if(r)for(c in l)l[c]>=a&&(l[c]+=i);return vt(this)},e.invalidate=function(i){var r=this._first;for(this._lock=0;r;)r.invalidate(i),r=r._next;return o.prototype.invalidate.call(this,i)},e.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),vt(this)},e.totalDuration=function(i){var r=0,a=this,s=a._last,l=Ne,c,u,d;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(d=a.parent;s;)c=s._prev,s._dirty&&s.totalDuration(),u=s._start,u>l&&a._sort&&s._ts&&!a._lock?(a._lock=1,Ve(a,s,u-s._delay,1)._lock=0):l=u,u<0&&s._ts&&(r-=u,(!d&&!a._dp||d&&d.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),l=0),s._end>r&&s._ts&&(r=s._end),s=c;Lt(a,a===ne&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(i){if(ne._ts&&(pr(ne,pn(i,ne)),mr=Pe.frame),Pe.frame>=Li){Li+=Fe.autoSleep||120;var r=ne._first;if((!r||!r._ts)&&Fe.autoSleep&&Pe._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Pe.sleep()}}},t}(Kt);He(ye.prototype,{_lock:0,_hasPause:0,_forcing:0});var Is=function(t,e,n,i,r,a,s){var l=new ke(this._pt,t,e,0,1,Vr,null,r),c=0,u=0,d,m,g,y,f,v,_,b;for(l.b=n,l.e=i,n+="",i+="",(_=~i.indexOf("random("))&&(i=Xt(i)),a&&(b=[n,i],a(b,t,e),n=b[0],i=b[1]),m=n.match(Tn)||[];d=Tn.exec(i);)y=d[0],f=i.substring(c,d.index),g?g=(g+1)%5:f.substr(-5)==="rgba("&&(g=1),y!==m[u++]&&(v=parseFloat(m[u-1])||0,l._pt={_next:l._pt,p:f||u===1?f:",",s:v,c:y.charAt(1)==="="?Et(v,y)-v:parseFloat(y)-v,m:g&&g<4?Math.round:0},c=Tn.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=s,(cr.test(i)||_)&&(l.e=0),this._pt=l,l},mi=function(t,e,n,i,r,a,s,l,c,u){re(i)&&(i=i(r||0,t,a));var d=t[e],m=n!=="get"?n:re(d)?c?t[e.indexOf("set")||!re(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,g=re(d)?c?Ls:zr:pi,y;if(de(i)&&(~i.indexOf("random(")&&(i=Xt(i)),i.charAt(1)==="="&&(y=Et(m,i)+(me(m)||0),(y||y===0)&&(i=y))),!u||m!==i||Jn)return!isNaN(m*i)&&i!==""?(y=new ke(this._pt,t,e,+m||0,i-(m||0),typeof d=="boolean"?$s:Wr,0,g),c&&(y.fp=c),s&&y.modifier(s,this,t),this._pt=y):(!d&&!(e in t)&&ui(e,i),Is.call(this,t,e,m,i,g,l||Fe.stringFilter,c))},Ps=function(t,e,n,i,r){if(re(t)&&(t=Vt(t,r,e,n,i)),!Ue(t)||t.style&&t.nodeType||pe(t)||or(t))return de(t)?Vt(t,r,e,n,i):t;var a={},s;for(s in t)a[s]=Vt(t[s],r,e,n,i);return a},Br=function(t,e,n,i,r,a){var s,l,c,u;if(Ie[t]&&(s=new Ie[t]).init(r,s.rawVars?e[t]:Ps(e[t],i,r,a,n),n,i,a)!==!1&&(n._pt=l=new ke(n._pt,r,t,0,1,s.render,s,0,s.priority),n!==Dt))for(c=n._ptLookup[n._targets.indexOf(r)],u=s._props.length;u--;)c[s._props[u]]=l;return s},nt,Jn,gi=function o(t,e,n){var i=t.vars,r=i.ease,a=i.startAt,s=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,m=i.keyframes,g=i.autoRevert,y=t._dur,f=t._startAt,v=t._targets,_=t.parent,b=_&&_.data==="nested"?_.vars.targets:v,w=t._overwrite==="auto"&&!si,C=t.timeline,E,M,T,I,S,B,W,P,F,H,V,j,D;if(C&&(!m||!r)&&(r="none"),t._ease=yt(r,Ft.ease),t._yEase=d?Lr(yt(d===!0?r:d,Ft.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!C&&!!i.runBackwards,!C||m&&!i.stagger){if(P=v[0]?pt(v[0]).harness:0,j=P&&i[P.prop],E=gn(i,di),f&&(f._zTime<0&&f.progress(1),e<0&&u&&s&&!g?f.render(-1,!0):f.revert(u&&y?un:as),f._lazy=0),a){if(ot(t._startAt=se.set(v,He({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!f&&be(l),startAt:null,delay:0,onUpdate:c&&function(){return Ae(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ge||!s&&!g)&&t._startAt.revert(un),s&&y&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(u&&y&&!f){if(e&&(s=!1),T=He({overwrite:!1,data:"isFromStart",lazy:s&&!f&&be(l),immediateRender:s,stagger:0,parent:_},E),j&&(T[P.prop]=j),ot(t._startAt=se.set(v,T)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ge?t._startAt.revert(un):t._startAt.render(-1,!0)),t._zTime=e,!s)o(t._startAt,Z,Z);else if(!e)return}for(t._pt=t._ptCache=0,l=y&&be(l)||l&&!y,M=0;M<v.length;M++){if(S=v[M],W=S._gsap||hi(v)[M]._gsap,t._ptLookup[M]=H={},jn[W.id]&&at.length&&mn(),V=b===v?M:b.indexOf(S),P&&(F=new P).init(S,j||E,t,V,b)!==!1&&(t._pt=I=new ke(t._pt,S,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(R){H[R]=I}),F.priority&&(B=1)),!P||j)for(T in E)Ie[T]&&(F=Br(T,E,t,V,S,b))?F.priority&&(B=1):H[T]=I=mi.call(t,S,T,"get",E[T],V,b,0,i.stringFilter);t._op&&t._op[M]&&t.kill(S,t._op[M]),w&&t._pt&&(nt=t,ne.killTweensOf(S,H,t.globalTime(e)),D=!t.parent,nt=0),t._pt&&l&&(jn[W.id]=1)}B&&Gr(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!D,m&&e<=0&&C.render(Ne,!0,!0)},As=function(t,e,n,i,r,a,s,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,d,m,g;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,g=t._targets.length;g--;){if(u=m[g][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return Jn=1,t.vars[e]="+=0",gi(t,s),Jn=0,l?jt(e+" not eligible for reset"):1;c.push(u)}for(g=c.length;g--;)d=c[g],u=d._pt||d,u.s=(i||i===0)&&!r?i:u.s+(i||0)+a*u.c,u.c=n-u.s,d.e&&(d.e=ae(n)+me(d.e)),d.b&&(d.b=u.s+me(d.b))},Fs=function(t,e){var n=t[0]?pt(t[0]).harness:0,i=n&&n.aliases,r,a,s,l;if(!i)return e;r=xt({},e);for(a in i)if(a in r)for(l=i[a].split(","),s=l.length;s--;)r[l[s]]=r[a];return r},Os=function(t,e,n,i){var r=e.ease||i||"power1.inOut",a,s;if(pe(e))s=n[t]||(n[t]=[]),e.forEach(function(l,c){return s.push({t:c/(e.length-1)*100,v:l,e:r})});else for(a in e)s=n[a]||(n[a]=[]),a==="ease"||s.push({t:parseFloat(t),v:e[a],e:r})},Vt=function(t,e,n,i,r){return re(t)?t.call(e,n,i,r):de(t)&&~t.indexOf("random(")?Xt(t):t},Hr=fi+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Yr={};Me(Hr+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return Yr[o]=1});var se=function(o){ar(t,o);function t(n,i,r,a){var s;typeof i=="number"&&(r.duration=i,i=r,r=null),s=o.call(this,a?i:zt(i))||this;var l=s.vars,c=l.duration,u=l.delay,d=l.immediateRender,m=l.stagger,g=l.overwrite,y=l.keyframes,f=l.defaults,v=l.scrollTrigger,_=l.yoyoEase,b=i.parent||ne,w=(pe(n)||or(n)?Je(n[0]):"length"in i)?[n]:Be(n),C,E,M,T,I,S,B,W;if(s._targets=w.length?hi(w):jt("GSAP target "+n+" not found. https://gsap.com",!Fe.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=g,y||m||on(c)||on(u)){if(i=s.vars,C=s.timeline=new ye({data:"nested",defaults:f||{},targets:b&&b.data==="nested"?b.vars.targets:w}),C.kill(),C.parent=C._dp=qe(s),C._start=0,m||on(c)||on(u)){if(T=w.length,B=m&&Cr(m),Ue(m))for(I in m)~Hr.indexOf(I)&&(W||(W={}),W[I]=m[I]);for(E=0;E<T;E++)M=gn(i,Yr),M.stagger=0,_&&(M.yoyoEase=_),W&&xt(M,W),S=w[E],M.duration=+Vt(c,qe(s),E,S,w),M.delay=(+Vt(u,qe(s),E,S,w)||0)-s._delay,!m&&T===1&&M.delay&&(s._delay=u=M.delay,s._start+=u,M.delay=0),C.to(S,M,B?B(E,S,w):0),C._ease=X.none;C.duration()?c=u=0:s.timeline=0}else if(y){zt(He(C.vars.defaults,{ease:"none"})),C._ease=yt(y.ease||i.ease||"none");var P=0,F,H,V;if(pe(y))y.forEach(function(j){return C.to(w,j,">")}),C.duration();else{M={};for(I in y)I==="ease"||I==="easeEach"||Os(I,y[I],M,y.easeEach);for(I in M)for(F=M[I].sort(function(j,D){return j.t-D.t}),P=0,E=0;E<F.length;E++)H=F[E],V={ease:H.e,duration:(H.t-(E?F[E-1].t:0))/100*c},V[I]=H.v,C.to(w,V,P),P+=V.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||s.duration(c=C.duration())}else s.timeline=0;return g===!0&&!si&&(nt=qe(s),ne.killTweensOf(w),nt=0),Ve(b,qe(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),(d||!c&&!y&&s._start===ue(b._time)&&be(d)&&ds(qe(s))&&b.data!=="nested")&&(s._tTime=-Z,s.render(Math.max(0,-u)||0)),v&&wr(qe(s),v),s}var e=t.prototype;return e.render=function(i,r,a){var s=this._time,l=this._tDur,c=this._dur,u=i<0,d=i>l-Z&&!u?l:i<Z?0:i,m,g,y,f,v,_,b,w,C;if(!c)hs(this,i,r,a);else if(d!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(m=d,w=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(f*100+i,r,a);if(m=ue(d%f),d===l?(y=this._repeat,m=c):(y=~~(d/f),y&&y===ue(d/f)&&(m=c,y--),m>c&&(m=c)),_=this._yoyo&&y&1,_&&(C=this._yEase,m=c-m),v=Ot(this._tTime,f),m===s&&!a&&this._initted&&y===v)return this._tTime=d,this;y!==v&&(w&&this._yEase&&Rr(w,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==f&&this._initted&&(this._lock=a=1,this.render(ue(f*y),!0).invalidate()._lock=0))}if(!this._initted){if(br(this,u?i:m,a,r,d))return this._tTime=0,this;if(s!==this._time&&!(a&&this.vars.repeatRefresh&&y!==v))return this;if(c!==this._dur)return this.render(i,r,a)}if(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(C||this._ease)(m/c),this._from&&(this.ratio=b=1-b),m&&!s&&!r&&!y&&(Ae(this,"onStart"),this._tTime!==d))return this;for(g=this._pt;g;)g.r(b,g.d),g=g._next;w&&w.render(i<0?i:w._dur*w._ease(m/this._dur),r,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(u&&Un(this,i,r,a),Ae(this,"onUpdate")),this._repeat&&y!==v&&this.vars.onRepeat&&!r&&this.parent&&Ae(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&Un(this,i,!0,!0),(i||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&ot(this,1),!r&&!(u&&!s)&&(d||s||_)&&(Ae(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),o.prototype.invalidate.call(this,i)},e.resetTo=function(i,r,a,s,l){qt||Pe.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||gi(this,c),u=this._ease(c/this._dur),As(this,i,r,a,s,u,c,l)?this.resetTo(i,r,a,s,1):(Mn(this,0),this.parent||_r(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Ht(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,nt&&nt.vars.overwrite!==!0)._first||Ht(this),this.parent&&a!==this.timeline.totalDuration()&&Lt(this,this._dur*this.timeline._tDur/a,0,1),this}var s=this._targets,l=i?Be(i):s,c=this._ptLookup,u=this._pt,d,m,g,y,f,v,_;if((!r||r==="all")&&cs(s,l))return r==="all"&&(this._pt=0),Ht(this);for(d=this._op=this._op||[],r!=="all"&&(de(r)&&(f={},Me(r,function(b){return f[b]=1}),r=f),r=Fs(s,r)),_=s.length;_--;)if(~l.indexOf(s[_])){m=c[_],r==="all"?(d[_]=r,y=m,g={}):(g=d[_]=d[_]||{},y=r);for(f in y)v=m&&m[f],v&&((!("kill"in v.d)||v.d.kill(f)===!0)&&wn(this,v,"_pt"),delete m[f]),g!=="all"&&(g[f]=1)}return this._initted&&!this._pt&&u&&Ht(this),this},t.to=function(i,r){return new t(i,r,arguments[2])},t.from=function(i,r){return Wt(1,arguments)},t.delayedCall=function(i,r,a,s){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:s})},t.fromTo=function(i,r,a){return Wt(2,arguments)},t.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(i,r)},t.killTweensOf=function(i,r,a){return ne.killTweensOf(i,r,a)},t}(Kt);He(se.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Me("staggerTo,staggerFrom,staggerFromTo",function(o){se[o]=function(){var t=new ye,e=qn.call(arguments,0);return e.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,e)}});var pi=function(t,e,n){return t[e]=n},zr=function(t,e,n){return t[e](n)},Ls=function(t,e,n,i){return t[e](i.fp,n)},Rs=function(t,e,n){return t.setAttribute(e,n)},vi=function(t,e){return re(t[e])?zr:oi(t[e])&&t.setAttribute?Rs:pi},Wr=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},$s=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Vr=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(t===1&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},yi=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Ns=function(t,e,n,i){for(var r=this._pt,a;r;)a=r._next,r.p===i&&r.modifier(t,e,n),r=a},Bs=function(t){for(var e=this._pt,n,i;e;)i=e._next,e.p===t&&!e.op||e.op===t?wn(this,e,"_pt"):e.dep||(n=1),e=i;return!n},Hs=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},Gr=function(t){for(var e=t._pt,n,i,r,a;e;){for(n=e._next,i=r;i&&i.pr>e.pr;)i=i._next;(e._prev=i?i._prev:a)?e._prev._next=e:r=e,(e._next=i)?i._prev=e:a=e,e=n}t._pt=r},ke=function(){function o(e,n,i,r,a,s,l,c,u){this.t=n,this.s=r,this.c=a,this.p=i,this.r=s||Wr,this.d=l||this,this.set=c||pi,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=o.prototype;return t.modifier=function(n,i,r){this.mSet=this.mSet||this.set,this.set=Hs,this.m=n,this.mt=r,this.tween=i},o}();Me(fi+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return di[o]=1});Oe.TweenMax=Oe.TweenLite=se;Oe.TimelineLite=Oe.TimelineMax=ye;ne=new ye({sortChildren:!1,defaults:Ft,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fe.stringFilter=Or;var _t=[],fn={},Ys=[],Yi=0,zs=0,On=function(t){return(fn[t]||Ys).map(function(e){return e()})},Zn=function(){var t=Date.now(),e=[];t-Yi>2&&(On("matchMediaInit"),_t.forEach(function(n){var i=n.queries,r=n.conditions,a,s,l,c;for(s in i)a=We.matchMedia(i[s]).matches,a&&(l=1),a!==r[s]&&(r[s]=a,c=1);c&&(n.revert(),l&&e.push(n))}),On("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),Yi=t,On("matchMedia"))},jr=function(){function o(e,n){this.selector=n&&Kn(n),this.data=[],this._r=[],this.isReverted=!1,this.id=zs++,e&&this.add(e)}var t=o.prototype;return t.add=function(n,i,r){re(n)&&(r=i,i=n,n=re);var a=this,s=function(){var c=ee,u=a.selector,d;return c&&c!==a&&c.data.push(a),r&&(a.selector=Kn(r)),ee=a,d=i.apply(a,arguments),re(d)&&a._r.push(d),ee=c,a.selector=u,a.isReverted=!1,d};return a.last=s,n===re?s(a,function(l){return a.add(null,l)}):n?a[n]=s:s},t.ignore=function(n){var i=ee;ee=null,n(this),ee=i},t.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof o?n.push.apply(n,i.getTweens()):i instanceof se&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,i){var r=this;if(n?function(){for(var s=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return s.splice(s.indexOf(u),1)}));for(s.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),l=r.data.length;l--;)c=r.data[l],c instanceof ye?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof se)&&c.revert&&c.revert(n);r._r.forEach(function(u){return u(n,r)}),r.isReverted=!0}():this.data.forEach(function(s){return s.kill&&s.kill()}),this.clear(),i)for(var a=_t.length;a--;)_t[a].id===this.id&&_t.splice(a,1)},t.revert=function(n){this.kill(n||{})},o}(),Ws=function(){function o(e){this.contexts=[],this.scope=e,ee&&ee.data.push(this)}var t=o.prototype;return t.add=function(n,i,r){Ue(n)||(n={matches:n});var a=new jr(0,r||this.scope),s=a.conditions={},l,c,u;ee&&!a.selector&&(a.selector=ee.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(c in n)c==="all"?u=1:(l=We.matchMedia(n[c]),l&&(_t.indexOf(a)<0&&_t.push(a),(s[c]=l.matches)&&(u=1),l.addListener?l.addListener(Zn):l.addEventListener("change",Zn)));return u&&i(a,function(d){return a.add(null,d)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},o}(),vn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(i){return Pr(i)})},timeline:function(t){return new ye(t)},getTweensOf:function(t,e){return ne.getTweensOf(t,e)},getProperty:function(t,e,n,i){de(t)&&(t=Be(t)[0]);var r=pt(t||{}).get,a=n?yr:vr;return n==="native"&&(n=""),t&&(e?a((Ie[e]&&Ie[e].get||r)(t,e,n,i)):function(s,l,c){return a((Ie[s]&&Ie[s].get||r)(t,s,l,c))})},quickSetter:function(t,e,n){if(t=Be(t),t.length>1){var i=t.map(function(u){return Se.quickSetter(u,e,n)}),r=i.length;return function(u){for(var d=r;d--;)i[d](u)}}t=t[0]||{};var a=Ie[e],s=pt(t),l=s.harness&&(s.harness.aliases||{})[e]||e,c=a?function(u){var d=new a;Dt._pt=0,d.init(t,n?u+n:u,Dt,0,[t]),d.render(1,d),Dt._pt&&yi(1,Dt)}:s.set(t,l);return a?c:function(u){return c(t,l,n?u+n:u,s,1)}},quickTo:function(t,e,n){var i,r=Se.to(t,xt((i={},i[e]="+=0.1",i.paused=!0,i),n||{})),a=function(l,c,u){return r.resetTo(e,l,c,u)};return a.tween=r,a},isTweening:function(t){return ne.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=yt(t.ease,Ft.ease)),Ri(Ft,t||{})},config:function(t){return Ri(Fe,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach(function(s){return s&&!Ie[s]&&!Oe[s]&&jt(e+" effect requires "+s+" plugin.")}),In[e]=function(s,l,c){return n(Be(s),He(l||{},r),c)},a&&(ye.prototype[e]=function(s,l,c){return this.add(In[e](s,Ue(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){X[t]=yt(e)},parseEase:function(t,e){return arguments.length?yt(t,e):X},getById:function(t){return ne.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new ye(t),i,r;for(n.smoothChildTiming=be(t.smoothChildTiming),ne.remove(n),n._dp=0,n._time=n._tTime=ne._time,i=ne._first;i;)r=i._next,(e||!(!i._dur&&i instanceof se&&i.vars.onComplete===i._targets[0]))&&Ve(n,i,i._start-i._delay),i=r;return Ve(ne,n,0),n},context:function(t,e){return t?new jr(t,e):ee},matchMedia:function(t){return new Ws(t)},matchMediaRefresh:function(){return _t.forEach(function(t){var e=t.conditions,n,i;for(i in e)e[i]&&(e[i]=!1,n=1);n&&t.revert()})||Zn()},addEventListener:function(t,e){var n=fn[t]||(fn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=fn[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:ws,wrapYoyo:bs,distribute:Cr,random:Dr,snap:Sr,normalize:xs,getUnit:me,clamp:ps,splitColor:Ar,toArray:Be,selector:Kn,mapRange:Tr,pipe:ys,unitize:_s,interpolate:Ms,shuffle:kr},install:fr,effects:In,ticker:Pe,updateRoot:ye.updateRoot,plugins:Ie,globalTimeline:ne,core:{PropTween:ke,globals:hr,Tween:se,Timeline:ye,Animation:Kt,getCache:pt,_removeLinkedListItem:wn,reverting:function(){return ge},context:function(t){return t&&ee&&(ee.data.push(t),t._ctx=ee),ee},suppressOverwrites:function(t){return si=t}}};Me("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return vn[o]=se[o]});Pe.add(ye.updateRoot);Dt=vn.to({},{duration:0});var Vs=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Gs=function(t,e){var n=t._targets,i,r,a;for(i in e)for(r=n.length;r--;)a=t._ptLookup[r][i],a&&(a=a.d)&&(a._pt&&(a=Vs(a,i)),a&&a.modifier&&a.modifier(e[i],t,n[r],i))},Ln=function(t,e){return{name:t,rawVars:1,init:function(i,r,a){a._onInit=function(s){var l,c;if(de(r)&&(l={},Me(r,function(u){return l[u]=1}),r=l),e){l={};for(c in r)l[c]=e(r[c]);r=l}Gs(s,r)}}}},Se=vn.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,s,l;this.tween=n;for(a in e)l=t.getAttribute(a)||"",s=this.add(t,"setAttribute",(l||0)+"",e[a],i,r,0,0,a),s.op=a,s.b=l,this._props.push(a)},render:function(t,e){for(var n=e._pt;n;)ge?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Ln("roundProps",Qn),Ln("modifiers"),Ln("snap",Sr))||vn;se.version=ye.version=Se.version="3.12.5";dr=1;li()&&Rt();X.Power0;X.Power1;X.Power2;X.Power3;X.Power4;X.Linear;X.Quad;X.Cubic;X.Quart;X.Quint;X.Strong;X.Elastic;X.Back;X.SteppedEase;X.Bounce;X.Sine;X.Expo;X.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zi,it,Tt,_i,mt,Wi,xi,js=function(){return typeof window<"u"},Ze={},ft=180/Math.PI,It=Math.PI/180,Ct=Math.atan2,Vi=1e8,wi=/([A-Z])/g,Us=/(left|right|width|margin|padding|x)/i,Xs=/[\s,\(]\S/,Ge={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ei=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},qs=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Ks=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Qs=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Ur=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Xr=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Js=function(t,e,n){return t.style[e]=n},Zs=function(t,e,n){return t.style.setProperty(e,n)},eo=function(t,e,n){return t._gsap[e]=n},to=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},no=function(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},io=function(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)},ie="transform",Ce=ie+"Origin",ro=function o(t,e){var n=this,i=this.target,r=i.style,a=i._gsap;if(t in Ze&&r){if(this.tfm=this.tfm||{},t!=="transform")t=Ge[t]||t,~t.indexOf(",")?t.split(",").forEach(function(s){return n.tfm[s]=Qe(i,s)}):this.tfm[t]=a.x?a[t]:Qe(i,t),t===Ce&&(this.tfm.zOrigin=a.zOrigin);else return Ge.transform.split(",").forEach(function(s){return o.call(n,s,e)});if(this.props.indexOf(ie)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ce,e,"")),t=ie}(r||e)&&this.props.push(t,e,r[t])},qr=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ao=function(){var t=this.props,e=this.target,n=e.style,i=e._gsap,r,a;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?n[t[r]]=t[r+2]:n.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(wi,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=xi(),(!r||!r.isStart)&&!n[ie]&&(qr(n),i.zOrigin&&n[Ce]&&(n[Ce]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Kr=function(t,e){var n={target:t,props:[],revert:ao,save:ro};return t._gsap||Se.core.getCache(t),e&&e.split(",").forEach(function(i){return n.save(i)}),n},Qr,ti=function(t,e){var n=it.createElementNS?it.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):it.createElement(t);return n&&n.style?n:it.createElement(t)},je=function o(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(wi,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&o(t,$t(e)||e,1)||""},Gi="O,Moz,ms,Ms,Webkit".split(","),$t=function(t,e,n){var i=e||mt,r=i.style,a=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(Gi[a]+t in r););return a<0?null:(a===3?"ms":a>=0?Gi[a]:"")+t},ni=function(){js()&&window.document&&(zi=window,it=zi.document,Tt=it.documentElement,mt=ti("div")||{style:{}},ti("div"),ie=$t(ie),Ce=ie+"Origin",mt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Qr=!!$t("perspective"),xi=Se.core.reverting,_i=1)},Rn=function o(t){var e=ti("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,r=this.style.cssText,a;if(Tt.appendChild(e),e.appendChild(this),this.style.display="block",t)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),Tt.removeChild(e),this.style.cssText=r,a},ji=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Jr=function(t){var e;try{e=t.getBBox()}catch{e=Rn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Rn||(e=Rn.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+ji(t,["x","cx","x1"])||0,y:+ji(t,["y","cy","y1"])||0,width:0,height:0}:e},Zr=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Jr(t))},wt=function(t,e){if(e){var n=t.style,i;e in Ze&&e!==Ce&&(e=ie),n.removeProperty?(i=e.substr(0,2),(i==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(i==="--"?e:e.replace(wi,"-$1").toLowerCase())):n.removeAttribute(e)}},rt=function(t,e,n,i,r,a){var s=new ke(t._pt,e,n,0,1,a?Xr:Ur);return t._pt=s,s.b=i,s.e=r,t._props.push(n),s},Ui={deg:1,rad:1,turn:1},so={grid:1,flex:1},lt=function o(t,e,n,i){var r=parseFloat(n)||0,a=(n+"").trim().substr((r+"").length)||"px",s=mt.style,l=Us.test(e),c=t.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),d=100,m=i==="px",g=i==="%",y,f,v,_;if(i===a||!r||Ui[i]||Ui[a])return r;if(a!=="px"&&!m&&(r=o(t,e,n,"px")),_=t.getCTM&&Zr(t),(g||a==="%")&&(Ze[e]||~e.indexOf("adius")))return y=_?t.getBBox()[l?"width":"height"]:t[u],ae(g?r/y*d:r/100*y);if(s[l?"width":"height"]=d+(m?a:i),f=~e.indexOf("adius")||i==="em"&&t.appendChild&&!c?t:t.parentNode,_&&(f=(t.ownerSVGElement||{}).parentNode),(!f||f===it||!f.appendChild)&&(f=it.body),v=f._gsap,v&&g&&v.width&&l&&v.time===Pe.time&&!v.uncache)return ae(r/v.width*d);if(g&&(e==="height"||e==="width")){var b=t.style[e];t.style[e]=d+i,y=t[u],b?t.style[e]=b:wt(t,e)}else(g||a==="%")&&!so[je(f,"display")]&&(s.position=je(t,"position")),f===t&&(s.position="static"),f.appendChild(mt),y=mt[u],f.removeChild(mt),s.position="absolute";return l&&g&&(v=pt(f),v.time=Pe.time,v.width=f[u]),ae(m?y*r/d:y&&r?d/y*r:0)},Qe=function(t,e,n,i){var r;return _i||ni(),e in Ge&&e!=="transform"&&(e=Ge[e],~e.indexOf(",")&&(e=e.split(",")[0])),Ze[e]&&e!=="transform"?(r=Jt(t,i),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:_n(je(t,Ce))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=yn[e]&&yn[e](t,e,n)||je(t,e)||gr(t,e)||(e==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?lt(t,e,r,n)+n:r},oo=function(t,e,n,i){if(!n||n==="none"){var r=$t(e,t,1),a=r&&je(t,r,1);a&&a!==n?(e=r,n=a):e==="borderColor"&&(n=je(t,"borderTopColor"))}var s=new ke(this._pt,t.style,e,0,1,Vr),l=0,c=0,u,d,m,g,y,f,v,_,b,w,C,E;if(s.b=n,s.e=i,n+="",i+="",i==="auto"&&(f=t.style[e],t.style[e]=i,i=je(t,e)||i,f?t.style[e]=f:wt(t,e)),u=[n,i],Or(u),n=u[0],i=u[1],m=n.match(St)||[],E=i.match(St)||[],E.length){for(;d=St.exec(i);)v=d[0],b=i.substring(l,d.index),y?y=(y+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(y=1),v!==(f=m[c++]||"")&&(g=parseFloat(f)||0,C=f.substr((g+"").length),v.charAt(1)==="="&&(v=Et(g,v)+C),_=parseFloat(v),w=v.substr((_+"").length),l=St.lastIndex-w.length,w||(w=w||Fe.units[e]||C,l===i.length&&(i+=w,s.e+=w)),C!==w&&(g=lt(t,e,f,w)||0),s._pt={_next:s._pt,p:b||c===1?b:",",s:g,c:_-g,m:y&&y<4||e==="zIndex"?Math.round:0});s.c=l<i.length?i.substring(l,i.length):""}else s.r=e==="display"&&i==="none"?Xr:Ur;return cr.test(i)&&(s.e=0),this._pt=s,s},Xi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lo=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(t=n,n=i,i=t),e[0]=Xi[n]||n,e[1]=Xi[i]||i,e.join(" ")},co=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,i=n.style,r=e.u,a=n._gsap,s,l,c;if(r==="all"||r===!0)i.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)s=r[c],Ze[s]&&(l=1,s=s==="transformOrigin"?Ce:ie),wt(n,s);l&&(wt(n,ie),a&&(a.svg&&n.removeAttribute("transform"),Jt(n,1),a.uncache=1,qr(i)))}},yn={clearProps:function(t,e,n,i,r){if(r.data!=="isFromStart"){var a=t._pt=new ke(t._pt,e,n,0,0,co);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},Qt=[1,0,0,1,0,0],ea={},ta=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},qi=function(t){var e=je(t,ie);return ta(e)?Qt:e.substr(7).match(lr).map(ae)},bi=function(t,e){var n=t._gsap||pt(t),i=t.style,r=qi(t),a,s,l,c;return n.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Qt:r):(r===Qt&&!t.offsetParent&&t!==Tt&&!n.svg&&(l=i.display,i.display="block",a=t.parentNode,(!a||!t.offsetParent)&&(c=1,s=t.nextElementSibling,Tt.appendChild(t)),r=qi(t),l?i.display=l:wt(t,"display"),c&&(s?a.insertBefore(t,s):a?a.appendChild(t):Tt.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},ii=function(t,e,n,i,r,a){var s=t._gsap,l=r||bi(t,!0),c=s.xOrigin||0,u=s.yOrigin||0,d=s.xOffset||0,m=s.yOffset||0,g=l[0],y=l[1],f=l[2],v=l[3],_=l[4],b=l[5],w=e.split(" "),C=parseFloat(w[0])||0,E=parseFloat(w[1])||0,M,T,I,S;n?l!==Qt&&(T=g*v-y*f)&&(I=C*(v/T)+E*(-f/T)+(f*b-v*_)/T,S=C*(-y/T)+E*(g/T)-(g*b-y*_)/T,C=I,E=S):(M=Jr(t),C=M.x+(~w[0].indexOf("%")?C/100*M.width:C),E=M.y+(~(w[1]||w[0]).indexOf("%")?E/100*M.height:E)),i||i!==!1&&s.smooth?(_=C-c,b=E-u,s.xOffset=d+(_*g+b*f)-_,s.yOffset=m+(_*y+b*v)-b):s.xOffset=s.yOffset=0,s.xOrigin=C,s.yOrigin=E,s.smooth=!!i,s.origin=e,s.originIsAbsolute=!!n,t.style[Ce]="0px 0px",a&&(rt(a,s,"xOrigin",c,C),rt(a,s,"yOrigin",u,E),rt(a,s,"xOffset",d,s.xOffset),rt(a,s,"yOffset",m,s.yOffset)),t.setAttribute("data-svg-origin",C+" "+E)},Jt=function(t,e){var n=t._gsap||new Nr(t);if("x"in n&&!e&&!n.uncache)return n;var i=t.style,r=n.scaleX<0,a="px",s="deg",l=getComputedStyle(t),c=je(t,Ce)||"0",u,d,m,g,y,f,v,_,b,w,C,E,M,T,I,S,B,W,P,F,H,V,j,D,R,Y,L,K,le,Ye,_e,fe;return u=d=m=f=v=_=b=w=C=0,g=y=1,n.svg=!!(t.getCTM&&Zr(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[ie]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ie]!=="none"?l[ie]:"")),i.scale=i.rotate=i.translate="none"),T=bi(t,n.svg),n.svg&&(n.uncache?(R=t.getBBox(),c=n.xOrigin-R.x+"px "+(n.yOrigin-R.y)+"px",D=""):D=!e&&t.getAttribute("data-svg-origin"),ii(t,D||c,!!D||n.originIsAbsolute,n.smooth!==!1,T)),E=n.xOrigin||0,M=n.yOrigin||0,T!==Qt&&(W=T[0],P=T[1],F=T[2],H=T[3],u=V=T[4],d=j=T[5],T.length===6?(g=Math.sqrt(W*W+P*P),y=Math.sqrt(H*H+F*F),f=W||P?Ct(P,W)*ft:0,b=F||H?Ct(F,H)*ft+f:0,b&&(y*=Math.abs(Math.cos(b*It))),n.svg&&(u-=E-(E*W+M*F),d-=M-(E*P+M*H))):(fe=T[6],Ye=T[7],L=T[8],K=T[9],le=T[10],_e=T[11],u=T[12],d=T[13],m=T[14],I=Ct(fe,le),v=I*ft,I&&(S=Math.cos(-I),B=Math.sin(-I),D=V*S+L*B,R=j*S+K*B,Y=fe*S+le*B,L=V*-B+L*S,K=j*-B+K*S,le=fe*-B+le*S,_e=Ye*-B+_e*S,V=D,j=R,fe=Y),I=Ct(-F,le),_=I*ft,I&&(S=Math.cos(-I),B=Math.sin(-I),D=W*S-L*B,R=P*S-K*B,Y=F*S-le*B,_e=H*B+_e*S,W=D,P=R,F=Y),I=Ct(P,W),f=I*ft,I&&(S=Math.cos(I),B=Math.sin(I),D=W*S+P*B,R=V*S+j*B,P=P*S-W*B,j=j*S-V*B,W=D,V=R),v&&Math.abs(v)+Math.abs(f)>359.9&&(v=f=0,_=180-_),g=ae(Math.sqrt(W*W+P*P+F*F)),y=ae(Math.sqrt(j*j+fe*fe)),I=Ct(V,j),b=Math.abs(I)>2e-4?I*ft:0,C=_e?1/(_e<0?-_e:_e):0),n.svg&&(D=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!ta(je(t,ie)),D&&t.setAttribute("transform",D))),Math.abs(b)>90&&Math.abs(b)<270&&(r?(g*=-1,b+=f<=0?180:-180,f+=f<=0?180:-180):(y*=-1,b+=b<=0?180:-180)),e=e||n.uncache,n.x=u-((n.xPercent=u&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+a,n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+a,n.z=m+a,n.scaleX=ae(g),n.scaleY=ae(y),n.rotation=ae(f)+s,n.rotationX=ae(v)+s,n.rotationY=ae(_)+s,n.skewX=b+s,n.skewY=w+s,n.transformPerspective=C+a,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(i[Ce]=_n(c)),n.xOffset=n.yOffset=0,n.force3D=Fe.force3D,n.renderTransform=n.svg?fo:Qr?na:uo,n.uncache=0,n},_n=function(t){return(t=t.split(" "))[0]+" "+t[1]},$n=function(t,e,n){var i=me(e);return ae(parseFloat(e)+parseFloat(lt(t,"x",n+"px",i)))+i},uo=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,na(t,e)},ut="0deg",Bt="0px",dt=") ",na=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,s=n.y,l=n.z,c=n.rotation,u=n.rotationY,d=n.rotationX,m=n.skewX,g=n.skewY,y=n.scaleX,f=n.scaleY,v=n.transformPerspective,_=n.force3D,b=n.target,w=n.zOrigin,C="",E=_==="auto"&&t&&t!==1||_===!0;if(w&&(d!==ut||u!==ut)){var M=parseFloat(u)*It,T=Math.sin(M),I=Math.cos(M),S;M=parseFloat(d)*It,S=Math.cos(M),a=$n(b,a,T*S*-w),s=$n(b,s,-Math.sin(M)*-w),l=$n(b,l,I*S*-w+w)}v!==Bt&&(C+="perspective("+v+dt),(i||r)&&(C+="translate("+i+"%, "+r+"%) "),(E||a!==Bt||s!==Bt||l!==Bt)&&(C+=l!==Bt||E?"translate3d("+a+", "+s+", "+l+") ":"translate("+a+", "+s+dt),c!==ut&&(C+="rotate("+c+dt),u!==ut&&(C+="rotateY("+u+dt),d!==ut&&(C+="rotateX("+d+dt),(m!==ut||g!==ut)&&(C+="skew("+m+", "+g+dt),(y!==1||f!==1)&&(C+="scale("+y+", "+f+dt),b.style[ie]=C||"translate(0, 0)"},fo=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,s=n.y,l=n.rotation,c=n.skewX,u=n.skewY,d=n.scaleX,m=n.scaleY,g=n.target,y=n.xOrigin,f=n.yOrigin,v=n.xOffset,_=n.yOffset,b=n.forceCSS,w=parseFloat(a),C=parseFloat(s),E,M,T,I,S;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=It,c*=It,E=Math.cos(l)*d,M=Math.sin(l)*d,T=Math.sin(l-c)*-m,I=Math.cos(l-c)*m,c&&(u*=It,S=Math.tan(c-u),S=Math.sqrt(1+S*S),T*=S,I*=S,u&&(S=Math.tan(u),S=Math.sqrt(1+S*S),E*=S,M*=S)),E=ae(E),M=ae(M),T=ae(T),I=ae(I)):(E=d,I=m,M=T=0),(w&&!~(a+"").indexOf("px")||C&&!~(s+"").indexOf("px"))&&(w=lt(g,"x",a,"px"),C=lt(g,"y",s,"px")),(y||f||v||_)&&(w=ae(w+y-(y*E+f*T)+v),C=ae(C+f-(y*M+f*I)+_)),(i||r)&&(S=g.getBBox(),w=ae(w+i/100*S.width),C=ae(C+r/100*S.height)),S="matrix("+E+","+M+","+T+","+I+","+w+","+C+")",g.setAttribute("transform",S),b&&(g.style[ie]=S)},ho=function(t,e,n,i,r){var a=360,s=de(r),l=parseFloat(r)*(s&&~r.indexOf("rad")?ft:1),c=l-i,u=i+c+"deg",d,m;return s&&(d=r.split("_")[1],d==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),d==="cw"&&c<0?c=(c+a*Vi)%a-~~(c/a)*a:d==="ccw"&&c>0&&(c=(c-a*Vi)%a-~~(c/a)*a)),t._pt=m=new ke(t._pt,e,n,i,c,qs),m.e=u,m.u="deg",t._props.push(n),m},Ki=function(t,e){for(var n in e)t[n]=e[n];return t},mo=function(t,e,n){var i=Ki({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=n.style,s,l,c,u,d,m,g,y;i.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[ie]=e,s=Jt(n,1),wt(n,ie),n.setAttribute("transform",c)):(c=getComputedStyle(n)[ie],a[ie]=e,s=Jt(n,1),a[ie]=c);for(l in Ze)c=i[l],u=s[l],c!==u&&r.indexOf(l)<0&&(g=me(c),y=me(u),d=g!==y?lt(n,l,c,y):parseFloat(c),m=parseFloat(u),t._pt=new ke(t._pt,s,l,d,m-d,ei),t._pt.u=y||0,t._props.push(l));Ki(s,i)};Me("padding,margin,Width,Radius",function(o,t){var e="Top",n="Right",i="Bottom",r="Left",a=(t<3?[e,n,i,r]:[e+r,e+n,i+n,i+r]).map(function(s){return t<2?o+s:"border"+s+o});yn[t>1?"border"+o:o]=function(s,l,c,u,d){var m,g;if(arguments.length<4)return m=a.map(function(y){return Qe(s,y,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(u+"").split(" "),g={},a.forEach(function(y,f){return g[y]=m[f]=m[f]||m[(f-1)/2|0]}),s.init(l,g,d)}});var ia={name:"css",register:ni,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a=this._props,s=t.style,l=n.vars.startAt,c,u,d,m,g,y,f,v,_,b,w,C,E,M,T,I;_i||ni(),this.styles=this.styles||Kr(t),I=this.styles.props,this.tween=n;for(f in e)if(f!=="autoRound"&&(u=e[f],!(Ie[f]&&Br(f,e,n,i,t,r)))){if(g=typeof u,y=yn[f],g==="function"&&(u=u.call(n,i,t,r),g=typeof u),g==="string"&&~u.indexOf("random(")&&(u=Xt(u)),y)y(this,t,f,u,n)&&(T=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(f)+"").trim(),u+="",st.lastIndex=0,st.test(c)||(v=me(c),_=me(u)),_?v!==_&&(c=lt(t,f,c,_)+_):v&&(u+=v),this.add(s,"setProperty",c,u,i,r,0,0,f),a.push(f),I.push(f,0,s[f]);else if(g!=="undefined"){if(l&&f in l?(c=typeof l[f]=="function"?l[f].call(n,i,t,r):l[f],de(c)&&~c.indexOf("random(")&&(c=Xt(c)),me(c+"")||c==="auto"||(c+=Fe.units[f]||me(Qe(t,f))||""),(c+"").charAt(1)==="="&&(c=Qe(t,f))):c=Qe(t,f),m=parseFloat(c),b=g==="string"&&u.charAt(1)==="="&&u.substr(0,2),b&&(u=u.substr(2)),d=parseFloat(u),f in Ge&&(f==="autoAlpha"&&(m===1&&Qe(t,"visibility")==="hidden"&&d&&(m=0),I.push("visibility",0,s.visibility),rt(this,s,"visibility",m?"inherit":"hidden",d?"inherit":"hidden",!d)),f!=="scale"&&f!=="transform"&&(f=Ge[f],~f.indexOf(",")&&(f=f.split(",")[0]))),w=f in Ze,w){if(this.styles.save(f),C||(E=t._gsap,E.renderTransform&&!e.parseTransform||Jt(t,e.parseTransform),M=e.smoothOrigin!==!1&&E.smooth,C=this._pt=new ke(this._pt,s,ie,0,1,E.renderTransform,E,0,-1),C.dep=1),f==="scale")this._pt=new ke(this._pt,E,"scaleY",E.scaleY,(b?Et(E.scaleY,b+d):d)-E.scaleY||0,ei),this._pt.u=0,a.push("scaleY",f),f+="X";else if(f==="transformOrigin"){I.push(Ce,0,s[Ce]),u=lo(u),E.svg?ii(t,u,0,M,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==E.zOrigin&&rt(this,E,"zOrigin",E.zOrigin,_),rt(this,s,f,_n(c),_n(u)));continue}else if(f==="svgOrigin"){ii(t,u,1,M,0,this);continue}else if(f in ea){ho(this,E,f,m,b?Et(m,b+u):u);continue}else if(f==="smoothOrigin"){rt(this,E,"smooth",E.smooth,u);continue}else if(f==="force3D"){E[f]=u;continue}else if(f==="transform"){mo(this,u,t);continue}}else f in s||(f=$t(f)||f);if(w||(d||d===0)&&(m||m===0)&&!Xs.test(u)&&f in s)v=(c+"").substr((m+"").length),d||(d=0),_=me(u)||(f in Fe.units?Fe.units[f]:v),v!==_&&(m=lt(t,f,c,_)),this._pt=new ke(this._pt,w?E:s,f,m,(b?Et(m,b+d):d)-m,!w&&(_==="px"||f==="zIndex")&&e.autoRound!==!1?Qs:ei),this._pt.u=_||0,v!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Ks);else if(f in s)oo.call(this,t,f,c,b?b+u:u);else if(f in t)this.add(t,f,c||t[f],b?b+u:u,i,r);else if(f!=="parseTransform"){ui(f,u);continue}w||(f in s?I.push(f,0,s[f]):I.push(f,1,c||t[f])),a.push(f)}}T&&Gr(this)},render:function(t,e){if(e.tween._time||!xi())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Qe,aliases:Ge,getSetter:function(t,e,n){var i=Ge[e];return i&&i.indexOf(",")<0&&(e=i),e in Ze&&e!==Ce&&(t._gsap.x||Qe(t,"x"))?n&&Wi===n?e==="scale"?to:eo:(Wi=n||{})&&(e==="scale"?no:io):t.style&&!oi(t.style[e])?Js:~e.indexOf("-")?Zs:vi(t,e)},core:{_removeProperty:wt,_getMatrix:bi}};Se.utils.checkPrefix=$t;Se.core.getStyleSaver=Kr;(function(o,t,e,n){var i=Me(o+","+t+","+e,function(r){Ze[r]=1});Me(t,function(r){Fe.units[r]="deg",ea[r]=1}),Ge[i[13]]=o+","+t,Me(n,function(r){var a=r.split(":");Ge[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Me("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){Fe.units[o]="px"});Se.registerPlugin(ia);var xe=Se.registerPlugin(ia)||Se;xe.core.Tween;const tt=class tt extends Na{static getInstance(){return tt.instance||(tt.instance=new tt),tt.instance}constructor(){super(tt.id),this.scene=this.experience.scene,this.canvas=this.experience.canvas,this.renderer=this.experience.renderer,this.camera=this.experience.camera,this.mouse=this.experience.mouse,this.sizes=this.experience.sizes,this.resources=this.experience.resources,this.debug=this.experience.debug,this.params={color:new Ke("#F777A8"),size:1,minAlpha:.08,maxAlpha:1,force:.2};const t="https://unpkg.com/three@0.161.0",e=new Ba().setDecoderPath(`${t}/examples/jsm/libs/draco/`);this.modelLoader=new Ha().setDRACOLoader(e),this.modelPromises={},this.modelSamplingCache={},this.currentModelName="mask",this.init()}init(){this.setupMask(),this.setupGPGPU(),setTimeout(()=>{this.gpgpu&&this.setupDebug()},100)}setupMask(){console.log("Mask: setupMask called - Model rendering disabled"),this.model={position:new ce(0,0,0)},this.keywordCloud||(this.keywordCloud=new Ja),this.wordRing=null,console.log("Mask: About to call initWordRing..."),this.initWordRing().catch(t=>{console.error("Mask: WordRing initialization error:",t),console.error("Mask: Error details:",t.message,t.stack)})}async initWordRing(){try{console.log("Mask: Initializing WordRing..."),console.log("Mask: Scene exists?",!!this.scene),console.log("Mask: Mouse exists?",!!this.mouse),console.log("Mask: Model exists?",!!this.model);const t=this.model?this.model.position.clone():new ce(0,0,0);if(console.log("Mask: Creating WordRing at position:",t),!this.scene){console.error("Mask: Scene is not available for WordRing, retrying in 500ms..."),setTimeout(()=>this.initWordRing(),500);return}if(!this.mouse){console.error("Mask: Mouse is not available for WordRing, retrying in 500ms..."),setTimeout(()=>this.initWordRing(),500);return}const n=(await Xa(()=>import("./GPGPU-a4caf82c.js").then(r=>r.i),["assets/GPGPU-a4caf82c.js","assets/GPGPU-085085bb.css"])).default.getInstance(),i=this.currentModelMesh||null;this.wordRing=new Za(this.scene,this.mouse,t,this.gpgpu,n,this.camera,i),console.log("Mask: WordRing created, calling init()..."),await this.wordRing.init(),console.log("Mask: WordRing initialized successfully!"),setTimeout(()=>{if(this.model&&this.wordRing){const r=this.model.position.clone();console.log("Mask: Updating WordRing position to:",r),this.wordRing.setModelPosition(r)}},500)}catch(t){console.error("Mask: WordRing initialization failed:",t),console.error("Mask: Error message:",t.message),console.error("Mask: Error stack:",t.stack)}}setupCameraPosition(){}setupGPGPU(){if(!this.model||!this.model.geometry){console.warn("Mask: Model not ready for GPGPU initialization, will retry when model loads");return}const t=Math.min(512,Math.max(256,Math.floor(this.sizes.width/2)));this.gpgpu=new Ya({size:t,camera:this.camera,renderer:this.renderer.webglRenderer,mouse:this.mouse,scene:this.scene,sizes:this.sizes,model:this.model,debug:this.debug,audio:this.experience.audio,webcam:this.experience.webcam,params:this.params})}setupDebug(){if(!this.gpgpu||!this.gpgpu.material||!this.gpgpu.material.uniforms){console.warn("Mask: setupDebug called before GPGPU is ready, skipping");return}if(this.debug.active){this.particlesFolder&&this.particlesFolder.destroy(),this.debug.gui.width=300,this.particlesFolder=this.debug.gui.addFolder("particles"),this.particlesFolder.addColor(this.params,"color").name("Color").onChange(()=>{this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms.uColor&&this.gpgpu.material.uniforms.uColor.value.copy(this.params.color)}),this.particlesFolder.add(this.gpgpu.material.uniforms.uParticleSize,"value").min(.1).max(10).step(.1).name("Size"),this.particlesFolder.add(this.gpgpu.uniforms.velocityUniforms.uForce,"value").min(0).max(1).step(.01).name("Force"),this.particlesFolder.add(this.params,"minAlpha").min(0).max(1).step(.01).name("Min Alpha").onChange(()=>{this.gpgpu.material.uniforms.uMinAlpha&&(this.gpgpu.material.uniforms.uMinAlpha.value=this.params.minAlpha)}),this.particlesFolder.add(this.params,"maxAlpha").min(0).max(1).step(.01).name("Max Alpha").onChange(()=>{this.gpgpu.material.uniforms.uMaxAlpha&&(this.gpgpu.material.uniforms.uMaxAlpha.value=this.params.maxAlpha)}),this.particlesFolder.add(this,"randomize");const t={mask:"mask",veneciaMask:"veneciaMask",samurai:"samurai",cyborg:"cyborg",subway:"subway"};this.particlesFolder.add({model:"mask"},"model",t).onChange(e=>this.changeModel(e))}}randomize(){this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms.uRandom&&(this.gpgpu.material.uniforms.uRandom.value=Math.random())}async switchModel(t){if(this.currentModelName===t)return;console.log(`[Mask] Switching Pantheon Model to: ${t}`);const e=this.params.minAlpha;xe.to(this.params,{minAlpha:0,duration:.06}),this.gpgpu&&this.gpgpu.mesh&&xe.to(this.gpgpu.mesh.rotation,{y:this.gpgpu.mesh.rotation.y+Math.PI*4,duration:.2,ease:"power2.inOut"});try{let n;if(this.resources.models[t])n=this.resolveMesh(this.resources.models[t].scene);else{const r=`models/pantheon/${t}.glb`;n=await this.loadAndCacheModel(t,r)}if(!n)throw new Error("No mesh found");const i=this.getSamplingCache(t,n);if(this.updateGPGPUGeometry(n,i),this.currentModelName=t,this.currentModelMesh=n,this.wordRing&&n){const r=new ce;n.getWorldPosition(r),this.wordRing.setModelPosition(r),console.log("Mask: Updated WordRing position for model switch to",t)}this.gpgpu&&this.gpgpu.uniforms.velocityUniforms.uAttraction&&(this.gpgpu.uniforms.velocityUniforms.uAttraction.value=3,this.gpgpu.uniforms.velocityUniforms.uForce.value=.02,xe.to(this.gpgpu.uniforms.velocityUniforms.uAttraction,{value:.12,duration:.06,ease:"power4.out"}),xe.to(this.gpgpu.uniforms.velocityUniforms.uForce,{value:.12,duration:.1,ease:"power2.out"})),xe.to(this.params,{minAlpha:e,duration:.12,delay:0}),console.log(`[Mask] Switched to ${t}`)}catch(n){console.warn(`[Mask] Failed to switch to ${t}:`,n),xe.to(this.params,{minAlpha:e,duration:1})}}resolveMesh(t){let e=null;if(t.traverse&&t.traverse(n=>{!e&&n.isMesh&&n.geometry&&(e=n)}),!e){console.warn("Mask.resolveMesh: No mesh found in scene",t),console.warn("Mask.resolveMesh: detailed scene",t.children);const n=new za(1,1,1),i=new tr({color:16711680,wireframe:!0}),r=new ai(n,i);return r.name="Fallback_Dummy",r}return e.scale.set(3,3,3),e.updateMatrixWorld(),e}async loadModelFromUrl(t){return new Promise((e,n)=>{this.modelLoader.load(t,i=>{e(this.resolveMesh(i.scene))},void 0,i=>{console.warn("Error loading model",t),n(i)})})}updateGPGPUGeometry(t,e){if(!this.gpgpu){console.log("Mask: GPGPU not initialized, setting up now with mesh:",t);const n=this.model;if(this.model=t,this.setupGPGPU(),!this.gpgpu){this.model=n,console.warn("Mask: GPGPU initialization failed");return}}this.gpgpu&&(this.gpgpu&&typeof this.gpgpu.updateTarget=="function"?this.gpgpu.updateTarget(t,e):this.gpgpu&&console.debug("GPGPU.updateTarget not implemented - using standard update"))}changeModel(t){this.switchModel(t)}async loadAndCacheModel(t,e){return this.modelPromises[t]?this.modelPromises[t]:(this.modelPromises[t]=this.loadModelFromUrl(e).then(n=>(n&&(this.resources.models[t]={scene:n},this.computeSamplingCache(t,n)),n)).catch(n=>(console.warn(`[Mask] Failed to load ${t}:`,n),null)),this.modelPromises[t])}computeSamplingCache(t,e){if(!e||this.modelSamplingCache[t])return this.modelSamplingCache[t];const n=new Wa(e,this.gpgpu?this.gpgpu.size:256);return this.modelSamplingCache[t]={positionTexture:n.getPositionTexture()},n.sampler=null,n.mesh=null,this.modelSamplingCache[t]}getSamplingCache(t,e){return this.computeSamplingCache(t,e)}preloadPantheonModels(){["veneciaMask","samurai","cyborg","subway"].forEach(e=>{if(this.resources.models[e]||this.modelPromises[e])return;const n=`models/pantheon/${e}.glb`;this.loadAndCacheModel(e,n)})}updateVisualization(t){if(!t)return;this.currentData=t,this.wordRing&&t.date&&this.wordRing.updateWordsForDate(t.date,t).catch(L=>{console.error("Mask: Error updating WordRing words:",L)});const e=t.marketChangePercent||0,n=t.vix||20,i=t.fearGreedIndex||50,r=t.volumeRatio||1,a=t.tenYearYield||4;this.keywordCloud&&t.headlines&&this.keywordCloud.updateHeadlines(t.headlines);const s={0:{h:340,s:95,l:40,name:"Extreme Panic"},25:{h:260,s:60,l:40,name:"Fear"},45:{h:220,s:40,l:40,name:"Nervous"},55:{h:180,s:40,l:45,name:"Neutral"},75:{h:160,s:70,l:50,name:"Greed"},100:{h:50,s:95,l:60,name:"Euphoria"}},l=(L,K,le)=>({h:L.h+(K.h-L.h)*le,s:L.s+(K.s-L.s)*le,l:L.l+(K.l-L.l)*le});let c=0,u=100;const d=Object.keys(s).map(L=>parseInt(L)).sort((L,K)=>L-K);for(let L=0;L<d.length-1;L++)if(i>=d[L]&&i<=d[L+1]){c=d[L],u=d[L+1];break}const m=u-c,g=(i-c)/m,y=l(s[c],s[u],g);let f=y.h,v=y.s,_=y.l;const b=Math.max(0,a-4);b>0&&(f-=b*15);const w=(r-1)*20;v=Math.max(20,Math.min(100,v+w)),r>1.5&&(_+=5),f+=(t.day||1)%5*2,f=f%360,f<0&&(f+=360),v=Math.max(0,Math.min(100,v)),_=Math.max(0,Math.min(100,_));const C=new Ke(`hsl(${Math.round(f)}, ${Math.round(v)}%, ${Math.round(_)}%)`),E=r,M=.5+E*.8,T=t.intradayRange||1,I=Math.min(1,T/3),S=Math.abs(t.marketGap||0),B=Math.min(1,S/2);let W=0;(n>28||e<-1.8)&&(W=Math.min(1,(n-25)/20+Math.abs(e)/5),W>.5&&C.lerp(new Ke(16711680),.3));const P=W*.015,F=W*.2,H=.2+(t.volatility||.4)*.8+E*.1+B*.3+W*.5,j=.04+Math.min(1,Math.max(0,(a-3)/2))*.05,D=i/100;let Y=1.5+Math.abs(e)*1.5+D*1;if(Y+=Math.random()*I*1.5,this.params&&this.params.color&&xe.to(this.params.color,{r:C.r,g:C.g,b:C.b,duration:2,ease:"power2.out",onUpdate:()=>{this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms&&this.gpgpu.material.uniforms.uColor&&this.gpgpu.material.uniforms.uColor.value.copy(this.params.color)}}),this.gpgpu&&this.gpgpu.material&&this.gpgpu.material.uniforms){let L=Math.abs(i-50)/50;const K=i<=25;if(K){const Ye=1+(25-i)/25*1;L=Math.min(2,L*Ye)}this.gpgpu.material.uniforms.uMarketIntensity&&xe.to(this.gpgpu.material.uniforms.uMarketIntensity,{value:L,duration:2.5}),this.gpgpu.material.uniforms.uExtremeFear&&xe.to(this.gpgpu.material.uniforms.uExtremeFear,{value:K?1:0,duration:2.5}),this.gpgpu.material.uniforms.uForce&&xe.to(this.gpgpu.material.uniforms.uForce,{value:H,duration:2.5});const le=I>.5?"elastic.out(1, 0.3)":"back.out(1.0)";this.gpgpu.material.uniforms.uParticleSize&&xe.to(this.gpgpu.material.uniforms.uParticleSize,{value:Y,duration:2.5,ease:le}),this.params&&xe.to(this.params,{minAlpha:j,duration:2})}if(this.renderer&&this.renderer.postprocessing){const L=this.renderer.postprocessing;L&&typeof L.setGlitch=="function"&&L.setGlitch(P),this.fxParams||(this.fxParams={bloom:1,shake:0}),this.fxParams&&xe.to(this.fxParams,{bloom:M,shake:F,duration:2,onUpdate:()=>{L&&typeof L.setBloom=="function"&&L.setBloom(this.fxParams.bloom),this.camera&&(this.camera.shakeIntensity=this.fxParams.shake)}})}this.currentBaseSize=Y}update(){if(this.gpgpu){if(this.wordRing&&this.wordRing.group&&this.gpgpu.uniforms&&this.gpgpu.uniforms.velocityUniforms){const t=new ce;this.wordRing.group.getWorldPosition(t),this.gpgpu.uniforms.velocityUniforms.uWordRingPosition.value.copy(t),this.gpgpu.uniforms.velocityUniforms.uWordRingRadius.value=this.wordRing.radius}if(this.gpgpu.compute(),this.currentData&&this.gpgpu.material&&this.gpgpu.uniforms&&this.gpgpu.uniforms.velocityUniforms){const t=performance.now()*.001,e=this.currentData.vix||20,i=(this.currentData.fearGreedIndex||50)<=25;let r=1+e/10,a=.4;e>30&&(r=8,a=.2),i&&(r*=2.5,a*=1.8);const s=1+Math.sin(t*r)*a;this.gpgpu.material.uniforms.uParticleSize&&(this.gpgpu.material.uniforms.uParticleSize.value=(this.params.size||1.5)*s);const l=(Math.random()-.5)*(e/800);let c=(this.params.force||.2)+l;c=Math.min(.6,Math.max(.1,c)),this.gpgpu.uniforms.velocityUniforms.uForce.value=c}}this.keywordCloud&&this.experience.time&&this.keywordCloud.update(this.experience.time.elapsed/1e3),this.wordRing&&(this.wordRing.update(),this.model&&this.wordRing.setModelPosition(this.model.position))}};Ai(tt,"instance");let gt=tt;var Nn=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Pt={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(o){return typeof console<"u"&&console.warn(o)},getWeek:function(o){var t=new Date(o.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Zt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(o){var t=o%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},we=function(o,t){return t===void 0&&(t=2),("000"+o).slice(t*-1)},$e=function(o){return o===!0?1:0};function Qi(o,t){var e;return function(){var n=this,i=arguments;clearTimeout(e),e=setTimeout(function(){return o.apply(n,i)},t)}}var Bn=function(o){return o instanceof Array?o:[o]};function ve(o,t,e){if(e===!0)return o.classList.add(t);o.classList.remove(t)}function q(o,t,e){var n=window.document.createElement(o);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function ln(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function ra(o,t){if(t(o))return o;if(o.parentNode)return ra(o.parentNode,t)}function cn(o,t){var e=q("div","numInputWrapper"),n=q("input","numInput "+o),i=q("span","arrowUp"),r=q("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var a in t)n.setAttribute(a,t[a]);return e.appendChild(n),e.appendChild(i),e.appendChild(r),e}function Ee(o){try{if(typeof o.composedPath=="function"){var t=o.composedPath();return t[0]}return o.target}catch{return o.target}}var Hn=function(){},xn=function(o,t,e){return e.months[t?"shorthand":"longhand"][o]},go={D:Hn,F:function(o,t,e){o.setMonth(e.months.longhand.indexOf(t))},G:function(o,t){o.setHours((o.getHours()>=12?12:0)+parseFloat(t))},H:function(o,t){o.setHours(parseFloat(t))},J:function(o,t){o.setDate(parseFloat(t))},K:function(o,t,e){o.setHours(o.getHours()%12+12*$e(new RegExp(e.amPM[1],"i").test(t)))},M:function(o,t,e){o.setMonth(e.months.shorthand.indexOf(t))},S:function(o,t){o.setSeconds(parseFloat(t))},U:function(o,t){return new Date(parseFloat(t)*1e3)},W:function(o,t,e){var n=parseInt(t),i=new Date(o.getFullYear(),0,2+(n-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+e.firstDayOfWeek),i},Y:function(o,t){o.setFullYear(parseFloat(t))},Z:function(o,t){return new Date(t)},d:function(o,t){o.setDate(parseFloat(t))},h:function(o,t){o.setHours((o.getHours()>=12?12:0)+parseFloat(t))},i:function(o,t){o.setMinutes(parseFloat(t))},j:function(o,t){o.setDate(parseFloat(t))},l:Hn,m:function(o,t){o.setMonth(parseFloat(t)-1)},n:function(o,t){o.setMonth(parseFloat(t)-1)},s:function(o,t){o.setSeconds(parseFloat(t))},u:function(o,t){return new Date(parseFloat(t))},w:Hn,y:function(o,t){o.setFullYear(2e3+parseFloat(t))}},ht={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Gt={Z:function(o){return o.toISOString()},D:function(o,t,e){return t.weekdays.shorthand[Gt.w(o,t,e)]},F:function(o,t,e){return xn(Gt.n(o,t,e)-1,!1,t)},G:function(o,t,e){return we(Gt.h(o,t,e))},H:function(o){return we(o.getHours())},J:function(o,t){return t.ordinal!==void 0?o.getDate()+t.ordinal(o.getDate()):o.getDate()},K:function(o,t){return t.amPM[$e(o.getHours()>11)]},M:function(o,t){return xn(o.getMonth(),!0,t)},S:function(o){return we(o.getSeconds())},U:function(o){return o.getTime()/1e3},W:function(o,t,e){return e.getWeek(o)},Y:function(o){return we(o.getFullYear(),4)},d:function(o){return we(o.getDate())},h:function(o){return o.getHours()%12?o.getHours()%12:12},i:function(o){return we(o.getMinutes())},j:function(o){return o.getDate()},l:function(o,t){return t.weekdays.longhand[o.getDay()]},m:function(o){return we(o.getMonth()+1)},n:function(o){return o.getMonth()+1},s:function(o){return o.getSeconds()},u:function(o){return o.getTime()},w:function(o){return o.getDay()},y:function(o){return String(o.getFullYear()).substring(2)}},aa=function(o){var t=o.config,e=t===void 0?Pt:t,n=o.l10n,i=n===void 0?Zt:n,r=o.isMobile,a=r===void 0?!1:r;return function(s,l,c){var u=c||i;return e.formatDate!==void 0&&!a?e.formatDate(s,l,u):l.split("").map(function(d,m,g){return Gt[d]&&g[m-1]!=="\\"?Gt[d](s,u,e):d!=="\\"?d:""}).join("")}},ri=function(o){var t=o.config,e=t===void 0?Pt:t,n=o.l10n,i=n===void 0?Zt:n;return function(r,a,s,l){if(!(r!==0&&!r)){var c=l||i,u,d=r;if(r instanceof Date)u=new Date(r.getTime());else if(typeof r!="string"&&r.toFixed!==void 0)u=new Date(r);else if(typeof r=="string"){var m=a||(e||Pt).dateFormat,g=String(r).trim();if(g==="today")u=new Date,s=!0;else if(e&&e.parseDate)u=e.parseDate(r,m);else if(/Z$/.test(g)||/GMT$/.test(g))u=new Date(r);else{for(var y=void 0,f=[],v=0,_=0,b="";v<m.length;v++){var w=m[v],C=w==="\\",E=m[v-1]==="\\"||C;if(ht[w]&&!E){b+=ht[w];var M=new RegExp(b).exec(r);M&&(y=!0)&&f[w!=="Y"?"push":"unshift"]({fn:go[w],val:M[++_]})}else C||(b+=".")}u=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),f.forEach(function(T){var I=T.fn,S=T.val;return u=I(u,S,c)||u}),u=y?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){e.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&u.setHours(0,0,0,0),u}}};function Te(o,t,e){return e===void 0&&(e=!0),e!==!1?new Date(o.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):o.getTime()-t.getTime()}var po=function(o,t,e){return o>Math.min(t,e)&&o<Math.max(t,e)},Yn=function(o,t,e){return o*3600+t*60+e},vo=function(o){var t=Math.floor(o/3600),e=(o-t*3600)/60;return[t,e,o-t*3600-e*60]},yo={DAY:864e5};function zn(o){var t=o.defaultHour,e=o.defaultMinute,n=o.defaultSeconds;if(o.minDate!==void 0){var i=o.minDate.getHours(),r=o.minDate.getMinutes(),a=o.minDate.getSeconds();t<i&&(t=i),t===i&&e<r&&(e=r),t===i&&e===r&&n<a&&(n=o.minDate.getSeconds())}if(o.maxDate!==void 0){var s=o.maxDate.getHours(),l=o.maxDate.getMinutes();t=Math.min(t,s),t===s&&(e=Math.min(l,e)),t===s&&e===l&&(n=o.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!o)throw TypeError("Cannot convert undefined or null to object");for(var n=function(s){s&&Object.keys(s).forEach(function(l){return o[l]=s[l]})},i=0,r=t;i<r.length;i++){var a=r[i];n(a)}return o});var he=globalThis&&globalThis.__assign||function(){return he=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},he.apply(this,arguments)},Ji=globalThis&&globalThis.__spreadArrays||function(){for(var o=0,t=0,e=arguments.length;t<e;t++)o+=arguments[t].length;for(var n=Array(o),i=0,t=0;t<e;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n},_o=300;function xo(o,t){var e={config:he(he({},Pt),oe.defaultConfig),l10n:Zt};e.parseDate=ri({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=f,e._setHoursFromDate=m,e._positionCalendar=rn,e.changeMonth=K,e.changeYear=et,e.clear=le,e.close=Ye,e.onMouseOver=nn,e._createElement=q,e.createDay=M,e.destroy=_e,e.isEnabled=Le,e.jumpToDate=b,e.updateValue=Xe,e.open=la,e.redraw=Di,e.set=fa,e.setDate=ha,e.toggle=va;function n(){e.utils={getDaysInMonth:function(h,p){return h===void 0&&(h=e.currentMonth),p===void 0&&(p=e.currentYear),h===1&&(p%4===0&&p%100!==0||p%400===0)?29:e.l10n.daysInMonth[h]}}}function i(){e.element=e.input=o,e.isOpen=!1,ca(),Si(),ga(),ma(),n(),e.isMobile||E(),_(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),Xe(!1)),s();var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&h&&rn(),te("onReady")}function r(){var h;return((h=e.calendarContainer)===null||h===void 0?void 0:h.getRootNode()).activeElement||document.activeElement}function a(h){return h.bind(e)}function s(){var h=e.config;h.weekNumbers===!1&&h.showMonths===1||h.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var p=(e.days.offsetWidth+1)*h.showMonths;e.daysContainer.style.width=p+"px",e.calendarContainer.style.width=p+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(h){if(e.selectedDates.length===0){var p=e.config.minDate===void 0||Te(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),x=zn(e.config);p.setHours(x.hours,x.minutes,x.seconds,p.getMilliseconds()),e.selectedDates=[p],e.latestSelectedDateObj=p}h!==void 0&&h.type!=="blur"&&xa(h);var k=e._input.value;d(),Xe(),e._input.value!==k&&e._debouncedChange()}function c(h,p){return h%12+12*$e(p===e.l10n.amPM[1])}function u(h){switch(h%24){case 0:case 12:return 12;default:return h%12}}function d(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var h=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,p=(parseInt(e.minuteElement.value,10)||0)%60,x=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(h=c(h,e.amPM.textContent));var k=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Te(e.latestSelectedDateObj,e.config.minDate,!0)===0,A=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Te(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var O=Yn(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),G=Yn(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),N=Yn(h,p,x);if(N>G&&N<O){var U=vo(O);h=U[0],p=U[1],x=U[2]}}else{if(A){var $=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;h=Math.min(h,$.getHours()),h===$.getHours()&&(p=Math.min(p,$.getMinutes())),p===$.getMinutes()&&(x=Math.min(x,$.getSeconds()))}if(k){var z=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;h=Math.max(h,z.getHours()),h===z.getHours()&&p<z.getMinutes()&&(p=z.getMinutes()),p===z.getMinutes()&&(x=Math.max(x,z.getSeconds()))}}g(h,p,x)}}function m(h){var p=h||e.latestSelectedDateObj;p&&p instanceof Date&&g(p.getHours(),p.getMinutes(),p.getSeconds())}function g(h,p,x){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(h%24,p,x||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=we(e.config.time_24hr?h:(12+h)%12+12*$e(h%12===0)),e.minuteElement.value=we(p),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[$e(h>=12)]),e.secondElement!==void 0&&(e.secondElement.value=we(x)))}function y(h){var p=Ee(h),x=parseInt(p.value)+(h.delta||0);(x/1e3>1||h.key==="Enter"&&!/[^\d]/.test(x.toString()))&&et(x)}function f(h,p,x,k){if(p instanceof Array)return p.forEach(function(A){return f(h,A,x,k)});if(h instanceof Array)return h.forEach(function(A){return f(A,p,x,k)});h.addEventListener(p,x,k),e._handlers.push({remove:function(){return h.removeEventListener(p,x,k)}})}function v(){te("onChange")}function _(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(x){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+x+"]"),function(k){return f(k,"click",e[x])})}),e.isMobile){pa();return}var h=Qi(oa,50);if(e._debouncedChange=Qi(v,_o),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&f(e.daysContainer,"mouseover",function(x){e.config.mode==="range"&&nn(Ee(x))}),f(e._input,"keydown",Mi),e.calendarContainer!==void 0&&f(e.calendarContainer,"keydown",Mi),!e.config.inline&&!e.config.static&&f(window,"resize",h),window.ontouchstart!==void 0?f(window.document,"touchstart",Mt):f(window.document,"mousedown",Mt),f(window.document,"focus",Mt,{capture:!0}),e.config.clickOpens===!0&&(f(e._input,"focus",e.open),f(e._input,"click",e.open)),e.daysContainer!==void 0&&(f(e.monthNav,"click",_a),f(e.monthNav,["keyup","increment"],y),f(e.daysContainer,"click",Ei)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var p=function(x){return Ee(x).select()};f(e.timeContainer,["increment"],l),f(e.timeContainer,"blur",l,{capture:!0}),f(e.timeContainer,"click",w),f([e.hourElement,e.minuteElement],["focus","click"],p),e.secondElement!==void 0&&f(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&f(e.amPM,"click",function(x){l(x)})}e.config.allowInput&&f(e._input,"blur",sa)}function b(h,p){var x=h!==void 0?e.parseDate(h):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),k=e.currentYear,A=e.currentMonth;try{x!==void 0&&(e.currentYear=x.getFullYear(),e.currentMonth=x.getMonth())}catch(O){O.message="Invalid date supplied: "+x,e.config.errorHandler(O)}p&&e.currentYear!==k&&(te("onYearChange"),F()),p&&(e.currentYear!==k||e.currentMonth!==A)&&te("onMonthChange"),e.redraw()}function w(h){var p=Ee(h);~p.className.indexOf("arrow")&&C(h,p.classList.contains("arrowUp")?1:-1)}function C(h,p,x){var k=h&&Ee(h),A=x||k&&k.parentNode&&k.parentNode.firstChild,O=Cn("increment");O.delta=p,A&&A.dispatchEvent(O)}function E(){var h=window.document.createDocumentFragment();if(e.calendarContainer=q("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(h.appendChild(j()),e.innerContainer=q("div","flatpickr-innerContainer"),e.config.weekNumbers){var p=L(),x=p.weekWrapper,k=p.weekNumbers;e.innerContainer.appendChild(x),e.weekNumbers=k,e.weekWrapper=x}e.rContainer=q("div","flatpickr-rContainer"),e.rContainer.appendChild(R()),e.daysContainer||(e.daysContainer=q("div","flatpickr-days"),e.daysContainer.tabIndex=-1),P(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),h.appendChild(e.innerContainer)}e.config.enableTime&&h.appendChild(D()),ve(e.calendarContainer,"rangeMode",e.config.mode==="range"),ve(e.calendarContainer,"animate",e.config.animate===!0),ve(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(h);var A=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!A&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var O=q("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(O,e.element),O.appendChild(e.element),e.altInput&&O.appendChild(e.altInput),O.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function M(h,p,x,k){var A=Le(p,!0),O=q("span",h,p.getDate().toString());return O.dateObj=p,O.$i=k,O.setAttribute("aria-label",e.formatDate(p,e.config.ariaDateFormat)),h.indexOf("hidden")===-1&&Te(p,e.now)===0&&(e.todayDateElem=O,O.classList.add("today"),O.setAttribute("aria-current","date")),A?(O.tabIndex=-1,Sn(p)&&(O.classList.add("selected"),e.selectedDateElem=O,e.config.mode==="range"&&(ve(O,"startRange",e.selectedDates[0]&&Te(p,e.selectedDates[0],!0)===0),ve(O,"endRange",e.selectedDates[1]&&Te(p,e.selectedDates[1],!0)===0),h==="nextMonthDay"&&O.classList.add("inRange")))):O.classList.add("flatpickr-disabled"),e.config.mode==="range"&&ya(p)&&!Sn(p)&&O.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&h!=="prevMonthDay"&&k%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(p)+"</span>"),te("onDayCreate",O),O}function T(h){h.focus(),e.config.mode==="range"&&nn(h)}function I(h){for(var p=h>0?0:e.config.showMonths-1,x=h>0?e.config.showMonths:-1,k=p;k!=x;k+=h)for(var A=e.daysContainer.children[k],O=h>0?0:A.children.length-1,G=h>0?A.children.length:-1,N=O;N!=G;N+=h){var U=A.children[N];if(U.className.indexOf("hidden")===-1&&Le(U.dateObj))return U}}function S(h,p){for(var x=h.className.indexOf("Month")===-1?h.dateObj.getMonth():e.currentMonth,k=p>0?e.config.showMonths:-1,A=p>0?1:-1,O=x-e.currentMonth;O!=k;O+=A)for(var G=e.daysContainer.children[O],N=x-e.currentMonth===O?h.$i+p:p<0?G.children.length-1:0,U=G.children.length,$=N;$>=0&&$<U&&$!=(p>0?U:-1);$+=A){var z=G.children[$];if(z.className.indexOf("hidden")===-1&&Le(z.dateObj)&&Math.abs(h.$i-$)>=Math.abs(p))return T(z)}e.changeMonth(A),B(I(A),0)}function B(h,p){var x=r(),k=tn(x||document.body),A=h!==void 0?h:k?x:e.selectedDateElem!==void 0&&tn(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&tn(e.todayDateElem)?e.todayDateElem:I(p>0?1:-1);A===void 0?e._input.focus():k?S(A,p):T(A)}function W(h,p){for(var x=(new Date(h,p,1).getDay()-e.l10n.firstDayOfWeek+7)%7,k=e.utils.getDaysInMonth((p-1+12)%12,h),A=e.utils.getDaysInMonth(p,h),O=window.document.createDocumentFragment(),G=e.config.showMonths>1,N=G?"prevMonthDay hidden":"prevMonthDay",U=G?"nextMonthDay hidden":"nextMonthDay",$=k+1-x,z=0;$<=k;$++,z++)O.appendChild(M("flatpickr-day "+N,new Date(h,p-1,$),$,z));for($=1;$<=A;$++,z++)O.appendChild(M("flatpickr-day",new Date(h,p,$),$,z));for(var Q=A+1;Q<=42-x&&(e.config.showMonths===1||z%7!==0);Q++,z++)O.appendChild(M("flatpickr-day "+U,new Date(h,p+1,Q%A),Q,z));var ze=q("div","dayContainer");return ze.appendChild(O),ze}function P(){if(e.daysContainer!==void 0){ln(e.daysContainer),e.weekNumbers&&ln(e.weekNumbers);for(var h=document.createDocumentFragment(),p=0;p<e.config.showMonths;p++){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+p),h.appendChild(W(x.getFullYear(),x.getMonth()))}e.daysContainer.appendChild(h),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&nn()}}function F(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var h=function(k){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&k<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&k>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var p=0;p<12;p++)if(h(p)){var x=q("option","flatpickr-monthDropdown-month");x.value=new Date(e.currentYear,p).getMonth().toString(),x.textContent=xn(p,e.config.shorthandCurrentMonth,e.l10n),x.tabIndex=-1,e.currentMonth===p&&(x.selected=!0),e.monthsDropdownContainer.appendChild(x)}}}function H(){var h=q("div","flatpickr-month"),p=window.document.createDocumentFragment(),x;e.config.showMonths>1||e.config.monthSelectorType==="static"?x=q("span","cur-month"):(e.monthsDropdownContainer=q("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),f(e.monthsDropdownContainer,"change",function(G){var N=Ee(G),U=parseInt(N.value,10);e.changeMonth(U-e.currentMonth),te("onMonthChange")}),F(),x=e.monthsDropdownContainer);var k=cn("cur-year",{tabindex:"-1"}),A=k.getElementsByTagName("input")[0];A.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&A.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(A.setAttribute("max",e.config.maxDate.getFullYear().toString()),A.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var O=q("div","flatpickr-current-month");return O.appendChild(x),O.appendChild(k),p.appendChild(O),h.appendChild(p),{container:h,yearElement:A,monthElement:x}}function V(){ln(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var h=e.config.showMonths;h--;){var p=H();e.yearElements.push(p.yearElement),e.monthElements.push(p.monthElement),e.monthNav.appendChild(p.container)}e.monthNav.appendChild(e.nextMonthNav)}function j(){return e.monthNav=q("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=q("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=q("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,V(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(h){e.__hidePrevMonthArrow!==h&&(ve(e.prevMonthNav,"flatpickr-disabled",h),e.__hidePrevMonthArrow=h)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(h){e.__hideNextMonthArrow!==h&&(ve(e.nextMonthNav,"flatpickr-disabled",h),e.__hideNextMonthArrow=h)}}),e.currentYearElement=e.yearElements[0],sn(),e.monthNav}function D(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var h=zn(e.config);e.timeContainer=q("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var p=q("span","flatpickr-time-separator",":"),x=cn("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=x.getElementsByTagName("input")[0];var k=cn("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=k.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=we(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?h.hours:u(h.hours)),e.minuteElement.value=we(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():h.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(x),e.timeContainer.appendChild(p),e.timeContainer.appendChild(k),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var A=cn("flatpickr-second");e.secondElement=A.getElementsByTagName("input")[0],e.secondElement.value=we(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():h.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(q("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(A)}return e.config.time_24hr||(e.amPM=q("span","flatpickr-am-pm",e.l10n.amPM[$e((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function R(){e.weekdayContainer?ln(e.weekdayContainer):e.weekdayContainer=q("div","flatpickr-weekdays");for(var h=e.config.showMonths;h--;){var p=q("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(p)}return Y(),e.weekdayContainer}function Y(){if(e.weekdayContainer){var h=e.l10n.firstDayOfWeek,p=Ji(e.l10n.weekdays.shorthand);h>0&&h<p.length&&(p=Ji(p.splice(h,p.length),p.splice(0,h)));for(var x=e.config.showMonths;x--;)e.weekdayContainer.children[x].innerHTML=`
      <span class='flatpickr-weekday'>
        `+p.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function L(){e.calendarContainer.classList.add("hasWeeks");var h=q("div","flatpickr-weekwrapper");h.appendChild(q("span","flatpickr-weekday",e.l10n.weekAbbreviation));var p=q("div","flatpickr-weeks");return h.appendChild(p),{weekWrapper:h,weekNumbers:p}}function K(h,p){p===void 0&&(p=!0);var x=p?h:h-e.currentMonth;x<0&&e._hidePrevMonthArrow===!0||x>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=x,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,te("onYearChange"),F()),P(),te("onMonthChange"),sn())}function le(h,p){if(h===void 0&&(h=!0),p===void 0&&(p=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,p===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var x=zn(e.config),k=x.hours,A=x.minutes,O=x.seconds;g(k,A,O)}e.redraw(),h&&te("onChange")}function Ye(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),te("onClose")}function _e(){e.config!==void 0&&te("onDestroy");for(var h=e._handlers.length;h--;)e._handlers[h].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var p=e.calendarContainer.parentNode;if(p.lastChild&&p.removeChild(p.lastChild),p.parentNode){for(;p.firstChild;)p.parentNode.insertBefore(p.firstChild,p);p.parentNode.removeChild(p)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(x){try{delete e[x]}catch{}})}function fe(h){return e.calendarContainer.contains(h)}function Mt(h){if(e.isOpen&&!e.config.inline){var p=Ee(h),x=fe(p),k=p===e.input||p===e.altInput||e.element.contains(p)||h.path&&h.path.indexOf&&(~h.path.indexOf(e.input)||~h.path.indexOf(e.altInput)),A=!k&&!x&&!fe(h.relatedTarget),O=!e.config.ignoredFocusElements.some(function(G){return G.contains(p)});A&&O&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function et(h){if(!(!h||e.config.minDate&&h<e.config.minDate.getFullYear()||e.config.maxDate&&h>e.config.maxDate.getFullYear())){var p=h,x=e.currentYear!==p;e.currentYear=p||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),x&&(e.redraw(),te("onYearChange"),F())}}function Le(h,p){var x;p===void 0&&(p=!0);var k=e.parseDate(h,void 0,p);if(e.config.minDate&&k&&Te(k,e.config.minDate,p!==void 0?p:!e.minDateHasTime)<0||e.config.maxDate&&k&&Te(k,e.config.maxDate,p!==void 0?p:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(k===void 0)return!1;for(var A=!!e.config.enable,O=(x=e.config.enable)!==null&&x!==void 0?x:e.config.disable,G=0,N=void 0;G<O.length;G++){if(N=O[G],typeof N=="function"&&N(k))return A;if(N instanceof Date&&k!==void 0&&N.getTime()===k.getTime())return A;if(typeof N=="string"){var U=e.parseDate(N,void 0,!0);return U&&U.getTime()===k.getTime()?A:!A}else if(typeof N=="object"&&k!==void 0&&N.from&&N.to&&k.getTime()>=N.from.getTime()&&k.getTime()<=N.to.getTime())return A}return!A}function tn(h){return e.daysContainer!==void 0?h.className.indexOf("hidden")===-1&&h.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(h):!1}function sa(h){var p=h.target===e._input,x=e._input.value.trimEnd()!==Dn();p&&x&&!(h.relatedTarget&&fe(h.relatedTarget))&&e.setDate(e._input.value,!0,h.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Mi(h){var p=Ee(h),x=e.config.wrap?o.contains(p):p===e._input,k=e.config.allowInput,A=e.isOpen&&(!k||!x),O=e.config.inline&&x&&!k;if(h.keyCode===13&&x){if(k)return e.setDate(e._input.value,!0,p===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),p.blur();e.open()}else if(fe(p)||A||O){var G=!!e.timeContainer&&e.timeContainer.contains(p);switch(h.keyCode){case 13:G?(h.preventDefault(),l(),kn()):Ei(h);break;case 27:h.preventDefault(),kn();break;case 8:case 46:x&&!e.config.allowInput&&(h.preventDefault(),e.clear());break;case 37:case 39:if(!G&&!x){h.preventDefault();var N=r();if(e.daysContainer!==void 0&&(k===!1||N&&tn(N))){var U=h.keyCode===39?1:-1;h.ctrlKey?(h.stopPropagation(),K(U),B(I(1),0)):B(void 0,U)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:h.preventDefault();var $=h.keyCode===40?1:-1;e.daysContainer&&p.$i!==void 0||p===e.input||p===e.altInput?h.ctrlKey?(h.stopPropagation(),et(e.currentYear-$),B(I(1),0)):G||B(void 0,$*7):p===e.currentYearElement?et(e.currentYear-$):e.config.enableTime&&(!G&&e.hourElement&&e.hourElement.focus(),l(h),e._debouncedChange());break;case 9:if(G){var z=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(De){return De}),Q=z.indexOf(p);if(Q!==-1){var ze=z[Q+(h.shiftKey?-1:1)];h.preventDefault(),(ze||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(p)&&h.shiftKey&&(h.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&p===e.amPM)switch(h.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],d(),Xe();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],d(),Xe();break}(x||fe(p))&&te("onKeyDown",h)}function nn(h,p){if(p===void 0&&(p="flatpickr-day"),!(e.selectedDates.length!==1||h&&(!h.classList.contains(p)||h.classList.contains("flatpickr-disabled")))){for(var x=h?h.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),k=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),A=Math.min(x,e.selectedDates[0].getTime()),O=Math.max(x,e.selectedDates[0].getTime()),G=!1,N=0,U=0,$=A;$<O;$+=yo.DAY)Le(new Date($),!0)||(G=G||$>A&&$<O,$<k&&(!N||$>N)?N=$:$>k&&(!U||$<U)&&(U=$));var z=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+p));z.forEach(function(Q){var ze=Q.dateObj,De=ze.getTime(),Nt=N>0&&De<N||U>0&&De>U;if(Nt){Q.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(kt){Q.classList.remove(kt)});return}else if(G&&!Nt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(kt){Q.classList.remove(kt)}),h!==void 0&&(h.classList.add(x<=e.selectedDates[0].getTime()?"startRange":"endRange"),k<x&&De===k?Q.classList.add("startRange"):k>x&&De===k&&Q.classList.add("endRange"),De>=N&&(U===0||De<=U)&&po(De,k,x)&&Q.classList.add("inRange"))})}}function oa(){e.isOpen&&!e.config.static&&!e.config.inline&&rn()}function la(h,p){if(p===void 0&&(p=e._positionElement),e.isMobile===!0){if(h){h.preventDefault();var x=Ee(h);x&&x.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),te("onOpen");return}else if(e._input.disabled||e.config.inline)return;var k=e.isOpen;e.isOpen=!0,k||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),te("onOpen"),rn(p)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(h===void 0||!e.timeContainer.contains(h.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function ki(h){return function(p){var x=e.config["_"+h+"Date"]=e.parseDate(p,e.config.dateFormat),k=e.config["_"+(h==="min"?"max":"min")+"Date"];x!==void 0&&(e[h==="min"?"minDateHasTime":"maxDateHasTime"]=x.getHours()>0||x.getMinutes()>0||x.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(A){return Le(A)}),!e.selectedDates.length&&h==="min"&&m(x),Xe()),e.daysContainer&&(Di(),x!==void 0?e.currentYearElement[h]=x.getFullYear().toString():e.currentYearElement.removeAttribute(h),e.currentYearElement.disabled=!!k&&x!==void 0&&k.getFullYear()===x.getFullYear())}}function ca(){var h=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],p=he(he({},JSON.parse(JSON.stringify(o.dataset||{}))),t),x={};e.config.parseDate=p.parseDate,e.config.formatDate=p.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(z){e.config._enable=Ii(z)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(z){e.config._disable=Ii(z)}});var k=p.mode==="time";if(!p.dateFormat&&(p.enableTime||k)){var A=oe.defaultConfig.dateFormat||Pt.dateFormat;x.dateFormat=p.noCalendar||k?"H:i"+(p.enableSeconds?":S":""):A+" H:i"+(p.enableSeconds?":S":"")}if(p.altInput&&(p.enableTime||k)&&!p.altFormat){var O=oe.defaultConfig.altFormat||Pt.altFormat;x.altFormat=p.noCalendar||k?"h:i"+(p.enableSeconds?":S K":" K"):O+(" h:i"+(p.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:ki("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:ki("max")});var G=function(z){return function(Q){e.config[z==="min"?"_minTime":"_maxTime"]=e.parseDate(Q,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:G("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:G("max")}),p.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,x,p);for(var N=0;N<h.length;N++)e.config[h[N]]=e.config[h[N]]===!0||e.config[h[N]]==="true";Nn.filter(function(z){return e.config[z]!==void 0}).forEach(function(z){e.config[z]=Bn(e.config[z]||[]).map(a)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var N=0;N<e.config.plugins.length;N++){var U=e.config.plugins[N](e)||{};for(var $ in U)Nn.indexOf($)>-1?e.config[$]=Bn(U[$]).map(a).concat(e.config[$]):typeof p[$]>"u"&&(e.config[$]=U[$])}p.altInputClass||(e.config.altInputClass=Ci().className+" "+e.config.altInputClass),te("onParseConfig")}function Ci(){return e.config.wrap?o.querySelector("[data-input]"):o}function Si(){typeof e.config.locale!="object"&&typeof oe.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=he(he({},oe.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?oe.l10ns[e.config.locale]:void 0),ht.D="("+e.l10n.weekdays.shorthand.join("|")+")",ht.l="("+e.l10n.weekdays.longhand.join("|")+")",ht.M="("+e.l10n.months.shorthand.join("|")+")",ht.F="("+e.l10n.months.longhand.join("|")+")",ht.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var h=he(he({},t),JSON.parse(JSON.stringify(o.dataset||{})));h.time_24hr===void 0&&oe.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=aa(e),e.parseDate=ri({config:e.config,l10n:e.l10n})}function rn(h){if(typeof e.config.position=="function")return void e.config.position(e,h);if(e.calendarContainer!==void 0){te("onPreCalendarPosition");var p=h||e._positionElement,x=Array.prototype.reduce.call(e.calendarContainer.children,function(Ea,Ta){return Ea+Ta.offsetHeight},0),k=e.calendarContainer.offsetWidth,A=e.config.position.split(" "),O=A[0],G=A.length>1?A[1]:null,N=p.getBoundingClientRect(),U=window.innerHeight-N.bottom,$=O==="above"||O!=="below"&&U<x&&N.top>x,z=window.pageYOffset+N.top+($?-x-2:p.offsetHeight+2);if(ve(e.calendarContainer,"arrowTop",!$),ve(e.calendarContainer,"arrowBottom",$),!e.config.inline){var Q=window.pageXOffset+N.left,ze=!1,De=!1;G==="center"?(Q-=(k-N.width)/2,ze=!0):G==="right"&&(Q-=k-N.width,De=!0),ve(e.calendarContainer,"arrowLeft",!ze&&!De),ve(e.calendarContainer,"arrowCenter",ze),ve(e.calendarContainer,"arrowRight",De);var Nt=window.document.body.offsetWidth-(window.pageXOffset+N.right),kt=Q+k>window.document.body.offsetWidth,wa=Nt+k>window.document.body.offsetWidth;if(ve(e.calendarContainer,"rightMost",kt),!e.config.static)if(e.calendarContainer.style.top=z+"px",!kt)e.calendarContainer.style.left=Q+"px",e.calendarContainer.style.right="auto";else if(!wa)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Nt+"px";else{var En=ua();if(En===void 0)return;var ba=window.document.body.offsetWidth,Ma=Math.max(0,ba/2-k/2),ka=".flatpickr-calendar.centerMost:before",Ca=".flatpickr-calendar.centerMost:after",Sa=En.cssRules.length,Da="{left:"+N.left+"px;right:auto;}";ve(e.calendarContainer,"rightMost",!1),ve(e.calendarContainer,"centerMost",!0),En.insertRule(ka+","+Ca+Da,Sa),e.calendarContainer.style.left=Ma+"px",e.calendarContainer.style.right="auto"}}}}function ua(){for(var h=null,p=0;p<document.styleSheets.length;p++){var x=document.styleSheets[p];if(x.cssRules){try{x.cssRules}catch{continue}h=x;break}}return h??da()}function da(){var h=document.createElement("style");return document.head.appendChild(h),h.sheet}function Di(){e.config.noCalendar||e.isMobile||(F(),sn(),P())}function kn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Ei(h){h.preventDefault(),h.stopPropagation();var p=function(z){return z.classList&&z.classList.contains("flatpickr-day")&&!z.classList.contains("flatpickr-disabled")&&!z.classList.contains("notAllowed")},x=ra(Ee(h),p);if(x!==void 0){var k=x,A=e.latestSelectedDateObj=new Date(k.dateObj.getTime()),O=(A.getMonth()<e.currentMonth||A.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=k,e.config.mode==="single")e.selectedDates=[A];else if(e.config.mode==="multiple"){var G=Sn(A);G?e.selectedDates.splice(parseInt(G),1):e.selectedDates.push(A)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=A,e.selectedDates.push(A),Te(A,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(z,Q){return z.getTime()-Q.getTime()}));if(d(),O){var N=e.currentYear!==A.getFullYear();e.currentYear=A.getFullYear(),e.currentMonth=A.getMonth(),N&&(te("onYearChange"),F()),te("onMonthChange")}if(sn(),P(),Xe(),!O&&e.config.mode!=="range"&&e.config.showMonths===1?T(k):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var U=e.config.mode==="single"&&!e.config.enableTime,$=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(U||$)&&kn()}v()}}var an={locale:[Si,Y],showMonths:[V,s,R],minDate:[b],maxDate:[b],positionElement:[Pi],clickOpens:[function(){e.config.clickOpens===!0?(f(e._input,"focus",e.open),f(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function fa(h,p){if(h!==null&&typeof h=="object"){Object.assign(e.config,h);for(var x in h)an[x]!==void 0&&an[x].forEach(function(k){return k()})}else e.config[h]=p,an[h]!==void 0?an[h].forEach(function(k){return k()}):Nn.indexOf(h)>-1&&(e.config[h]=Bn(p));e.redraw(),Xe(!0)}function Ti(h,p){var x=[];if(h instanceof Array)x=h.map(function(k){return e.parseDate(k,p)});else if(h instanceof Date||typeof h=="number")x=[e.parseDate(h,p)];else if(typeof h=="string")switch(e.config.mode){case"single":case"time":x=[e.parseDate(h,p)];break;case"multiple":x=h.split(e.config.conjunction).map(function(k){return e.parseDate(k,p)});break;case"range":x=h.split(e.l10n.rangeSeparator).map(function(k){return e.parseDate(k,p)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(h)));e.selectedDates=e.config.allowInvalidPreload?x:x.filter(function(k){return k instanceof Date&&Le(k,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(k,A){return k.getTime()-A.getTime()})}function ha(h,p,x){if(p===void 0&&(p=!1),x===void 0&&(x=e.config.dateFormat),h!==0&&!h||h instanceof Array&&h.length===0)return e.clear(p);Ti(h,x),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),b(void 0,p),m(),e.selectedDates.length===0&&e.clear(!1),Xe(p),p&&te("onChange")}function Ii(h){return h.slice().map(function(p){return typeof p=="string"||typeof p=="number"||p instanceof Date?e.parseDate(p,void 0,!0):p&&typeof p=="object"&&p.from&&p.to?{from:e.parseDate(p.from,void 0),to:e.parseDate(p.to,void 0)}:p}).filter(function(p){return p})}function ma(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var h=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);h&&Ti(h,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function ga(){if(e.input=Ci(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=q(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Pi()}function Pi(){e._positionElement=e.config.positionElement||e._input}function pa(){var h=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=q("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=h,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=h==="datetime-local"?"Y-m-d\\TH:i:S":h==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}f(e.mobileInput,"change",function(p){e.setDate(Ee(p).value,!1,e.mobileFormatStr),te("onChange"),te("onClose")})}function va(h){if(e.isOpen===!0)return e.close();e.open(h)}function te(h,p){if(e.config!==void 0){var x=e.config[h];if(x!==void 0&&x.length>0)for(var k=0;x[k]&&k<x.length;k++)x[k](e.selectedDates,e.input.value,e,p);h==="onChange"&&(e.input.dispatchEvent(Cn("change")),e.input.dispatchEvent(Cn("input")))}}function Cn(h){var p=document.createEvent("Event");return p.initEvent(h,!0,!0),p}function Sn(h){for(var p=0;p<e.selectedDates.length;p++){var x=e.selectedDates[p];if(x instanceof Date&&Te(x,h)===0)return""+p}return!1}function ya(h){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Te(h,e.selectedDates[0])>=0&&Te(h,e.selectedDates[1])<=0}function sn(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(h,p){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+p),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[p].textContent=xn(x.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=x.getMonth().toString(),h.value=x.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Dn(h){var p=h||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(x){return e.formatDate(x,p)}).filter(function(x,k,A){return e.config.mode!=="range"||e.config.enableTime||A.indexOf(x)===k}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Xe(h){h===void 0&&(h=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Dn(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Dn(e.config.altFormat)),h!==!1&&te("onValueUpdate")}function _a(h){var p=Ee(h),x=e.prevMonthNav.contains(p),k=e.nextMonthNav.contains(p);x||k?K(x?-1:1):e.yearElements.indexOf(p)>=0?p.select():p.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):p.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function xa(h){h.preventDefault();var p=h.type==="keydown",x=Ee(h),k=x;e.amPM!==void 0&&x===e.amPM&&(e.amPM.textContent=e.l10n.amPM[$e(e.amPM.textContent===e.l10n.amPM[0])]);var A=parseFloat(k.getAttribute("min")),O=parseFloat(k.getAttribute("max")),G=parseFloat(k.getAttribute("step")),N=parseInt(k.value,10),U=h.delta||(p?h.which===38?1:-1:0),$=N+G*U;if(typeof k.value<"u"&&k.value.length===2){var z=k===e.hourElement,Q=k===e.minuteElement;$<A?($=O+$+$e(!z)+($e(z)&&$e(!e.amPM)),Q&&C(void 0,-1,e.hourElement)):$>O&&($=k===e.hourElement?$-O-$e(!e.amPM):A,Q&&C(void 0,1,e.hourElement)),e.amPM&&z&&(G===1?$+N===23:Math.abs($-N)>G)&&(e.amPM.textContent=e.l10n.amPM[$e(e.amPM.textContent===e.l10n.amPM[0])]),k.value=we($)}}return i(),e}function At(o,t){for(var e=Array.prototype.slice.call(o).filter(function(a){return a instanceof HTMLElement}),n=[],i=0;i<e.length;i++){var r=e[i];try{if(r.getAttribute("data-fp-omit")!==null)continue;r._flatpickr!==void 0&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=xo(r,t||{}),n.push(r._flatpickr)}catch(a){console.error(a)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(o){return At(this,o)},HTMLElement.prototype.flatpickr=function(o){return At([this],o)});var oe=function(o,t){return typeof o=="string"?At(window.document.querySelectorAll(o),t):o instanceof Node?At([o],t):At(o,t)};oe.defaultConfig={};oe.l10ns={en:he({},Zt),default:he({},Zt)};oe.localize=function(o){oe.l10ns.default=he(he({},oe.l10ns.default),o)};oe.setDefaults=function(o){oe.defaultConfig=he(he({},oe.defaultConfig),o)};oe.parseDate=ri({});oe.formatDate=aa({});oe.compareDates=Te;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(o){return At(this,o)});Date.prototype.fp_incr=function(o){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof o=="string"?parseInt(o,10):o))};typeof window<"u"&&(window.flatpickr=oe);class wo{constructor(){this.audioHandler=Va.getInstance(),this.marketDataService=new Ga,this.mask=null,this.picker=null,this.ui={datePickerInput:document.getElementById("date-picker"),btnToday:document.getElementById("btn-today"),marketInfo:document.getElementById("market-info"),valSentiment:document.getElementById("val-mood-state"),valFearGreed:document.getElementById("risk-val"),valVix:document.getElementById("val-vix"),headlinesContainer:document.getElementById("headlines-container"),dateText:document.getElementById("date-text"),btnDatePrev:document.getElementById("btn-date-prev"),btnDateNext:document.getElementById("btn-date-next")},this.init()}async init(){await this.marketDataService.init();const t=Object.keys(this.marketDataService.dataMap||{});t.length===0&&console.error("Critical: No market data found for calendar."),this.picker=oe(this.ui.datePickerInput,{dateFormat:"Y-m-d",defaultDate:t.sort().pop()||"today",theme:"dark",disable:[n=>{const i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),s=`${i}-${r}-${a}`;return this.marketDataService.dataMap?!this.marketDataService.dataMap[s]:!0}],onChange:n=>{n.length>0&&(this.loadDate(n[0]),this.updateDateDisplay(n[0]))}}),this.validDates=t.sort(),this.ui.btnDatePrev&&this.ui.btnDatePrev.addEventListener("click",()=>this.navigateDate(-1)),this.ui.btnDateNext&&this.ui.btnDateNext.addEventListener("click",()=>this.navigateDate(1)),this.ui.timelineSlider=document.getElementById("timeline-slider"),this.ui.timelineStart=document.getElementById("timeline-start"),this.ui.timelineCurrent=document.getElementById("timeline-current"),this.ui.timelineCanvas=document.getElementById("timeline-canvas"),this.ui.btnPlay=document.getElementById("btn-play"),this.isPlaying=!1,this.playInterval=null,this.ui.timelineSlider&&(this.ui.timelineSlider.min=0,this.ui.timelineSlider.max=t.length-1,this.ui.timelineStart.textContent=t[0],this.drawTimeline(t),this.ui.timelineSlider.addEventListener("input",n=>{this.stopPlay();const i=parseInt(n.target.value),r=t.sort()[i];if(r){const a=new Date(r+"T00:00:00");this.picker.setDate(a,!1),this.loadDate(a),this.updateDateDisplay(a)}}),this.ui.btnPlay&&this.ui.btnPlay.addEventListener("click",()=>this.togglePlay(t))),console.log("[AppController] About to call setupEventListeners"),this.setupEventListeners(),console.log("[AppController] setupEventListeners completed");const e=t.sort().pop();e?this.picker.setDate(e,!0):this.loadDate(new Date)}drawTimeline(t){if(!this.ui.timelineCanvas||!this.marketDataService.dataMap)return;const e=this.ui.timelineCanvas,n=e.getContext("2d"),i=e.parentElement.offsetWidth,r=e.parentElement.offsetHeight,a=window.devicePixelRatio||1;e.width=i*a,e.height=r*a,n.scale(a,a);const s=t.map(g=>this.marketDataService.dataMap[g]),l=s.length,c=i/l;n.fillStyle="rgba(0,0,0,0.2)",n.fillRect(0,0,i,r),n.strokeStyle="rgba(255,255,255,0.05)",n.lineWidth=1,n.beginPath();for(let g=1;g<4;g++){const y=r/4*g;n.moveTo(0,y),n.lineTo(i,y)}if(n.stroke(),l===0)return;s.forEach((g,y)=>{if(!g)return;const f=g.intradayRange||.5,v=g.fearGreedIndex||50,_=Math.min(1,f/3)*r,b=y*c,w=Math.max(1,c-.5);let C,E,M;v<50?(C=255,E=Math.floor(v/50*255),M=0):(C=Math.floor((100-v)/50*255),E=255,M=0),n.fillStyle=`rgba(${C}, ${E}, ${M}, 0.5)`,n.fillRect(b,r-_,w,_)});const u=10,d=60,m=g=>r-(Math.min(d,Math.max(u,g))-u)/(d-u)*(r*.9);n.strokeStyle="#ffffff",n.lineWidth=2.5,n.lineJoin=n.lineCap="round",n.beginPath(),s.forEach((g,y)=>{if(!g)return;const f=y*c+c/2,v=m(g.vix||15);y===0?n.moveTo(f,v):n.lineTo(f,v)}),n.stroke()}togglePlay(t){this.isPlaying?this.stopPlay():this.startPlay(t)}startPlay(t){this.isPlaying||(this.isPlaying=!0,this.ui.btnPlay.textContent="â¸",this.playInterval=setInterval(()=>{let e=parseInt(this.ui.timelineSlider.value);e>=t.length-1&&(e=-1),this.ui.timelineSlider.value=++e;const n=t.sort()[e],i=new Date(n+"T00:00:00");this.picker.setDate(i,!1),this.loadDate(i)},200))}stopPlay(){this.isPlaying=!1,this.ui.btnPlay.textContent="â¶",this.playInterval&&clearInterval(this.playInterval)}setupEventListeners(){this.ui.btnToday&&this.ui.btnToday.addEventListener("click",()=>{this.stopPlay(),this.picker.setDate(new Date,!0)}),this.initCommandSearch()}initCommandSearch(){console.log("[CommandSearch] Initializing...");const t=document.getElementById("command-search-overlay"),e=document.getElementById("command-search-modal"),n=document.getElementById("command-search-input"),i=document.getElementById("search-results"),r=document.getElementById("btn-search");if(console.log("[CommandSearch] Elements found:",{overlay:!!t,modal:!!e,input:!!n,resultsContainer:!!i,searchButton:!!r}),!t||!n){console.error("[CommandSearch] Required elements not found! Aborting.");return}this.searchState={isOpen:!1,selectedIndex:-1,results:[],activeFilter:null},r&&(console.log("[CommandSearch] Adding click listener to search button"),r.addEventListener("click",()=>{console.log("[CommandSearch] Search button clicked!"),this.openCommandSearch()})),document.addEventListener("keydown",a=>{(a.metaKey||a.ctrlKey)&&a.key==="k"&&(a.preventDefault(),this.toggleCommandSearch()),a.key==="Escape"&&this.searchState.isOpen&&this.closeCommandSearch(),this.searchState.isOpen&&(a.key==="ArrowDown"?(a.preventDefault(),this.navigateSearchResults(1)):a.key==="ArrowUp"?(a.preventDefault(),this.navigateSearchResults(-1)):a.key==="Enter"&&(a.preventDefault(),this.executeSelectedResult()))}),t.addEventListener("click",a=>{a.target===t&&this.closeCommandSearch()}),n.addEventListener("input",a=>{console.log("[CommandSearch] Input changed:",a.target.value),this.handleSearchInput(a.target.value)}),document.querySelectorAll(".hint-item").forEach(a=>{a.addEventListener("click",()=>{n.value=a.dataset.query,this.handleSearchInput(a.dataset.query)})}),document.querySelectorAll(".result-item[data-action]").forEach(a=>{a.addEventListener("click",()=>{this.executeQuickAction(a.dataset.action)})}),document.querySelectorAll(".sector-chip").forEach(a=>{a.addEventListener("click",()=>{this.filterBySector(a.dataset.sector),a.classList.toggle("active")})}),document.querySelectorAll(".condition-item").forEach(a=>{a.addEventListener("click",()=>{this.filterByCondition(a.dataset.condition)})})}toggleCommandSearch(){this.searchState.isOpen?this.closeCommandSearch():this.openCommandSearch()}openCommandSearch(){const t=document.getElementById("command-search-overlay"),e=document.getElementById("command-search-input");t.classList.remove("hidden"),this.searchState.isOpen=!0,setTimeout(()=>e.focus(),100),this.stopPlay()}closeCommandSearch(){const t=document.getElementById("command-search-overlay"),e=document.getElementById("command-search-input");t.classList.add("hidden"),this.searchState.isOpen=!1,e.value="",this.searchState.selectedIndex=-1,this.resetSearchResults()}resetSearchResults(){document.querySelectorAll(".search-section").forEach(e=>e.style.display="block");const t=document.querySelector(".dynamic-results");t&&t.remove(),document.querySelectorAll(".result-item.selected").forEach(e=>{e.classList.remove("selected")})}handleSearchInput(t){var l,c;if(console.log("[handleSearchInput] Called with:",t),t=t.trim().toLowerCase(),!t){this.resetSearchResults();return}const e=[],n=Object.keys(this.marketDataService.dataMap||{}).sort();console.log("[handleSearchInput] Valid dates count:",n.length);const i=u=>(u==null?void 0:u.marketChangePercent)??(u==null?void 0:u.dailyChange)??(u==null?void 0:u.percentChange)??0,r=this.generateSmartSuggestions(t,n);console.log("[handleSearchInput] Suggestions:",r.length);const a=this.parseDateQuery(t);if(a){const u=this.marketDataService.dataMap[a];u&&e.push({type:"date",date:a,label:`ð ${a} - NASDAQ ${((l=u.indexValue)==null?void 0:l.toLocaleString())||"--"}`,change:i(u),extra:`VIX: ${((c=u.vix)==null?void 0:c.toFixed(1))||"--"} | F&G: ${u.fearGreedIndex||"--"}`})}if(t.match(/highest|peak|best|top|max|record/)){const u=this.findExtremes("highest",t,n,i);e.push(...u.slice(0,8))}if(t.match(/lowest|valley|worst|bottom|min|crash|dip/)){const u=this.findExtremes("lowest",t,n,i);e.push(...u.slice(0,8))}const s=t.match(/(nasdaq|sp|s&p|dow|djia)\s*(?:at|near|hits?|reached?|crossed?)?\s*(\d{3,6})/i);if(s){const u=this.findByIndexValue(s[1],parseInt(s[2]),n,i);e.push(...u.slice(0,8))}if(t.match(/vix|volatil|spike|calm|stable/)){const u=this.searchByVIX(t,n,i);e.push(...u.slice(0,8))}if(t.match(/fear|greed|panic|euphori|sentiment/)){const u=this.searchByFearGreed(t,n,i);e.push(...u.slice(0,8))}if(t.match(/gain|loss|rally|crash|selloff|drop|surge|jump|biggest|largest|green|red|\+\d|\-\d|\d%/)){const u=this.searchByChange(t,n,i);e.push(...u.slice(0,8))}if(t.match(/tech|financ|energy|health|industrial|utility|material|consumer|real estate|communication/)){const u=this.searchBySector(t,n,i);e.push(...u.slice(0,8))}if(t.match(/today|yesterday|last week|this month|this year|recent|latest|q1|q2|q3|q4/)){const u=this.searchByTimeframe(t,n,i);e.push(...u.slice(0,8))}if(t.match(/yield|inverted|bond|treasury|rate|10y|2y|spread/)){const u=this.searchByYield(t,n,i);e.push(...u.slice(0,8))}if(t.match(/volatile|swing|whipsaw|range|breakout|consolidat/)){const u=this.searchByVolatilityPattern(t,n,i);e.push(...u.slice(0,8))}if(t.match(/streak|consecutive|row|days up|days down|winning|losing/)){const u=this.findStreaks(t,n,i);e.push(...u.slice(0,8))}if(t.match(/vs|versus|compare|outperform|underperform|beat|lag/)){const u=this.searchByComparison(t,n,i);e.push(...u.slice(0,8))}console.log("[handleSearchInput] Final results:",e.length,"suggestions:",r.length),this.displaySearchResults(e,r)}generateSmartSuggestions(t,e){const n=t.toLowerCase();return[{trigger:"high",text:"ð Highest NASDAQ day",action:"highest nasdaq"},{trigger:"high",text:"ð Highest S&P 500 day",action:"highest sp500"},{trigger:"low",text:"ð Lowest NASDAQ day",action:"lowest nasdaq"},{trigger:"low",text:"ð Lowest S&P 500 day",action:"lowest sp500"},{trigger:"peak",text:"ðï¸ Market peak (all-time high)",action:"peak nasdaq"},{trigger:"valley",text:"ð³ï¸ Market valley (bottom)",action:"valley nasdaq"},{trigger:"crash",text:"ð¥ Biggest crash day",action:"biggest crash"},{trigger:"rally",text:"ð Biggest rally day",action:"biggest rally"},{trigger:"vix",text:"â¡ VIX spike days (>30)",action:"vix > 30"},{trigger:"vix",text:"ð Low VIX days (<15)",action:"vix < 15"},{trigger:"fear",text:"ð± Extreme fear days",action:"extreme fear"},{trigger:"greed",text:"ð¤ Extreme greed days",action:"extreme greed"},{trigger:"nasd",text:"ð NASDAQ at specific value...",action:"nasdaq "},{trigger:"sp",text:"ð S&P 500 at specific value...",action:"sp500 "},{trigger:"s&p",text:"ð S&P 500 at specific value...",action:"sp500 "},{trigger:"best",text:"ð Best performing day",action:"best day"},{trigger:"worst",text:"ð Worst performing day",action:"worst day"},{trigger:"streak",text:"ð¥ Winning streaks",action:"winning streak"},{trigger:"streak",text:"âï¸ Losing streaks",action:"losing streak"},{trigger:"volatile",text:"ð Most volatile days",action:"most volatile"},{trigger:"tech",text:"ð» Tech sector performance",action:"tech sector"},{trigger:"financ",text:"ð¦ Financials sector",action:"financial sector"},{trigger:"energy",text:"â½ Energy sector",action:"energy sector"},{trigger:"yield",text:"ð Inverted yield curve days",action:"inverted yield"},{trigger:"today",text:"ð Today's data",action:"today"},{trigger:"last",text:"ð Last week",action:"last week"},{trigger:"recent",text:"ð Recent trading days",action:"recent"},{trigger:"+",text:"ð Days with gains over...",action:"gain > "},{trigger:"-",text:"ð Days with losses over...",action:"loss > "},{trigger:"record",text:"ð¯ Record high days",action:"record high"},{trigger:"panic",text:"ð¨ Panic selling days",action:"panic"},{trigger:"euphori",text:"ð Euphoria days",action:"euphoria"}].filter(r=>n.length>0&&r.trigger.startsWith(n.substring(0,Math.min(n.length,r.trigger.length)))).slice(0,5)}parseDateQuery(t){const e=t.match(/(\d{4}-\d{2}-\d{2})/);if(e&&this.marketDataService.dataMap[e[1]])return e[1];const n=["january","february","march","april","may","june","july","august","september","october","november","december"],i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];for(let r=0;r<n.length;r++){const a=new RegExp(`(${n[r]}|${i[r]})\\s*(\\d{1,2})(?:,?\\s*(\\d{4}))?`,"i"),s=t.match(a);if(s){const l=String(r+1).padStart(2,"0"),c=String(s[2]).padStart(2,"0"),d=`${s[3]||new Date().getFullYear()}-${l}-${c}`;if(this.marketDataService.dataMap[d])return d}}return null}findExtremes(t,e,n,i){const r=[];let a="indexValue",s="NASDAQ";e.match(/sp|s&p|500/)?(a="sp500Value",s="S&P 500"):e.match(/dow|djia/)?(a="dowValue",s="DOW"):e.match(/vix/)?(a="vix",s="VIX"):e.match(/gain|change|rally|move/)&&(a="marketChangePercent",s="Daily Change");let l=null,c=t==="highest"?-1/0:1/0;for(const d of n){const m=this.marketDataService.dataMap[d],g=(m==null?void 0:m[a])??0;(t==="highest"&&g>c||t==="lowest"&&g<c)&&(c=g,l=d)}if(l){const d=this.marketDataService.dataMap[l],m=a==="marketChangePercent"?`${c>=0?"+":""}${c.toFixed(2)}%`:c.toLocaleString();r.push({type:"extreme",date:l,label:`${t==="highest"?"ð":"ð"} ${t.toUpperCase()} ${s}: ${m} on ${l}`,change:i(d),value:c})}const u=n.map(d=>{var m;return{date:d,data:this.marketDataService.dataMap[d],value:((m=this.marketDataService.dataMap[d])==null?void 0:m[a])??0}}).filter(d=>d.value!==0).sort((d,m)=>t==="highest"?m.value-d.value:d.value-m.value).slice(0,5);for(const d of u)if(d.date!==l){const m=a==="marketChangePercent"?`${d.value>=0?"+":""}${d.value.toFixed(2)}%`:d.value.toLocaleString();r.push({type:"extreme",date:d.date,label:`${s}: ${m} on ${d.date}`,change:i(d.data),value:d.value})}return r}findByIndexValue(t,e,n,i){const r=[];let a="indexValue",s="NASDAQ";t.match(/sp|s&p/i)?(a="sp500Value",s="S&P 500"):t.match(/dow|djia/i)&&(a="dowValue",s="DOW");const l=e*.01;for(const c of n){const u=this.marketDataService.dataMap[c],d=(u==null?void 0:u[a])??0;Math.abs(d-e)<=l&&r.push({type:"value-match",date:c,label:`ð¯ ${s} at ${d.toLocaleString()} on ${c}`,change:i(u),value:d,diff:Math.abs(d-e)})}if(r.sort((c,u)=>c.diff-u.diff),r.length===0){const c=n.map(u=>{var d,m;return{date:u,data:this.marketDataService.dataMap[u],value:((d=this.marketDataService.dataMap[u])==null?void 0:d[a])??0,diff:Math.abs((((m=this.marketDataService.dataMap[u])==null?void 0:m[a])??0)-e)}}).filter(u=>u.value>0).sort((u,d)=>u.diff-d.diff).slice(0,5);for(const u of c)r.push({type:"value-near",date:u.date,label:`ð ${s} at ${u.value.toLocaleString()} (target: ${e.toLocaleString()})`,change:i(u.data),value:u.value})}return r}searchByVIX(t,e,n){const i=[];let r=20,a=">";const s=t.match(/vix\s*([<>]=?)\s*(\d+)/i);s?(a=s[1],r=parseFloat(s[2])):t.match(/high|spike|fear|panic/)?(r=25,a=">"):t.match(/low|calm|stable|quiet/)&&(r=15,a="<");for(const l of e){const c=this.marketDataService.dataMap[l],u=(c==null?void 0:c.vix)||0;let d=!1;a===">"&&u>r&&(d=!0),a===">="&&u>=r&&(d=!0),a==="<"&&u<r&&(d=!0),a==="<="&&u<=r&&(d=!0),d&&i.push({type:"vix",date:l,label:`â¡ VIX ${u.toFixed(1)} on ${l}`,change:n(c),vix:u})}return i.sort((l,c)=>a.includes(">")?c.vix-l.vix:l.vix-c.vix),i}searchByFearGreed(t,e,n){const i=[];let r=0,a=100;t.match(/extreme fear|panic/)?(r=0,a=25):t.match(/fear/)?(r=0,a=45):t.match(/extreme greed|euphori/)?(r=75,a=100):t.match(/greed/)?(r=55,a=100):t.match(/neutral/)&&(r=40,a=60);for(const s of e){const l=this.marketDataService.dataMap[s],c=(l==null?void 0:l.fearGreedIndex)??50;if(c>=r&&c<=a){const u=c<25?"ð±":c<45?"ð°":c<55?"ð":c<75?"ð":"ð¤";i.push({type:"feargreed",date:s,label:`${u} F&G ${c} on ${s}`,change:n(l),fg:c})}}return t.match(/fear|panic/)?i.sort((s,l)=>s.fg-l.fg):i.sort((s,l)=>l.fg-s.fg),i}searchByChange(t,e,n){const i=[];for(const r of e){const a=this.marketDataService.dataMap[r],s=n(a);i.push({type:"change",date:r,label:`${s>=0?"ð":"ð"} ${s>=0?"+":""}${s.toFixed(2)}% on ${r}`,change:s})}return t.match(/gain|rally|surge|jump|green|best|top|\+/)?i.sort((r,a)=>a.change-r.change):i.sort((r,a)=>r.change-a.change),i}searchBySector(t,e,n){var s;const i=[],r={tech:{symbol:"XLK",name:"Technology"},financ:{symbol:"XLF",name:"Financials"},energy:{symbol:"XLE",name:"Energy"},health:{symbol:"XLV",name:"Healthcare"},industrial:{symbol:"XLI",name:"Industrials"},utility:{symbol:"XLU",name:"Utilities"},material:{symbol:"XLB",name:"Materials"},consumer:{symbol:"XLY",name:"Consumer"},"real estate":{symbol:"XLRE",name:"Real Estate"},communication:{symbol:"XLC",name:"Communication"}};let a=null;for(const[l,c]of Object.entries(r))if(t.includes(l)){a=c;break}if(!a)return i;for(const l of e){const c=this.marketDataService.dataMap[l],u=(s=c==null?void 0:c.sectors)==null?void 0:s.find(d=>d.symbol===a.symbol);if(u){const d=u.change??0;i.push({type:"sector",date:l,label:`ð­ ${a.name} ${d>=0?"+":""}${d.toFixed(2)}% on ${l}`,change:n(c),sectorChange:d})}}return i.sort((l,c)=>Math.abs(c.sectorChange)-Math.abs(l.sectorChange)),i}searchByTimeframe(t,e,n){var l;const i=[],r=new Date;let a=null,s=r;if(t.includes("today")?a=r:t.includes("yesterday")?(a=new Date(r),a.setDate(a.getDate()-1),s=a):t.includes("last week")?(a=new Date(r),a.setDate(a.getDate()-7)):t.includes("this month")?a=new Date(r.getFullYear(),r.getMonth(),1):(t.includes("recent")||t.includes("latest"))&&(a=new Date(r),a.setDate(a.getDate()-5)),!a)return i;for(const c of e.reverse()){const u=new Date(c+"T00:00:00");if(u>=a&&u<=s){const d=this.marketDataService.dataMap[c];i.push({type:"timeframe",date:c,label:`ð ${c} - NASDAQ ${((l=d==null?void 0:d.indexValue)==null?void 0:l.toLocaleString())||"--"}`,change:n(d)})}if(i.length>=10)break}return i}searchByYield(t,e,n){const i=[];for(const r of e){const a=this.marketDataService.dataMap[r],s=a==null?void 0:a.yieldCurve;if(s){const l=(s.y10??0)-(s.y2??s.y3m??0),c=l<0;t.includes("invert")&&c?i.push({type:"yield",date:r,label:`ð Inverted curve (spread: ${l.toFixed(2)}%) on ${r}`,change:n(a),spread:l}):t.includes("invert")||i.push({type:"yield",date:r,label:`ð Yield spread: ${l.toFixed(2)}% on ${r}`,change:n(a),spread:l})}}return i.sort((r,a)=>r.spread-a.spread),i}searchByVolatilityPattern(t,e,n){const i=[];for(let r=5;r<e.length;r++){const s=e.slice(r-5,r).map(c=>Math.abs(n(this.marketDataService.dataMap[c]))),l=s.reduce((c,u)=>c+u,0)/s.length;if(l>1.5){const c=this.marketDataService.dataMap[e[r]];i.push({type:"volatility",date:e[r],label:`ð High volatility period (avg ${l.toFixed(2)}%) on ${e[r]}`,change:n(c),volatility:l})}}return i.sort((r,a)=>a.volatility-r.volatility),i}findStreaks(t,e,n){const i=[];let r=0,a=t.includes("winning")||t.includes("up")?"up":"down";for(let s=0;s<e.length;s++){const c=n(this.marketDataService.dataMap[e[s]])>0;a==="up"&&c||a==="down"&&!c?(r===0&&e[s],r++):(r>=3&&i.push({type:"streak",date:e[s-1],label:`${a==="up"?"ð¥":"âï¸"} ${r}-day ${a==="up"?"winning":"losing"} streak ending ${e[s-1]}`,change:n(this.marketDataService.dataMap[e[s-1]]),streakLength:r}),r=0)}return i.sort((s,l)=>l.streakLength-s.streakLength),i}searchByComparison(t,e,n){const i=[];for(const r of e){const a=this.marketDataService.dataMap[r],s=(a==null?void 0:a.marketChangePercent)??0,l=(a==null?void 0:a.sp500Change)??0,c=s-l;t.includes("outperform")&&c>.5?i.push({type:"compare",date:r,label:`ð NASDAQ outperformed S&P by ${c.toFixed(2)}% on ${r}`,change:n(a),diff:c}):t.includes("underperform")&&c<-.5&&i.push({type:"compare",date:r,label:`ð NASDAQ underperformed S&P by ${Math.abs(c).toFixed(2)}% on ${r}`,change:n(a),diff:c})}return i.sort((r,a)=>Math.abs(a.diff)-Math.abs(r.diff)),i}displaySearchResults(t,e=[]){const n=document.getElementById("search-results"),i=document.getElementById("command-search-input");(t.length>0||e.length>0)&&document.querySelectorAll(".search-section").forEach(c=>c.style.display="none");const r=document.querySelector(".dynamic-results");r&&r.remove();const a=document.createElement("div");a.className="dynamic-results";let s="";if(e.length>0&&(s=`
                <div class="suggestions-section">
                    <div class="section-label">ð¡ SUGGESTIONS</div>
                    ${e.map(c=>`
                        <div class="suggestion-item" data-action="${c.action}">
                            ${c.text}
                        </div>
                    `).join("")}
                </div>
            `),t.length===0&&e.length===0){a.innerHTML='<div class="no-results">No matches found. Try: "highest nasdaq", "vix > 25", "crash days"</div>',n.appendChild(a);return}const l=t.length>0?`
            <div class="search-section">
                <div class="section-label">ð RESULTS (${t.length})</div>
                ${t.slice(0,10).map((c,u)=>{const d=c.change??0,m=d>=0;return`
                        <div class="result-item ${u===0?"selected":""}" data-date="${c.date}">
                            <span class="result-label">${c.label}</span>
                            <span class="change-badge ${m?"positive":"negative"}">
                                ${m?"+":""}${d.toFixed(2)}%
                            </span>
                        </div>
                    `}).join("")}
            </div>
        `:"";a.innerHTML=s+l,n.appendChild(a),a.querySelectorAll(".suggestion-item").forEach(c=>{c.addEventListener("click",()=>{i.value=c.dataset.action,this.handleSearchInput(c.dataset.action)})}),a.querySelectorAll(".result-item").forEach(c=>{c.addEventListener("click",()=>{const u=c.dataset.date;u&&(this.navigateToDate(u),this.closeCommandSearch())})}),this.searchState.results=t,this.searchState.selectedIndex=t.length>0?0:-1}navigateSearchResults(t){const e=document.querySelectorAll(".dynamic-results .result-item, .search-results .result-item[data-action]");e.length!==0&&(e.forEach(n=>n.classList.remove("selected")),this.searchState.selectedIndex+=t,this.searchState.selectedIndex<0&&(this.searchState.selectedIndex=e.length-1),this.searchState.selectedIndex>=e.length&&(this.searchState.selectedIndex=0),e[this.searchState.selectedIndex].classList.add("selected"),e[this.searchState.selectedIndex].scrollIntoView({block:"nearest"}))}executeSelectedResult(){const t=document.querySelector(".result-item.selected");t&&(t.dataset.date?(this.navigateToDate(t.dataset.date),this.closeCommandSearch()):t.dataset.action&&this.executeQuickAction(t.dataset.action))}executeQuickAction(t){var i,r,a,s,l;const e=Object.keys(this.marketDataService.dataMap||{}).sort();let n=null;switch(t){case"biggest-gain":let c=-1/0;for(const m of e){const g=((i=this.marketDataService.dataMap[m])==null?void 0:i.dailyChange)||0;g>c&&(c=g,n=m)}break;case"biggest-loss":let u=1/0;for(const m of e){const g=((r=this.marketDataService.dataMap[m])==null?void 0:r.dailyChange)||0;g<u&&(u=g,n=m)}break;case"highest-vix":let d=0;for(const m of e){const g=((a=this.marketDataService.dataMap[m])==null?void 0:a.vix)||0;g>d&&(d=g,n=m)}break;case"extreme-fear":for(const m of e.reverse())if((((s=this.marketDataService.dataMap[m])==null?void 0:s.fearGreedIndex)??50)<25){n=m;break}break;case"extreme-greed":for(const m of e.reverse())if((((l=this.marketDataService.dataMap[m])==null?void 0:l.fearGreedIndex)??50)>75){n=m;break}break}n&&(this.navigateToDate(n),this.closeCommandSearch())}filterBySector(t){const e=document.getElementById("command-search-input");e.value=`sector:${t}`,this.handleSearchInput(e.value)}filterByCondition(t){const e=document.getElementById("command-search-input");if(t.includes("change"))t.includes("-gt-")?e.value="biggest gains":t.includes("-lt-")&&(e.value="biggest losses");else if(t.includes("vix")){const n=t.match(/vix-gt-(\d+)/),i=t.match(/vix-lt-(\d+)/);n?e.value=`vix > ${n[1]}`:i&&(e.value=`vix < ${i[1]}`)}this.handleSearchInput(e.value)}navigateToDate(t){const e=new Date(t+"T00:00:00");this.picker.setDate(e,!1),this.loadDate(e),this.updateDateDisplay(e);const i=Object.keys(this.marketDataService.dataMap||{}).sort().indexOf(t);i>=0&&this.ui.timelineSlider&&(this.ui.timelineSlider.value=i)}navigateDate(t){if(!this.validDates||this.validDates.length===0)return;const e=this.picker.selectedDates[0];if(!e)return;const n=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=`${n}-${i}-${r}`,s=this.validDates.indexOf(a);if(s===-1)return;const l=s+t;if(l<0||l>=this.validDates.length)return;const c=this.validDates[l],u=new Date(c+"T00:00:00");this.picker.setDate(u,!1),this.loadDate(u),this.updateDateDisplay(u),this.ui.timelineSlider&&(this.ui.timelineSlider.value=l)}updateDateDisplay(t){if(!this.ui.dateText||!t)return;const e=t.getFullYear();String(t.getMonth()+1).padStart(2,"0");const n=String(t.getDate()).padStart(2,"0"),a=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${n}, ${e}`;this.ui.dateText.textContent=a}loadDate(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=`${e}-${n}-${i}`,a=this.marketDataService.getDataForDate(t);this.updateUI(a,!a||a.regime==="Data Missing",r),this.updateVisuals(a),this.updateDateDisplay(t)}updateUI(t,e,n){console.log("[updateUI] CALLED with data:",t?t.date:"NONE");const i=document.getElementById("market-status");i&&(i.classList.toggle("hidden",!e),e&&(i.textContent=`Market Closed on ${n}. Data from ${t.date}`)),document.getElementById("val-index").textContent=t.indexValue.toLocaleString();const r=document.getElementById("val-change");r.textContent=(t.marketChangePercent>0?"+":"")+t.marketChangePercent+"%",r.className="change-pill "+(t.marketChangePercent>=0?"positive":"negative");const a=document.getElementById("val-sp500");a.textContent=t.sp500Value?t.sp500Value.toLocaleString():"--";const s=document.getElementById("val-sp500-change");if(s.textContent=t.sp500Value?(t.sp500Change>0?"+":"")+t.sp500Change+"%":"--%",s.className="change-pill "+(t.sp500Change>=0?"positive":"negative"),this.ui.marketInfo.classList.remove("hidden"),this.ui.valSentiment){this.ui.valSentiment.textContent=t.moodState?t.moodState.toUpperCase():"NEUTRAL";let l="#ffffff";const c=(t.moodState||"").toLowerCase();c.includes("panic")||c.includes("fear")||c.includes("bear")?l="#ff5050":c.includes("greed")||c.includes("euphoria")||c.includes("bull")?l="#00ffaa":c.includes("anxiety")&&(l="#ffcc00"),this.ui.valSentiment.style.color=l;const u=document.getElementById("val-regime");if(u&&t.regime&&(u.textContent=t.regime+" Regime"),this.ui.yield&&(this.ui.yield.textContent=t.yield10y),this.ui.valVix){this.ui.valVix.textContent=t.vix;const w=parseFloat(t.vix);isNaN(w)||(w<18?this.ui.valVix.style.color="#00ffaa":w>25?this.ui.valVix.style.color="#ff5050":this.ui.valVix.style.color="#ffffff")}const d=document.getElementById("val-volume");if(d){const w=t.volume||0;d.textContent=w>1e9?(w/1e9).toFixed(1)+"B":(w/1e6).toFixed(1)+"M"}this.ui.range52w&&(this.ui.range52w.textContent=t.range52w||"15222.78 - 20204.58");const m=t.fearGreedIndex||50;let g="NEUTRAL",y="#ffffff";if(m<=25?(g=`EXTREME FEAR (${m})`,y="#ff5050"):m<=45?(g=`FEAR (${m})`,y="#ffaa50"):m<=55?(g=`NEUTRAL (${m})`,y="#ffffff"):m<=75?(g=`GREED (${m})`,y="#50ffaa"):(g=`EXTREME GREED (${m})`,y="#00ffaa"),this.ui.valSentiment){this.ui.valSentiment.textContent=g,this.ui.valSentiment.style.color=y,this.ui.valSentiment.style.fontWeight="bold";const w=document.getElementById("val-regime");w&&(w.textContent="CNN Fear & Greed Index",w.style.fontSize="0.7em",w.style.opacity="0.7")}const f=document.getElementById("val-day-range");f&&(f.textContent=t.dayLow?`${t.dayLow} - ${t.dayHigh}`:"--");const v=document.getElementById("val-52w-range");if(v&&(v.textContent=t.yearLow?`${t.yearLow} - ${t.yearHigh}`:"--"),this.ui.timelineSlider&&this.marketDataService.dataMap){const C=Object.keys(this.marketDataService.dataMap).sort().indexOf(t.date);C!==-1&&(this.ui.timelineSlider.value=C,this.ui.timelineCurrent.textContent=t.date)}this.ui.headlinesContainer.innerHTML="",t.headlines.forEach(w=>{const C=typeof w=="object"&&w!==null,E=C?w.title:w,M=C?w.link:"#",T=document.createElement("p");T.style.margin="0",T.innerHTML=`<a href="${M}" target="_blank" rel="noopener noreferrer" style="cursor:pointer">${E}</a>`,this.ui.headlinesContainer.appendChild(T)});const _=this.ui.marketInfo.querySelector(".sources");if(_&&_.remove(),t.sources){const w=document.createElement("div");w.className="sources",w.style.cssText="font-size:0.7em; opacity:0.5; margin-top:1rem; border-top:1px solid rgba(255,255,255,0.1); padding-top:0.5rem;",w.textContent="Data Sources: "+t.sources[0]+", "+t.sources[1],this.ui.marketInfo.appendChild(w)}this.renderTreemap(t),this.drawIndexChart(t),this.updateMarketBreadth(t);const b=document.getElementById("velocity-marker");b&&t.fearGreedIndex&&(b.style.left=t.fearGreedIndex+"%")}console.log("[updateUI] Running AI scan, data:",t?t.date:"undefined"),this.runAIPatternScan(t)}updateMarketBreadth(t){if(!t.sectorMap)return;let e=0,n=0;Object.values(t.sectorMap).forEach(c=>{(typeof c=="object"?c.change:c)>=0?e++:n++});const i=e+n||1,r=e/i*100,a=document.getElementById("breadth-fill"),s=document.getElementById("breadth-up"),l=document.getElementById("breadth-down");a&&(a.style.width=r+"%"),s&&(s.textContent=`${e} Up`),l&&(l.textContent=`${n} Down`)}renderTreemap(t){const e=document.getElementById("treemap-container");if(!e||!t.sectorMap)return;let n=[];Object.keys(t.sectorMap).forEach(m=>{const g=t.sectorMap[m],y=typeof g=="object"?g.change:g,f=typeof g=="object"?g.weight:1;n.push({id:m,val:y,weight:f})}),n.sort((m,g)=>g.weight-m.weight),e.innerHTML="";const i={x:0,y:0,w:e.clientWidth,h:e.clientHeight};if(i.w===0||i.h===0)return;const r=(m,g)=>{if(m.length===0)return 0;const y=m.reduce((b,w)=>b+w.area,0),f=g*g,v=y*y;let _=0;for(let b of m){const w=b.area,C=Math.max(f*w/v,v/(f*w));C>_&&(_=C)}return _},a=(m,g,y,f,v)=>{const _=document.createElement("div");_.className="sector-cell",_.style.left=g+"px",_.style.top=y+"px",_.style.width=Math.max(0,f-1)+"px",_.style.height=Math.max(0,v-1)+"px";const b=m.val;let w,C;if(b>=0){const T=Math.min(1,b/3),I=11,S=46+T*40;w=`rgb(${I}, ${S}, 30)`,C="#4ade80"}else w=`rgb(${46+Math.min(1,Math.abs(b)/3)*40}, 11, 11)`,C="#f87171";_.style.backgroundColor=w,_.style.color=C,_.style.border="1px solid rgba(0,0,0,0.3)",_.style.boxShadow="inset 0 0 10px rgba(0,0,0,0.2)";const M={XLK:"Technology",XLF:"Financials",XLV:"Healthcare",XLY:"Discretionary",XLP:"Staples",XLE:"Energy",XLI:"Industrials",XLB:"Materials",XLU:"Utilities",XLRE:"Real Estate",XLC:"Comm. Svcs"}[m.id]||m.id;_.innerHTML=`
                <div style="text-align:center; pointer-events:none; width:100%; overflow:hidden; display:flex; flex-direction:column; justify-content:center; height:100%;">
                    <span style="display:block; font-size:0.8em; font-weight:700; color:white; margin-bottom:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; padding:0 2px;">${M}</span>
                    <span style="font-size:0.85em; font-weight:600;">${b>0?"+":""}${b}%</span>
                </div>
            `,_.title=`${M}: ${b}%`,e.appendChild(_)},s=(m,g)=>{const y=m.reduce((v,_)=>v+_.area,0);if(g.w<g.h){const v=y/g.w;let _=g.x;m.forEach(b=>{const w=b.area/v;a(b,_,g.y,w,v),_+=w}),g.y+=v,g.h-=v}else{const v=y/g.h;let _=g.y;m.forEach(b=>{const w=b.area/v;a(b,g.x,_,v,w),_+=w}),g.x+=v,g.w-=v}},l=n.reduce((m,g)=>m+g.weight,0),c=i.w*i.h/l;n.forEach(m=>m.area=m.weight*c);let u=[],d=[...n];for(;d.length>0;){const m=d[0],g=Math.min(i.w,i.h),y=[...u,m],f=r(u,g),v=r(y,g);if(u.length===0||v<=f)u.push(m),d.shift();else if(s(u,i),u=[],i.w<=0||i.h<=0)break}u.length>0&&s(u,i)}drawIndexChart(t){const e=document.getElementById("market-chart");if(!e||!this.marketDataService.dataMap)return;const n=e.getContext("2d"),i=e.width,r=e.height;n.clearRect(0,0,i,r);const a=Object.keys(this.marketDataService.dataMap).sort(),s=a.indexOf(t.date);if(s===-1)return;const l=Math.max(0,s-30),u=a.slice(l,s+1).map(v=>this.marketDataService.dataMap[v].indexValue||0),d=Math.min(...u),g=Math.max(...u)-d||1,y=u[u.length-1]>=u[0];n.strokeStyle=y?"#00ffaa":"#ff5050",n.lineWidth=2,n.lineJoin="round",n.beginPath(),u.forEach((v,_)=>{const b=_/(u.length-1)*i,C=(r-(v-d)/g*r)*.8+r*.1;_===0?n.moveTo(b,C):n.lineTo(b,C)}),n.stroke();const f=n.createLinearGradient(0,0,0,r);f.addColorStop(0,y?"rgba(0, 255, 170, 0.2)":"rgba(255, 80, 80, 0.2)"),f.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=f,n.lineTo(i,r),n.lineTo(0,r),n.fill()}runAIPatternScan(t){var R,Y;const e=document.getElementById("ai-analyst-text");if(!e||!t)return;const n=t.fearGreedIndex||50,i=parseFloat(t.vix)||15,r=parseFloat(t.marketChangePercent)||0;parseFloat(t.sp500Change),parseFloat(t.dowChange);const a=t.rsi||50,s=t.yieldSpread||0,l=t.date||"";(R=t.indexValue)!=null&&R.toLocaleString(),(Y=t.sp500Value)!=null&&Y.toLocaleString();let c="NEUTRAL",u="#ffffff",d="â",m="#ffffff11";n<=25?(c="EXTREME FEAR",u="#ff5050",d="â ",m="#ff505022"):n<=40?(c="FEAR",u="#ff7744",d="â",m="#ff774422"):n>=75?(c="EXTREME GREED",u="#00ffaa",d="â¡",m="#00ffaa22"):n>=60?(c="GREED",u="#50ffaa",d="â",m="#50ffaa22"):i>25?(c="HIGH VOLATILITY",u="#ff5050",d="â¡",m="#ff505022"):i<15&&r>0&&(c="RISK-ON",u="#00ffaa",d="â",m="#00ffaa22");let g="",y="#8899a6";r>1.5?(g="ð¢ Rally",y="#00ffaa"):r>.5?(g="ð¢ Up",y="#50ffaa"):r>0?(g="ð¡ +",y="#ffcc00"):r<-1.5?(g="ð´ Selloff",y="#ff5050"):r<-.5?(g="ð´ Down",y="#ff7744"):r<0?(g="ð¡ -",y="#ffcc00"):(g="âª Flat",y="#8899a6");let f="",v="";if(t.sectorMap){const L={XLK:"Tech",XLF:"Financials",XLV:"Healthcare",XLE:"Energy",XLI:"Industrials",XLU:"Utilities",XLY:"Consumer Discretionary",XLP:"Consumer Staples",XLB:"Materials",XLRE:"Real Estate",XLC:"Communications"},K=Object.entries(t.sectorMap);let le=null,Ye=null,_e=-1/0,fe=1/0;K.forEach(([Mt,et])=>{const Le=typeof et=="object"?et.change:et;Le>_e&&(_e=Le,le=Mt),Le<fe&&(fe=Le,Ye=Mt)}),f=L[le]||le||"",v=L[Ye]||Ye||""}let _="";const b=Math.abs(r);n<=25&&i>25?_=`ð¨ Capitulation conditions present. Extreme fear with volatility spiking. ${v?`${v} under heavy selling pressure.`:""} Historically, these washouts mark bottoms. Smart money accumulates here.`:n<=25&&r<-1?_=`ð Broad risk-off as fear dominates. Markets searching for support levels. ${f?`Only ${f} showing any resilience.`:""} Oversold conditions may trigger a technical bounce.`:n>=75&&r>1?_=`ð Euphoric rally pushing into overbought territory. ${f?`${f} leading the charge.`:""} Late-stage momentum â exercise caution. Mean reversion risk elevated.`:n>=60&&r>.5?_=`ðª Bulls firmly in control with strong breadth. ${f?`${f} outperforming the broader market.`:""} Momentum favors continuation. Dips likely to be bought.`:i>25?_=`â¡ Volatility surging â expect wild price swings. ${v?`${v} taking the brunt of selling.`:""} Options premiums elevated. Consider hedging or reducing exposure.`:r<-1.5?_=`ð´ Sharp selling across the board. ${v?`${v} leading losses.`:""} Key support levels being tested. Watch for follow-through or reversal signals.`:r>1.5?_=`ð¢ Strong rally with broad participation. ${f?`${f} surging.`:""} Bulls in command â momentum intact. Technical breakout signals possible.`:b<.3&&i<18?_="ð´ Quiet consolidation day. Markets coiling for the next move. Low volatility suggests complacency. Watch for breakout catalysts.":r>0&&n<45?_=`ð± Tentative green despite lingering fear. ${f?`${f} leading.`:""} Early signs of stabilization. Sentiment still fragile but improving.`:r<0&&n>55?_=`ð Mild pullback amid greedy sentiment. ${v?`${v} seeing some profit-taking.`:""} Healthy consolidation or start of rotation? Monitor closely.`:r>0?_=`ð Modest gains with balanced sentiment. ${f?`${f} showing relative strength.`:""} Risk appetite present but not aggressive.`:r<0?_=`ð Slight weakness across indices. ${v?`${v} underperforming.`:""} Cautious tone but no panic. Watch for continuation or support.`:_="âï¸ Indecisive session with markets little changed. Neither bulls nor bears with conviction. Wait for clearer directional signals.";let w="",C="#8899a6";s<0?(w="â ï¸ Inverted (Recession Signal)",C="#ff5050"):s<.5?(w="â¡ Flat (Slowing)",C="#ffcc00"):(w="â Normal",C="#50ffaa");let E="";f&&v&&(E=`<span style="color:#50ffaa">â² ${f}</span> <span style="color:#ff7744">â¼ ${v}</span>`);let M=50;M+=(n-50)*.4,M+=r*8,M-=(i-18)*1.5,M+=s>0?5:-10,M=Math.max(0,Math.min(100,Math.round(M)));let T="Balanced",I="#ffffff";M>=70?(T="Strong",I="#00ffaa"):M>=55?(T="Healthy",I="#50ffaa"):M<=30?(T="Weak",I="#ff5050"):M<=45&&(T="Fragile",I="#ff7744");let S=50;r>0&&i<18&&(S+=20),r<0&&i>22&&(S-=20),n>60&&r<0&&(S-=10),n<40&&r>0&&(S+=15),S=Math.max(0,Math.min(100,Math.round(S)));let B=S>=60?"Inflow":S<=40?"Outflow":"Neutral",W=S>=60?"#50ffaa":S<=40?"#ff7744":"#8899a6",P=50;P+=(i-18)*2,P-=(n-50)*.3,s<0&&(P+=20),Math.abs(r)>2&&(P+=15),P=Math.max(0,Math.min(100,Math.round(P)));let F="Moderate",H="#ffcc00";P>=70?(F="Elevated",H="#ff5050"):P>=55?(F="Caution",H="#ff7744"):P<=30?(F="Low",H="#00ffaa"):P<=45&&(F="Calm",H="#50ffaa");let V=50+r*15+(a-50)*.3;V=Math.max(0,Math.min(100,Math.round(V)));let j=V>=65?"â Bullish":V<=35?"â Bearish":"â Neutral",D=V>=65?"#50ffaa":V<=35?"#ff7744":"#8899a6";e.innerHTML=`
            <div style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px; flex-wrap: nowrap; white-space: nowrap; overflow: hidden;">
                <span style="background: ${m}; color: ${u}; padding: 3px 8px; border-radius: 4px; font-size: 0.7em; font-weight: 700; letter-spacing: 0.3px; box-shadow: 0 0 8px ${u}44; flex-shrink: 0;">
                    ${d} ${c}
                </span>
                <span style="font-size: 0.7em; color: var(--text-faint); flex-shrink: 0;">${l}</span>
                <span style="margin-left: auto; font-size: 0.7em; color: ${y}; font-weight: 600; flex-shrink: 0;">${g}</span>
            </div>
            
            <div style="font-size: 0.9em; line-height: 1.7; color: var(--text-main); margin-bottom: 12px;">
                ${_}
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 10px; font-size: 0.7em;">
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${I};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">PULSE</div>
                    <div style="color: ${I}; font-weight: 700; font-size: 1.1em;">${M}</div>
                    <div style="color: ${I}; font-size: 0.8em;">${T}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${W};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">FLOW</div>
                    <div style="color: ${W}; font-weight: 700; font-size: 1.1em;">${S}</div>
                    <div style="color: ${W}; font-size: 0.8em;">${B}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${H};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">RISK</div>
                    <div style="color: ${H}; font-weight: 700; font-size: 1.1em;">${P}</div>
                    <div style="color: ${H}; font-size: 0.8em;">${F}</div>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 8px 6px; border-radius: 4px; text-align: center; border-bottom: 2px solid ${D};">
                    <div style="color: var(--text-faint); font-size: 0.9em; margin-bottom: 2px;">MOMO</div>
                    <div style="color: ${D}; font-weight: 700; font-size: 1.1em;">${V}</div>
                    <div style="color: ${D}; font-size: 0.8em;">${j}</div>
                </div>
            </div>
            
            <div style="display: flex; gap: 12px; flex-wrap: wrap; font-size: 0.75em; color: var(--text-faint); padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                <span>ð Yield: <strong style="color: ${C}">${w}</strong></span>
                ${E?`<span>ð­ ${E}</span>`:""}
            </div>
        `,e.style.borderLeft=`3px solid ${u}`,e.style.paddingLeft="12px",e.style.background=`linear-gradient(135deg, ${u}08, transparent)`,e.style.borderRadius="0 8px 8px 0",e.style.padding="12px"}updateVisuals(t){if(!this.mask)try{this.mask=gt.getInstance()}catch(e){console.warn("Mask instance not ready yet",e)}this.mask&&this.mask.updateVisualization?(console.log("[AppController] Updating mask visualization with data:",t.date),this.mask.updateVisualization(t)):console.warn("[AppController] Mask not available for visualization update")}drawSparkline(t,e,n=null){const i=document.getElementById(t);if(!i)return;const r=i.getContext("2d"),a=i.width,s=i.height;if(r.clearRect(0,0,a,s),!e||e.length<2)return;const l=Math.min(...e),u=Math.max(...e)-l||1,d=e[e.length-1]>=e[0],m=n||(d?"#00ffaa":"#ff5050");r.strokeStyle=m,r.lineWidth=1.5,r.lineJoin="round",r.beginPath(),e.forEach((y,f)=>{const v=f/(e.length-1)*a,_=s-(y-l)/u*(s-4)-2;f===0?r.moveTo(v,_):r.lineTo(v,_)}),r.stroke();const g=r.createLinearGradient(0,0,0,s);g.addColorStop(0,m),g.addColorStop(1,"rgba(0,0,0,0)"),r.globalAlpha=.15,r.fillStyle=g,r.lineTo(a,s),r.lineTo(0,s),r.fill(),r.globalAlpha=1}updateLeaderboard(t){const e=document.getElementById("leaders-list"),n=document.getElementById("laggards-list");if(!t.sectorMap||!e||!n)return;const i=Object.entries(t.sectorMap).map(([a,s])=>({id:a,val:typeof s=="object"?s.change:s}));i.sort((a,s)=>s.val-a.val);const r=a=>`<div>${a.id}: ${a.val>0?"+":""}${a.val}%</div>`;e.innerHTML=i.slice(0,3).map(r).join(""),n.innerHTML=i.slice(-3).reverse().map(r).join("")}updateAIAnalystList(t,e){const n=document.getElementById("ai-signals-list");if(!n)return;let i=[];if(i.push(`System State: <span class="ai-signal">${t.moodState}</span> (${t.regime})`),t.marketChangePercent>1?i.push('<span class="ai-signal" style="color:#00ffaa">Strong Breadth</span>: Buyers dominant (>1%)'):t.marketChangePercent<-1&&i.push('<span class="ai-signal" style="color:#ff5050">Distribution</span>: Heavy selling pressure'),t.sectorMap){const u=Object.entries(t.sectorMap).map(([v,_])=>({id:v,val:_.change||_}));u.sort((v,_)=>_.val-v.val);const d=u[0],m=u[u.length-1],g={XLK:"Tech",XLF:"Financials",XLV:"Health",XLE:"Energy",XLI:"Industrials",XLU:"Utilities"},y=g[d.id]||d.id,f=g[m.id]||m.id;d.val>.5&&i.push(`Rotation into <span class="ai-signal">${y}</span> (+${d.val}%)`),m.val<-.5&&i.push(`Weakness in <span class="ai-signal" style="color:#ff5050">${f}</span> (${m.val}%)`)}const r=t.rsi||50;r>75?i.push(`RSI Divergence: <span class="ai-signal" style="color:#ff5050">Overbought</span> (${r.toFixed(0)})`):r<25&&i.push(`RSI Compression: <span class="ai-signal" style="color:#00ffaa">Oversold</span> (${r.toFixed(0)})`);const a=parseFloat(t.vix);a>30&&i.push(`Volatility Spiking: VIX ${a} (Defensive Posture)`),t.volumeRatio>1.5?i.push(`Institutional Volume: ${t.volumeRatio}x Average`):t.volumeRatio<.6&&i.push(`Low Liquidity Environment (${t.volumeRatio}x Vol)`);const s=t.tenYearYield||4;s>4.5?i.push(`Macro Headwind: 10Y Yields Elevated (${s}%)`):s<3.5&&i.push(`Yield Support: Rates stabilizing (${s}%)`);const l=["Pattern: Bull Flag detected on hourly.","Pattern: Consolidation ahead of breakout.","Sentiment: Retail sentiment is cooling.","Flows: Net positive delta in dark pools.","Algo: HFT activity detected at close."],c=t.date.split("").reduce((u,d)=>u+d.charCodeAt(0),0);i.push(l[c%l.length]),n.innerHTML=i.map(u=>`<li>${u}</li>`).join("")}updateUI(t,e,n){const i=document.getElementById("market-status");if(i&&(i.classList.toggle("hidden",!e),e&&(i.textContent=`Market Closed on ${n}. Data from ${t.date}`)),document.getElementById("val-index")){const D=t.indexValue!==void 0?t.indexValue:0;document.getElementById("val-index").textContent=D.toLocaleString(void 0,{maximumFractionDigits:2});const R=document.getElementById("val-change");if(R){const Y=parseFloat(t.marketChangePercent||0).toFixed(2);R.textContent=(t.marketChangePercent>0?"+":"")+Y+"%",R.className="change-pill "+(t.marketChangePercent>0?"positive":"negative")}}if(document.getElementById("val-sp500")){const D=t.sp500Value!==void 0?t.sp500Value:0;document.getElementById("val-sp500").textContent=D.toLocaleString(void 0,{maximumFractionDigits:2});const R=document.getElementById("val-sp500-change");if(R){const Y=parseFloat(t.sp500Change||0).toFixed(2);R.textContent=(t.sp500Change>0?"+":"")+Y+"%",R.className="change-pill "+(t.sp500Change>0?"positive":"negative")}}const r=document.getElementById("val-volume");if(r){const D=t.volume;isNaN(D)?r.textContent=D||"--":r.textContent=D>1e9?(D/1e9).toFixed(1)+"B":(D/1e6).toFixed(1)+"M"}const a=document.getElementById("val-vix");if(a){const D=parseFloat(t.vix);a.textContent=isNaN(D)?"--":D.toFixed(2),isNaN(D)||(a.style.color=D>20?"#ff5050":D<15?"#00ffaa":"#ffffff")}const s=document.getElementById("val-52w-range");if(s){const D=t.yearLow?parseFloat(t.yearLow).toFixed(2):"--",R=t.yearHigh?parseFloat(t.yearHigh).toFixed(2):"--";s.textContent=t.yearLow&&t.yearHigh?`${D} - ${R}`:"--"}if(document.getElementById("val-gold")){const D=parseFloat(t.gold);document.getElementById("val-gold").textContent=isNaN(D)?"--":D.toLocaleString(void 0,{maximumFractionDigits:1})}if(document.getElementById("val-oil")){const D=parseFloat(t.oil);document.getElementById("val-oil").textContent=isNaN(D)?"--":D.toFixed(2)}if(this.drawIndexChart&&this.drawIndexChart(t),!this.marketDataService.dataMap)return;const l=Object.keys(this.marketDataService.dataMap).sort(),c=l.indexOf(t.date);let u=[],d=[],m=[],g=0,y=0,f=0;if(c!==-1){const D=Math.max(0,c-20),R=l.slice(D,c+1);u=R.map(L=>this.marketDataService.dataMap[L].indexValue),d=R.map(L=>this.marketDataService.dataMap[L].sp500Value),m=R.map(L=>this.marketDataService.dataMap[L].tenYearYield||4);const Y=L=>L.length<2?0:(L[L.length-1]-L[0])/L[0]*100;g=Y(u).toFixed(2),y=Y(d).toFixed(2),f=Y(m).toFixed(2)}this.drawSparkline("chart-nasdaq",u),this.drawSparkline("chart-sp500",d),this.drawSparkline("chart-yield",m,"#cc99ff");const v=(D,R,Y)=>{const L=document.getElementById(D);L&&(L.textContent=R,L.style.color=Y)},_=D=>D>=0?"#00ffaa":"#ff5050";v("val-index-mini",t.indexValue.toLocaleString(),"#fff"),v("pch-nasdaq",(g>0?"+":"")+g+"%",_(g)),v("val-sp500-mini",t.sp500Value.toLocaleString(),"#fff"),v("pch-sp500",(y>0?"+":"")+y+"%",_(y)),v("val-yield-mini",(t.tenYearYield||4)+"%","#fff"),v("pch-yield",(f>0?"+":"")+f+"%",_(f));const b=t.rsi||50,w=document.getElementById("meter-rsi"),C=document.getElementById("val-rsi");w&&(w.style.width=`${b}%`,w.style.backgroundColor=b>70?"#ff5050":b<30?"#00ffaa":"#ffcc00"),C&&(C.textContent=b.toFixed(1));const E=t.volumeRatio||1,M=document.getElementById("meter-rvol"),T=document.getElementById("val-rvol");if(M){const D=Math.min(100,E/2*100);M.style.width=`${D}%`,M.style.backgroundColor=E>1?"#00ffaa":"#ffffff"}if(T&&(T.textContent=E.toFixed(2)+"x"),this.updateLeaderboard(t),this.updateAIAnalystList(t),this.ui.headlinesContainer.innerHTML="",t.headlines.forEach(D=>{const R=typeof D=="object"&&D!==null,Y=R?D.title:D,L=R?D.link:"#",K=document.createElement("p");K.style.margin="0",K.innerHTML=`<a href="${L}" target="_blank" rel="noopener noreferrer" style="cursor:pointer">${Y}</a>`,this.ui.headlinesContainer.appendChild(K)}),this.ui.valSentiment){this.ui.valSentiment.textContent=t.moodState.toUpperCase();const D=t.fearGreedIndex;let R="NEUTRAL",Y="#ffffff";D<=25?(R=`EXTREME FEAR (${D})`,Y="#ff5050"):D<=45?(R=`FEAR (${D})`,Y="#ffaa50"):D<=55?(R=`NEUTRAL (${D})`,Y="#ffffff"):D<=75?(R=`GREED (${D})`,Y="#50ffaa"):(R=`EXTREME GREED (${D})`,Y="#00ffaa"),this.ui.valSentiment.textContent=R,this.ui.valSentiment.style.color=Y}const I=document.getElementById("val-regime");I&&(I.textContent="CNN Fear & Greed Index");const S=this.determineRulingGod(t);if(!this.mask&&gt&&typeof gt.getInstance=="function"&&(this.mask=gt.getInstance()),this.mask&&typeof this.mask.switchModel=="function"&&S&&(this.mask.switchModel(S),this.ui.valSentiment&&(this.ui.valSentiment.textContent=S.toUpperCase(),this.ui.valSentiment.style.color="#FFD700"),this.postProcessing)){let D={strength:1,threshold:.25,radius:.1};switch(S){case"zeus":D={strength:2.5,threshold:.1,radius:.2};break;case"dionysus":D={strength:2,threshold:.15,radius:.3};break;case"hades":case"poseidon":D={strength:.6,threshold:.4,radius:.05};break;case"hypnos":case"chronos":D={strength:.8,threshold:.3,radius:0};break;case"ares":D={strength:1.5,threshold:.3,radius:.05};break;case"apollo":case"athena":D={strength:1.2,threshold:.2,radius:.25};break}this.postProcessing.setBloomParams(D)}const B=document.getElementById("val-fear-greed");if(B&&t.fearGreedIndex!==void 0){const D=t.fearGreedIndex;let R=D,Y="#ffffff";if(D<=25?(R=`${D} Â· Extreme Fear`,Y="#ff5050"):D<=45?(R=`${D} Â· Fear`,Y="#ffaa50"):D<=55?(R=`${D} Â· Neutral`,Y="#ffffff"):D<=75?(R=`${D} Â· Greed`,Y="#50ffaa"):(R=`${D} Â· Extreme Greed`,Y="#00ffaa"),this.audioHandler&&typeof this.audioHandler.setMood=="function"){let L="neutral";D<=25?L="extreme_fear":D<=45?L="fear":D<=55?L="neutral":D<=75?L="greed":L="extreme_greed",this.audioHandler.setMood(L),t.vix&&typeof this.audioHandler.setDistortionLevel=="function"&&this.audioHandler.setDistortionLevel(parseFloat(t.vix))}B.textContent=R,B.style.color=Y}if(document.getElementById("val-yield-curve")){const D=parseFloat(t.yieldCurve);document.getElementById("val-yield-curve").textContent=isNaN(D)?"--":D.toFixed(2)+"%"}if(document.getElementById("val-dxy")){const D=parseFloat(t.dollarIndex);document.getElementById("val-dxy").textContent=isNaN(D)?"--":D.toFixed(2)}if(this.updateGodInformation(t,S),document.getElementById("val-dow")){const D=parseFloat(t.dowValue);document.getElementById("val-dow").textContent=isNaN(D)?"--":D.toLocaleString(void 0,{maximumFractionDigits:2});const R=document.getElementById("val-dow-change");if(R){const Y=parseFloat(t.dowChange);isNaN(Y)?R.textContent="--":(R.textContent=(Y>0?"+":"")+Y.toFixed(2)+"%",R.className="change-pill "+(Y>0?"positive":"negative"))}}this.renderTreemap(t),this.updateMarketBreadth(t);const W=document.getElementById("velocity-marker");W&&t.fearGreedIndex&&(W.style.left=t.fearGreedIndex+"%");const P=document.getElementById("risk-marker"),F=document.getElementById("risk-val");if(P&&t.fearGreedIndex!==void 0&&(P.style.left=t.fearGreedIndex+"%",F)){const D=t.fearGreedIndex;D<40?(F.textContent="Risk Off",F.style.color="#ff5050"):D>60?(F.textContent="Risk On",F.style.color="#00ffaa"):(F.textContent="Neutral",F.style.color="#ffffff")}if(this.ui.timelineSlider&&this.marketDataService.dataMap){const R=Object.keys(this.marketDataService.dataMap).sort().indexOf(t.date);R!==-1&&(this.ui.timelineSlider.value=R,this.ui.timelineCurrent.textContent=t.date)}const H=document.getElementById("val-dow");H&&(H.textContent=t.dowValue?parseFloat(t.dowValue).toLocaleString(void 0,{maximumFractionDigits:2}):"--");const V=document.getElementById("val-dow-change");if(V){const D=t.dowChange||0;V.textContent=(D>0?"+":"")+D+"%",V.className="change-pill "+(D>=0?"positive":"negative")}this.ui.currentDataCache=t,this.drawIndexChart(t),this.drawYieldCurve(t);const j=document.getElementById("headlines-container");j&&t.headlines&&(j.innerHTML="",t.headlines.slice(0,10).forEach(D=>{const R=typeof D=="object"&&D!==null,Y=R?D.title:D,L=R?D.link:"#",K=document.createElement("p");K.style.margin="0",K.style.marginBottom="6px",K.innerHTML=`<a href="${L}" target="_blank" rel="noopener noreferrer">${Y}</a>`,j.appendChild(K)})),this.runAIPatternScan(t)}setupEventListeners(){var n,i,r,a,s;this.ui.btnToday&&this.ui.btnToday.addEventListener("click",()=>{this.stopPlay(),this.picker.setDate(new Date,!0)});const t=["nasdaq","sp500","dow"],e=l=>{this.activeChart=l;const c={nasdaq:"NASDAQ",sp500:"S&P 500",dow:"DOW JONES"},u=document.getElementById("chart-title");u&&(u.textContent=c[l]),["row-nasdaq","row-sp500","row-dow"].forEach(g=>{const y=document.getElementById(g);y&&y.classList.remove("active-row")});const d="row-"+l,m=document.getElementById(d);m&&m.classList.add("active-row"),this.ui.currentDataCache&&this.drawIndexChart(this.ui.currentDataCache)};(n=document.getElementById("row-nasdaq"))==null||n.addEventListener("click",()=>e("nasdaq")),(i=document.getElementById("row-sp500"))==null||i.addEventListener("click",()=>e("sp500")),(r=document.getElementById("row-dow"))==null||r.addEventListener("click",()=>e("dow")),(a=document.getElementById("btn-chart-prev"))==null||a.addEventListener("click",()=>{let l=t.indexOf(this.activeChart);l=(l-1+t.length)%t.length,e(t[l])}),(s=document.getElementById("btn-chart-next"))==null||s.addEventListener("click",()=>{let l=t.indexOf(this.activeChart);l=(l+1)%t.length,e(t[l])}),this.initCommandSearch()}drawYieldCurve(t){const e=document.getElementById("yield-curve-chart");if(!e)return;const n=window.devicePixelRatio||1,i=e.getBoundingClientRect();e.width=i.width*n,e.height=i.height*n;const r=e.getContext("2d");r.scale(n,n);const a=i.width,s=i.height;r.clearRect(0,0,a,s);let l={};Array.isArray(t.yieldCurve)&&t.yieldCurve.forEach(P=>{l[P.maturity]=P.val});const c=l["3M"]||t.threeMonthYield||4.3,u=l["5Y"]||t.fiveYearYield||4,d=l["10Y"]||t.tenYearYield||4.2,m=l["30Y"]||t.thirtyYearYield||4.5,g=[{months:3,val:c},{months:60,val:u},{months:120,val:d},{months:360,val:m}],y=(P,F,H,V,j)=>H+(j-H)*(P-F)/(V-F),f=P=>{if(P<=g[0].months)return g[0].val;if(P>=g[g.length-1].months)return g[g.length-1].val;for(let F=0;F<g.length-1;F++)if(P>=g[F].months&&P<=g[F+1].months)return y(P,g[F].months,g[F].val,g[F+1].months,g[F+1].val);return d},_=[{label:"3M",months:3},{label:"6M",months:6},{label:"1Y",months:12},{label:"2Y",months:24},{label:"3Y",months:36},{label:"5Y",months:60},{label:"7Y",months:84},{label:"10Y",months:120},{label:"20Y",months:240},{label:"30Y",months:360}].map(P=>({maturity:P.label,val:f(P.months),isReal:P.months===3||P.months===60||P.months===120||P.months===360})),b=_.map(P=>P.val),w=Math.min(...b)-.2,C=Math.max(...b)+.2,E=C-w||1,M={left:35,right:10,top:15,bottom:20},T=a-M.left-M.right,I=s-M.top-M.bottom,S=P=>M.left+P/(_.length-1)*T,B=P=>M.top+I-(P-w)/E*I;r.strokeStyle="rgba(255, 255, 255, 0.1)",r.lineWidth=1,r.setLineDash([2,2]);for(let P=0;P<=4;P++){const F=M.top+I/4*P;r.beginPath(),r.moveTo(M.left,F),r.lineTo(a-M.right,F),r.stroke()}r.setLineDash([]),r.beginPath(),r.strokeStyle="#00ffcc",r.lineWidth=2,r.lineCap="round",r.lineJoin="round";for(let P=0;P<_.length;P++){const F=S(P),H=B(_[P].val);if(P===0)r.moveTo(F,H);else{const V=S(P-1),j=B(_[P-1].val),D=(V+F)/2;r.quadraticCurveTo(V+(F-V)*.5,j,D,(j+H)/2),r.quadraticCurveTo(D,H,F,H)}}r.stroke();const W=r.createLinearGradient(0,M.top,0,s);W.addColorStop(0,"rgba(0, 255, 204, 0.2)"),W.addColorStop(1,"rgba(0, 255, 204, 0)"),r.lineTo(S(_.length-1),s),r.lineTo(S(0),s),r.closePath(),r.fillStyle=W,r.fill(),_.forEach((P,F)=>{const H=S(F),V=B(P.val);r.beginPath(),P.isReal?(r.arc(H,V,4,0,Math.PI*2),r.fillStyle="#00ffcc"):(r.arc(H,V,2,0,Math.PI*2),r.fillStyle="#888888"),r.fill()}),r.fillStyle="rgba(255, 255, 255, 0.7)",r.font='10px "Space Mono", monospace',r.textAlign="center",_.forEach((P,F)=>{if(F%2===0||F===_.length-1){const H=S(F);r.fillText(P.maturity,H,s-3)}}),r.textAlign="right",r.fillStyle="rgba(255, 255, 255, 0.6)",r.font='10px "Space Mono", monospace',r.fillText(C.toFixed(1)+"%",M.left-3,M.top+4),r.fillText(w.toFixed(1)+"%",M.left-3,s-M.bottom),_[0].val>_[_.length-1].val&&(r.fillStyle="#ff5050",r.font='bold 10px "Space Mono", monospace',r.textAlign="right",r.fillText("â  INVERTED",a-M.right,M.top))}drawIndexChart(t){if(!t)return;this.currentData=t;const e=document.getElementById("market-chart");if(!e||!this.marketDataService.dataMap)return;this.activeChart,this.activeChart;const n=e.getContext("2d"),i=e.width,r=e.height;n.clearRect(0,0,i,r);const a=Object.keys(this.marketDataService.dataMap).sort(),s=a.indexOf(t.date);if(s===-1)return;const l=Math.max(0,s-30),c=a.slice(l,s+1);let u=[];if(this.activeChart==="sp500"?u=c.map(v=>this.marketDataService.dataMap[v].sp500Value):this.activeChart==="dow"?u=c.map(v=>this.marketDataService.dataMap[v].dowValue||0):u=c.map(v=>this.marketDataService.dataMap[v].indexValue),u.length<2)return;const d=Math.min(...u),g=Math.max(...u)-d||1;n.beginPath();const y=u[u.length-1]>=u[0]?"#00ffaa":"#ff5050";n.strokeStyle=y,n.lineWidth=2;const f=n.createLinearGradient(0,0,0,r);f.addColorStop(0,y),f.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=f,n.moveTo(0,r),u.forEach((v,_)=>{const b=_/(u.length-1)*i,w=r-(v-d)/g*r*.8-r*.1;n.lineTo(b,w)}),n.lineTo(i,r),n.globalAlpha=.2,n.fill(),n.globalAlpha=1,n.beginPath(),u.forEach((v,_)=>{const b=_/(u.length-1)*i,w=r-(v-d)/g*r*.8-r*.1;_===0?n.moveTo(b,w):n.lineTo(b,w)}),n.stroke()}determineRulingGod(t){if(!t)return null;const e=t.fearGreedIndex||50,n=t.vix||20,i=t.marketChangePercent||0,r=t.volumeRatio||1,a=t.rsi||50;Math.abs(t.marketGap||0);const s=t.dayHigh||0,l=t.yearHigh||s,c=t.yearLow||t.dayLow,u=t.indexValue||0,d=t.intradayRange||0;return u>=l*.98||i>1&&e>75?"zeus":e>80&&a>70?"dionysus":r>1.5&&Math.abs(i)>1.5?"hermes":i>1&&a<50?"apollo":e<15?"hades":i<-1.8&&r>1.3?"poseidon":n>28&&d>1.5?"ares":Math.abs(i)<.3&&n>20?"hecate":r<.6?"hypnos":n<14?"chronos":u<=c*1.05?"hephaestus":"athena"}getGodInformation(t,e){const n={zeus:{name:"ZEUS",title:"King of the Gods",significance:"Zeus represents absolute power and market dominance. When Zeus rules, the market reaches new heights, showing unshakeable confidence and strength.",why:e?`The market is near all-time highs (${(e.indexValue/e.yearHigh*100).toFixed(1)}% of year high) with extreme momentum. This is a day of power and dominance.`:"Market is at peak strength and dominance.",about:"In Greek mythology, Zeus is the ruler of Mount Olympus and the god of sky and thunder. He represents ultimate authority, power, and the ability to shape destiny. In market terms, Zeus days are marked by peak performance, all-time highs, and unshakeable bullish sentiment.",context:"Zeus days occur when markets reach new heights, showing the power of collective confidence and momentum. These are days when the market gods favor the bulls."},dionysus:{name:"DIONYSUS",title:"God of Ecstasy & Excess",significance:"Dionysus embodies irrational exuberance and market mania. When he rules, euphoria takes over, often disconnected from fundamental reality.",why:e?`Extreme greed (Fear & Greed: ${e.fearGreedIndex}) combined with overbought conditions. The market is in a state of euphoric excess.`:"Market shows signs of irrational exuberance.",about:"Dionysus is the god of wine, festivity, and ecstatic celebration. He represents the abandonment of reason in favor of pure emotion and excess. In markets, Dionysus days are marked by euphoric buying, FOMO (Fear Of Missing Out), and potential bubbles.",context:"These are dangerous daysâwhile they feel amazing, they often precede corrections. The party can't last forever, but while it does, the revelry is intense."},hermes:{name:"HERMES",title:"Messenger of the Gods",significance:"Hermes represents speed, velocity, and rapid movement. When he rules, money moves fast and markets react with lightning speed.",why:e?`High volume (${(e.volumeRatio*100).toFixed(0)}% of average) combined with a ${e.marketChangePercent>0?"strong rally":"sharp decline"} of ${Math.abs(e.marketChangePercent).toFixed(2)}%. Money is moving at incredible speed.`:"High velocity trading and rapid market movements.",about:"Hermes is the swift messenger of the gods, known for his speed and agility. He represents communication, commerce, and rapid change. In markets, Hermes days are marked by high volume, fast price movements, and the rapid flow of capital.",context:"These are dynamic days where information spreads quickly and markets react instantly. Speed is everythingâboth opportunity and risk move fast."},apollo:{name:"APOLLO",title:"God of Healing & Light",significance:"Apollo brings recovery and healing to wounded markets. When he rules, markets rise from lows, showing resilience and renewal.",why:e?`Strong recovery (${e.marketChangePercent>0?"+":""}${e.marketChangePercent.toFixed(2)}%) from oversold conditions. The market is healing and finding its strength again.`:"Market is in recovery mode, healing from previous weakness.",about:"Apollo is the god of light, healing, prophecy, and music. He brings clarity after darkness and healing after injury. In markets, Apollo days represent recovery rallies, bounce-backs from oversold conditions, and the return of optimism.",context:"These are hopeful days when markets find their footing after decline. Apollo brings the light that follows the darkness, showing that recovery is possible."},hades:{name:"HADES",title:"God of the Underworld",significance:"Hades represents the depths of fear and capitulation. When he rules, markets reach extreme fear, often marking potential turning points.",why:e?`Extreme fear (Fear & Greed: ${e.fearGreedIndex}). The market has reached the depths of despair, where capitulation often occurs.`:"Market is in extreme fear territory.",about:"Hades rules the underworld, the realm of the dead. He represents the deepest fears, the unknown, and transformation through darkness. In markets, Hades days are marked by extreme fear, panic selling, and the darkest moments before potential dawn.",context:"These are the darkest days, but they often mark turning points. When fear reaches its peak, opportunity may be nearâthough it requires courage to see it."},poseidon:{name:"POSEIDON",title:"God of the Seas",significance:"Poseidon brings waves of liquidation and cascading selloffs. When he rules, panic selling creates powerful downward waves.",why:e?`Deep decline (${e.marketChangePercent.toFixed(2)}%) with high volume (${(e.volumeRatio*100).toFixed(0)}% of average). A cascade of selling is washing through the market.`:"Market is experiencing a liquidation cascade.",about:"Poseidon controls the oceans, creating powerful waves and storms. He represents the unstoppable force of nature and the power of cascading events. In markets, Poseidon days are marked by panic selling, liquidation cascades, and the overwhelming force of fear.",context:"These are turbulent days when selling feeds on itself, creating waves of panic. Like the ocean, these forces are powerful but eventually subside."},ares:{name:"ARES",title:"God of War",significance:"Ares represents conflict, volatility, and battle. When he rules, markets are a battlefield with high volatility but unclear direction.",why:e?`High volatility (VIX: ${e.vix.toFixed(1)}) with wide intraday range (${e.intradayRange.toFixed(2)}%). The market is a battlefield with no clear winner.`:"High volatility and market conflict.",about:"Ares is the god of war, representing conflict, battle, and the chaos of combat. He embodies aggression, volatility, and the struggle for dominance. In markets, Ares days are marked by high VIX, wide price swings, and the uncertainty of battle.",context:"These are chaotic days where bulls and bears fight fiercely. Direction is unclear, and volatility reigns supreme. It's a war zone."},hecate:{name:"HECATE",title:"Goddess of Crossroads",significance:"Hecate stands at the crossroads of decision. When she rules, markets are indecisive, standing between bull and bear.",why:e?`Small price change (${e.marketChangePercent>0?"+":""}${e.marketChangePercent.toFixed(2)}%) but elevated anxiety (VIX: ${e.vix.toFixed(1)}). The market stands at a crossroads.`:"Market is at a critical decision point.",about:"Hecate is the goddess of crossroads, magic, and transitions. She represents moments of choice, uncertainty, and the threshold between states. In markets, Hecate days are marked by indecision, small moves with high anxiety, and the tension of pending decisions.",context:"These are pivotal days when the market stands between directions. The path forward is unclear, and the next move will determine the trend."},hypnos:{name:"HYPNOS",title:"God of Sleep",significance:"Hypnos brings dormancy and low activity. When he rules, markets are sleeping, with minimal participation and movement.",why:e?`Very low volume (${(e.volumeRatio*100).toFixed(0)}% of average). The market is in a state of dormancy, waiting to awaken.`:"Market is in a dormant, low-activity state.",about:"Hypnos is the god of sleep, representing rest, dormancy, and the pause between actions. He brings peace but also stagnation. In markets, Hypnos days are marked by low volume, minimal movement, and a market that seems to be waiting.",context:"These are quiet days when the market rests. While peaceful, they often precede significant moves when the market awakens."},chronos:{name:"CHRONOS",title:"God of Time",significance:"Chronos represents the slow passage of time and steady grinding. When he rules, markets move slowly and methodically.",why:e?`Low volatility (VIX: ${e.vix.toFixed(1)}). Time is passing slowly, and the market is grinding methodically forward.`:"Market is in a low-volatility, time-passing state.",about:"Chronos is the personification of time itself, representing the slow, inexorable passage of moments. He embodies patience, persistence, and the gradual accumulation of change. In markets, Chronos days are marked by low volatility, steady trends, and the slow work of time.",context:"These are steady days when markets move methodically. Change happens slowly, but it is constant and reliable."},hephaestus:{name:"HEPHAESTUS",title:"God of the Forge",significance:"Hephaestus builds foundations and support. When he rules, markets are forging a base, building strength from lows.",why:e?`Price near lows (${(e.indexValue/e.yearLow*100).toFixed(1)}% above year low) with steady volume. The market is forging a foundation.`:"Market is building support near lows.",about:"Hephaestus is the god of the forge, craftsmanship, and creation. He builds with fire and skill, creating foundations that last. In markets, Hephaestus days are marked by price action near lows, steady accumulation, and the building of support bases.",context:"These are foundational days when the market builds strength from weakness. Like a blacksmith, the market is forging a base for future growth."},athena:{name:"ATHENA",title:"Goddess of Wisdom",significance:"Athena represents strategic thinking and calculated moves. When she rules, markets move with wisdom and measured action.",why:e?"Calm and strategic market conditions. The market is moving with wisdom and measured action, showing the hand of smart money.":"Market is in a state of strategic, wise movement.",about:"Athena is the goddess of wisdom, strategy, and warfare. She represents intelligent action, calculated decisions, and the power of knowledge. In markets, Athena days are marked by calm trends, strategic positioning, and the influence of informed capital.",context:"These are wise days when markets move with purpose and strategy. Smart money is at work, building positions thoughtfully and methodically."}};return n[t.toLowerCase()]||n.athena}updateGodInformation(t,e){if(!e)return;const n=this.getGodInformation(e,t),i=document.getElementById("god-name");i&&(i.textContent=n.name);const r=document.getElementById("god-title");r&&(r.textContent=n.title);const a=document.getElementById("god-significance");a&&(a.textContent=n.significance);const s=document.getElementById("god-why");s&&(s.textContent=n.why);const l=document.getElementById("god-summary");if(l){const u=`${n.significance} ${n.context}`;l.textContent=u}const c=document.getElementById("god-about");c&&(c.textContent=n.about)}}document.addEventListener("DOMContentLoaded",()=>{console.log("[Main] Initializing WebGL Experience...");const o=document.querySelector("canvas.experience__canvas");o?new Zi(o,gt):console.error("Canvas element not found!"),console.log("[Main] Initializing AppController..."),window.app=new wo});
