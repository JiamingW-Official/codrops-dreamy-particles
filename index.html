<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<link rel="shortcut icon" href="./favicon.ico">
	<link rel="stylesheet" href="./style.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>GPGPU Shining Mask - Mask</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
</head>

<body class="is-loading">
	<canvas class="experience__canvas"></canvas>

	<!-- Unified Rational UI Grid -->
	<div class="ui-layer">

		<!-- Header -->
		<div class="header">
			<div class="logo">MARKET SENTIMENT VISUALIZER</div>
			<div class="sub-logo">RATIONAL DATA & GENERATIVE MOODS</div>
			<div id="market-status" class="market-status hidden">Market Closed</div>
			<div class="panel-left glass-panel">
				<!-- NASDAQ CHART (New) -->
				<div class="chart-container" style="margin-bottom: 2rem;">
					<div class="chart-label">MARKET TREND (30D)</div>
					<canvas id="market-chart" width="280" height="80"></canvas>
				</div>

				<div class="panel-header" style="display:flex; justify-content:space-between; align-items:center;">
					<span>MARKET DATA</span>
					<div class="chart-nav">
						<span id="btn-chart-prev" class="nav-arrow"
							style="cursor:pointer; padding:0 5px;">&#9664;</span>
						<span id="chart-title" style="font-size:0.8em; color:#aaa;">NASDAQ</span>
						<span id="btn-chart-next" class="nav-arrow"
							style="cursor:pointer; padding:0 5px;">&#9654;</span>
					</div>
				</div>

				<!-- INDICES LIST (Clickable) -->
				<div class="market-data-list">
					<div class="data-row clickable active-row" id="row-nasdaq">
						<span class="label">NASDAQ</span>
						<span class="value" id="val-index">--</span>
						<span class="change-pill" id="val-change">--%</span>
					</div>
					<div class="data-row clickable" id="row-sp500">
						<span class="label">S&P 500</span>
						<span class="value" id="val-sp500">--</span>
						<span class="change-pill" id="val-sp500-change">--%</span>
					</div>
					<div class="data-row clickable" id="row-dow">
						<span class="label">DOW JONES</span>
						<span class="value" id="val-dow">--</span>
						<span class="change-pill" id="val-dow-change">--%</span>
					</div>
				</div>

				<div class="separator"></div>

				<div class="data-group">
					<div class="data-row-compact">
						<span class="label-muted">Risk/Reward</span>
						<div class="risk-gauge-mini">
							<div id="risk-fill" class="risk-fill"></div>
						</div>
						<span class="value-small" id="risk-val">Neutral</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">Volume</span>
						<span class="value-small" id="val-volume">--</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">VIX</span>
						<span class="value-small" id="val-vix">--</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">52W Range</span>
						<span class="value-small" id="val-52w-range">--</span>
					</div>
				</div>

				<div class="separator"></div>

				<div class="data-group">
					<div class="data-row-compact">
						<span class="label-muted">Gold</span>
						<span class="value-small" id="val-gold">--</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">Crude Oil</span>
						<span class="value-small" id="val-oil">--</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">10Y Yield</span>
						<span class="value-small" id="val-yield">--</span>
					</div>
					<div class="data-row-compact">
						<span class="label-muted">Dollar (DXY)</span>
						<span class="value-small" id="val-dxy">--</span>
					</div>
				</div>
			</div>
		</div>

		<!-- RIGHT SIDEBAR -->
		<div id="sidebar-right">
			<div class="glass-panel">
				<div class="panel-header">
					<span class="panel-title">INTELLIGENCE</span>
				</div>

				<div class="ai-insight-box">
					<div id="ai-analyst-text" class="typing-text">Initializing AI...</div>
				</div>

				<div class="separator"></div>

				<!-- RESTORED: Treemap (Heatmap) -->
				<div id="sector-momentum">
					<div class="section-title-small">SECTOR HEATMAP</div>
					<div id="treemap-container" class="sector-treemap-container"></div>
				</div>

				<div class="separator"></div>

				<!-- Yield Curve (Below Heatmap) -->
				<div id="yield-curve-section">
					<div class="section-title-small">YIELD CURVE</div>
					<canvas id="yield-curve-chart" width="280" height="100"></canvas>
				</div>

				<div class="separator"></div>

				<!-- RESTORED: Sentiment Velocity -->
				<div id="market-breadth">
					<div class="section-title-small">VELOCITY</div>
					<div class="velocity-track">
						<div id="velocity-marker" class="velocity-marker"></div>
					</div>
					<div class="flex-row space-between" style="font-size:0.7rem; opacity:0.5; margin-top:4px;">
						<span>Cooling</span>
						<span>Heating</span>
					</div>
				</div>

				<div class="separator"></div>

				<!-- MOVED: Headlines (Right) -->
				<div id="headlines-section">
					<div class="section-title-small">HEADLINES</div>
					<div id="headlines-container">
						<!-- JS Injected -->
					</div>
				</div>

				<div class="separator"></div>

				<div class="control-group">
					<span class="label-muted">Visual Model</span>
					<select id="model-select" class="dropdown">
						<option value="mask">Classic Mask</option>
						<option value="venecia">Venecia</option>
						<option value="cyborg">Cyborg</option>
						<option value="samurai">Samurai</option>
						<option value="subway">Subway</option>
					</select>
				</div>
			</div>
		</div>

		<!-- BOTTOM TIMELINE -->
		<div class="timeline-wrapper">
			<div class="timeline-controls-row">
				<button id="btn-play" class="btn-icon">â–¶</button>
				<div class="timeline-track">
					<canvas id="timeline-canvas"></canvas>
					<input type="range" id="timeline-slider" min="0" max="100" value="100" class="timeline-slider">
				</div>
				<!-- HIDDEN DATE PICKER (Critical for AppController logic) -->
				<div style="width:0; height:0; overflow:hidden; opacity:0;">
					<input type="text" id="date-picker">
				</div>
			</div>
			<div class="timeline-labels">
				<span id="timeline-start">Past</span>
				<span id="timeline-current">Today</span>
			</div>
		</div>

	</div>

	<!-- Scripts -->
	<script type="module" src="./src/index.js"></script>
	<script type="module" src="./webgl/Mask.js"></script>
</body>

</html>